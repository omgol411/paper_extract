(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{"1hPV":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("PJModalVuetify",{staticClass:"pj-login-modal",attrs:{title:"Sign in to PeerJ",maxWidth:"300px","overlay-opacity":.9,persistent:"",hideCloseButton:""},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"pt-4"},[t("div",[e._v("Please sign in to continue")]),e._v(" "),t("v-text-field",{ref:"emailInput",attrs:{disabled:e.loading,placeholder:"Email","error-messages":e.getValidationErrors(null,"email")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),t("v-text-field",{attrs:{type:"password",disabled:e.loading,placeholder:"Password","error-messages":e.getValidationErrors(null,"password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),e.error?t("v-alert",{attrs:{type:"error",dense:"",icon:!1}},[e._v("\n                Incorrect email or password,"),t("br"),e._v("Please try again\n            ")]):e._e(),e._v(" "),t("a",{staticClass:"primary--text small",attrs:{href:"/resetting/request",target:"_blank"}},[e._v("Forgot your password?")])],1)]},proxy:!0},{key:"buttons",fn:function(){return[t("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.login}},[e._v("Sign In")])]},proxy:!0}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}})};o._withStripped=!0;var s=r("o0o1"),i=r.n(s),n=r("yXPU"),a=r.n(n),l=r("vDqi"),c=r.n(l),d=r("bbSu"),u=r("u8Zi"),h=r("dwWe"),p=r("ZDqI"),f=r("6OTJ"),m=r("ta7f"),v={mixins:[r("cqKV").a],validations:{email:{required:m.required,email:m.email},password:{required:m.required}},data:function(){return{error:!1,open:!1,email:"",password:"",loading:!1,showValidationErrors:!1}},methods:{login:function(){var e=this;return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.showValidationErrors=!1,e.$v.$touch(),!e.$v.$invalid){t.next=5;break}return e.showValidationErrors=!0,t.abrupt("return");case 5:e.error=!1,e.loading=!0,c.a.post("/api/login/",{username:e.email,password:e.password},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var t=a()(i.a.mark((function t(r){var o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.data.token){t.next=9;break}return o=r.data.token,s=Object(p.a)(o),e.$store.commit("user/setToken",o),e.$store.commit("user/setDecodedToken",s),h.a.setItem("jwt",o),t.next=8,f.a.getOwnProfileData();case 8:e.close();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log("Login error",t),e.error=!0,setTimeout((function(){e.$refs.emailInput.focus()}),200)})).finally((function(){e.loading=!1}));case 8:case"end":return t.stop()}}),t)})))()},reset:function(){this.email="",this.password="",this.error=!1,this.loading=!1,this.showValidationErrors=!1},show:function(){var e=this;this.reset(),this.open=!0,setTimeout((function(){e.$refs.emailInput.focus()}),200)},close:function(){this.open=!1}},mounted:function(){d.a.$on(u.a.SHOW_LOGIN_MODAL,this.show),this.username="",this.password="",this.loading=!1},beforeDestroy:function(){d.a.$off(u.a.SHOW_LOGIN_MODAL)}},g=(r("FkvG"),r("KHd+")),y=r("ZUTo"),_=r.n(y),b=r("B5h7"),w=r("gzZi"),k=r("hlRy"),x=Object(g.a)(v,o,[],!1,null,"5c83c782",null);t.default=x.exports;_()(x,{VAlert:b.a,VBtn:w.a,VTextField:k.a})},B5h7:function(e,t,r){"use strict";r("DBhR");var o=r("ENL/"),s=r("r93R"),i=r("nSar"),n=r("8ud9"),a=r("dWAg"),l=r("9A1v"),c=r("WN+I"),d=r("2b3T");t.a=Object(c.a)(o.a,n.a,l.a).extend({name:"v-alert",props:{border:{type:String,validator:e=>["top","right","bottom","left"].includes(e)},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:e=>"string"==typeof e||!1===e},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:e=>["info","error","success","warning"].includes(e)},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{["v-alert__border--"+this.border]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(s.a,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(i.a,{props:{color:e}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(i.a,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...o.a.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e["v-alert--border-"+this.border]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$"+this.type)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||a.a.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&Object(d.a)("outline","outlined",this)},methods:{genWrapper(){const e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){e=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}})},DBhR:function(e,t,r){},FkvG:function(e,t,r){"use strict";r("f7ie")},f7ie:function(e,t,r){},r93R:function(e,t,r){"use strict";var o=r("gzZi");t.a=o.a}}]);