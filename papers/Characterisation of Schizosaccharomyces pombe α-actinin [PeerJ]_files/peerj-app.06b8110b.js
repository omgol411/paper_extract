(window.webpackJsonp=window.webpackJsonp||[]).push([["peerj-app"],{"+MGT":function(t,e,n){},"+eZG":function(t,e,n){"use strict";n("S07e")},"/04F":function(t,e,n){},"/1vL":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("v-btn",{staticClass:"shadow-sm",class:[t.bgColor,t.textColor,t.textHover,t.bgHover,t.customClass],attrs:{block:t.block,small:t.small,"x-small":t.xSmall,large:t.large,color:t.color,depressed:t.depressed},on:{click:t.btnClicked}},[t.iconName?e("v-icon",{staticClass:"transition-none",class:[t.iconMr],attrs:{small:t.smallIcon}},[t._v(t._s(t.iconName))]):t._e(),t._v("\n  "+t._s(t.text)+"\n")],1)};i._withStripped=!0;var r={name:"HoverButton",props:{text:{type:String,default:""},color:{type:String,default:""},bgColor:{type:String,default:""},textColor:{type:String,default:""},textHover:{type:String,default:""},bgHover:{type:String,default:""},block:{type:Boolean,default:!1},depressed:{type:Boolean,default:!0},small:{type:Boolean,default:!1},iconName:{type:String,default:""},customClass:{type:String,default:""},large:{type:Boolean,default:!1},xSmall:{type:Boolean,default:!1},iconMr:{type:String,default:""},smallIcon:{type:Boolean,default:!1},clickEvent:{type:Function,required:!1}},methods:{btnClicked:function(){this.clickEvent&&this.clickEvent()}}},a=n("KHd+"),s=n("ZUTo"),o=n.n(s),l=n("gzZi"),c=n("Ey0z"),u=Object(a.a)(r,i,[],!1,null,null,null);e.default=u.exports;o()(u,{VBtn:l.a,VIcon:c.a})},"/CkT":function(t,e,n){"use strict";var i=n("sNUu");e.a={dateFormat:function(t,e){return i.a.format(t,e)},formatDateToNow:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.a.formatDateToNow(t,e,n)},formatDateToNowShort:function(t,e){return i.a.formatDateToNowShort(t,e)},formatToNowVeryShort:function(t,e){return i.a.formatToNowVeryShort(t,e)}}},"/Twz":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("v-list-item",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"primary--text"},expression:"{class: 'primary--text'}"}],staticClass:"text-18 pl-6",attrs:{href:t.href,rel:t.href&&"#"!==t.href?"noopener":void 0,target:!t.item._self&&t.href&&"#"!==t.href?"_blank":void 0,to:t.item.to,"active-class":" ".concat(t.isDark?" grey--text text--lighten-5":"primary--text"),height:48}},[t.text?e("v-list-item-icon",{staticClass:"v-list-item__icon--text",domProps:{textContent:t._s(t.computedText)}}):t.item.badgeIcon?e("v-badge",{attrs:{size:"10px",icon:t.item.badgeIcon,color:t.item.badgeColor?t.item.badgeColor:"",bordered:!t.item.hideBadgeBorder,left:t.item.badgeLeft,overlap:t.item.badgeOverlap,bottom:t.item.badgeBottom,"offset-x":t.item.badgeOffsetX?t.item.badgeOffsetX:"","offset-y":t.item.badgeOffsetY?t.item.badgeOffsetY:""}},[e("v-icon",{attrs:{color:t.item.iconColor?t.item.iconColor:""},domProps:{textContent:t._s(t.item.icon)}})],1):t.item.icon?e("v-list-item-icon",[e("v-icon",{attrs:{color:t.item.iconColor?t.item.iconColor:""},domProps:{textContent:t._s(t.item.icon)}})],1):t._e(),t._v(" "),t.title||t.subtitle?e("v-list-item-content",{staticClass:"pa-0 text-14",attrs:{c:""}},[e("v-list-item-title",{staticClass:"ma-0 text-14",domProps:{textContent:t._s(t.title)}}),t._v(" "),e("v-list-item-subtitle",{domProps:{textContent:t._s(t.subtitle)}})],1):t._e()],1)};i._withStripped=!0;var r={name:"Item",mixins:[n("dWAg").a],props:{item:{type:Object,default:function(){return{href:void 0,iconLeft:void 0,icon:void 0,subtitle:void 0,subText:void 0,text:void 0,title:void 0,to:void 0}}},text:{type:Boolean,default:!1}},computed:{title:function(){return this.item&&(this.item.text||this.item.title)?this.item.text?this.item.text:this.item.title:""},subtitle:function(){return this.item&&(this.item.subText||this.item.subtitle)?this.item.subText?this.item.subText:this.item.subtitle:""},computedText:function(){if(!this.item||!this.item.text&&!this.item.title)return"";var t="";return(this.item.text?this.item.text:this.item.title).split(" ").forEach((function(e){t+=e.substring(0,1)})),t},href:function(){return this.item.href||this.item.path||(this.item.to?void 0:"#")}}},a=(n("neK7"),n("KHd+")),s=n("ZUTo"),o=n.n(s),l=n("TKb1"),c=n("Ey0z"),u=n("2hOt"),d=n("XSMC"),h=n("NMP6"),p=n("Jpri"),f=n.n(p),m=n("VgeV"),v=Object(a.a)(r,i,[],!1,null,null,null);e.default=v.exports;o()(v,{VBadge:l.a,VIcon:c.a,VListItem:u.a,VListItemContent:d.a,VListItemIcon:h.a,VListItemSubtitle:d.b,VListItemTitle:d.c}),f()(v,{Ripple:m.a})},"/hMX":function(t,e,n){"use strict";var i=n("vDqi"),r=n.n(i),a=n("dwWe"),s=n("jsnD"),o=n("koCO"),l=n("bbSu"),c=n("u8Zi"),u={baseUrl:"/api/",endpoints:{root:{url:""},signIn:{url:"login/"},token:{url:"token/"},messages:{url:"articles/{articleId}/messages/"},emails:{url:"emails/{id}.{format}"},articles:{url:"articles"},article:{url:"articles/{id}/"}},cancelTokenSources:[],buildUrl:function(t,e,n){for(var i in e)t=t.replace("{"+i+"}",e[i]);Object.keys(n).length&&(t+="?"+Object.keys(n).map((function(t){return t+"="+n[t]})).join("&"));return"http"==t.substring(0,4)?t:this.baseUrl+t},refreshTokenAndRetryCall:function(t){var e=this;if(!t.retries||t.retries<2)return new Promise((function(n,i){s.a.dispatch("user/checkSignedIn").then((function(){return t.retry=!0,e.call(t)})).then((function(t){n(t)})).catch((function(t){console.warn("Api Error, token refresh attempted",t),l.a.$emit(c.a.SHOW_LOGIN_MODAL),i(t)}))}));console.warn("API retry limit reached."),l.a.$emit(c.a.SHOW_LOGIN_MODAL)},call:function(t){var e=this;t.retry?(t.retries++,console.log("Re-trying API Call")):t.retries=0;var n=t.hasOwnProperty("endpoint")?t.endpoint:"root",i=t.hasOwnProperty("method")?t.method:"GET",s=t.hasOwnProperty("urlParams")?t.urlParams:{},l=t.hasOwnProperty("queryParams")?t.queryParams:{},c=t.hasOwnProperty("data")?t.data:{},u=t.hasOwnProperty("model")?t.model:null,d=t.hasOwnProperty("url")?t.url:null;t.paginationPage&&(l.page=t.paginationPage),t.paginationLimit&&(l["pager-limit"]=t.paginationLimit),d=(d=this.buildUrl(d||this.endpoints[n].url,s,l)).replace("//api","");var h=a.a.getItem("jwt")?a.a.getItem("jwt"):"",p=r.a.CancelToken.source();return this.cancelTokenSources.push(p),new Promise((function(n,a){r()({withCredentials:!0,headers:{Authorization:"bearer "+h,"X-Requested-With":"XMLHttpRequest"},method:i,url:d,data:c,cancelToken:p.token}).then((function(t){var e={status:t.status};if(t.headers["x-pj-redirect-external"])r.a.get(t.headers["x-pj-redirect-external"]).then((function(t){e.data=t.data,n(e)})).catch((function(t){a(t)}));else{if(u)if(t.data.pagerItems)e.data=new o.a(t.data,u);else try{e.data=new u(t.data)}catch(t){console.error("Error creating model from api data: ",t),a(t.message)}else e.data=t.data;n(e)}})).catch((function(i){var r=i.response;r&&401==r.data.code&&!t.retry?e.refreshTokenAndRetryCall(t).then((function(t){n(t)})).catch((function(t){a(t)})):(console.warn("Api Error",i),a(r))})).finally((function(){}))}))},cancelAllRequests:function(){this.cancelTokenSources.forEach((function(t){t.cancel(">>API Request cancelled")}))},initGlobals:function(){var t={cancelAllRequests:function(){u.cancelAllRequests()}};window.PeerJ?window.PeerJ.Api=t:window.PeerJ={Api:t}}};u.initGlobals(),e.a=u},"0ZMU":function(t,e,n){},"0fxA":function(t,e,n){var i={"./Card.vue":"aPrH","./Chart.vue":"XLwj","./ChartCard.vue":"fYPL","./HoverButton.vue":"/1vL","./OutlineButton.vue":"bPE9","./item.vue":"/Twz","./itemGroup.vue":"SW4x","./itemSubGroup.vue":"PSin"};function r(t){var e=a(t);return n(e)}function a(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=a,t.exports=r,r.id="0fxA"},"1FbP":function(t,e,n){},"1IrZ":function(t,e,n){"use strict";var i=n("RIqP"),r=n.n(i),a=n("lSNA"),s=n.n(a),o=n("lwsE"),l=n.n(o),c=n("W8MJ"),u=n.n(c),d=n("/hMX"),h=n("koCO");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(){function t(e){l()(this,t),this.endpoints=this.endpoints,this.loading=!1,this.saving=!1,this.id=e?e.id:null,this.created=e?e.created:null,this.updated=e?e.updated:null,this._links={},this._allowedActions={},e&&(this._links=e._links?{self:e._links.self}:{},this._allowedActions=e._allowedActions)}return u()(t,[{key:"links",get:function(){return this._links},set:function(t){this._links=f(f({},this._links),t)}},{key:"allowedActions",get:function(){return this._allowedActions},set:function(t){this._allowedActions=f(f({},this._allowedActions),t)}},{key:"apiId",get:function(){return this._links.self}},{key:"update",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.urlParams={id:this.id},new Promise((function(n,i){t.save(e).then((function(t){n(t)})).catch((function(t){i(t)}))}))}},{key:"save",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.constructor,i=["allowedActions","_allowedActions","loading","saving","created","updated","id","_links","links","endpoints","createExclude"];return n.createExclude&&(i=[].concat(r()(i),r()(n.createExclude))),new Promise((function(r,a){var s={};Object.keys(t).forEach((function(e,n){i.includes(e)||(s[e]=t[e])}));var o=!!t.id,l=f(f({url:o?n.endpoints.update:n.endpoints.create},e),{},{method:o?"PUT":"POST",data:s,model:n});d.a.call(l).then((function(t){r(t.data)})).catch((function(t){a(t)}))}))}},{key:"delete",value:function(){var t=this;return new Promise((function(e,n){d.a.call({url:t.apiId,method:"DELETE"}).then((function(t){e(t)})).catch((function(t){n(t)}))}))}},{key:"collect",value:function(t,e){return new h.a(t,e)}}],[{key:"endpoints",get:function(){return{get:null,list:null,delete:null,save:null,update:null}}},{key:"get",value:function(t){var e=this;return new Promise((function(n,i){e.endpoints.get||t.hasOwnProperty("url")||i("No endpoint defined for get",e.endpoints,t),t.url=t.url?t.url:e.endpoints.get,t.model=e,d.a.call(t).then((function(t){n(t.data)})).catch((function(t){i(t)}))}))}},{key:"list",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,i){t.endpoints.list||e.hasOwnProperty("url")||i("No endpoint defined for get",t.endpoints,e),e.url=e.url?e.url:t.endpoints.list,e.model=t,d.a.call(e).then((function(t){n(t.data)})).catch((function(t){i(t)}))}))}}]),t}();e.a=m},"1UaM":function(t,e,n){"use strict";n("Gkvw")},"1YBq":function(t,e,n){},"2S71":function(t,e,n){"use strict";n("Z1Zl")},"2nGf":function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("v-snackbar",{attrs:{color:t.color,"multi-line":!0,timeout:t.timeout,top:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.showIcon?e("v-row",{staticClass:"mb-2"},[e("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t.isError?e("span",[e("v-icon",[t._v(t._s(t.errorIcon))])],1):e("span",[e("v-icon",[t._v(t._s(t.successIcon))])],1)])],1):t._e(),t._v(" "),e("v-row",{staticClass:"mb-3"},[e("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e("span",{staticStyle:{"white-space":"pre-line"}},[t._v(t._s(t.text))]),t._v(" "),t.subText?[e("p",{staticStyle:{"white-space":"pre-line"}},[t._v(t._s(t.subText))])]:t._e()],2)],1),t._v(" "),e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e("v-btn",{attrs:{outlined:""},nativeOn:{click:function(e){return t.close.apply(null,arguments)}}},[t._v(t._s(t.$t("Close")))])],1)],1)],1)};i._withStripped=!0;var r=n("lSNA"),a=n.n(r),s=n("WTW0");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var l={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.c)("notifications",["color","show","subText","text","timeout","isError","showIcon","errorIcon","successIcon"])),methods:{close:function(){this.show=!1}}},c=n("KHd+"),u=n("ZUTo"),d=n.n(u),h=n("gzZi"),p=n("Yq0q"),f=n("Ey0z"),m=n("D9m0"),v=n("LbRV"),g=Object(c.a)(l,i,[],!1,null,null,null);e.a=g.exports;d()(g,{VBtn:h.a,VCol:p.a,VIcon:f.a,VRow:m.a,VSnackbar:v.a})},"2oEp":function(t,e,n){"use strict";n("9Gxo")},"2waU":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("lwsE"),r=n.n(i),a=n("W8MJ"),s=n.n(a),o=n("7W2i"),l=n.n(o),c=n("a1gu"),u=n.n(c),d=n("Nsbk"),h=n.n(d),p=n("1IrZ"),f=n("reo2");function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var v=function(t){l()(n,t);var e=m(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).institution=t?t.institution:"",i.institutionCanonical=t?t.institutionCanonical:null,i.department=t?t.department:"",i.city=t?t.city:"",i.state=t?t.state:"",i.postcode=t?t.postcode:"",i.country=t?t.country:"",i.curate=!!t&&t.curate,i.type=t?t.type:"author",i}return s()(n,[{key:"fullAddress",get:function(){return[this.department,this.institution,this.city,this.state,this.country,this.postcode].filter((function(t){return t})).join(", ")}},{key:"addressHash",get:function(){return[this.department,this.institution,this.city,this.state,this.country,this.postcode,this.type].map((function(t){return t?t.trim():"-"})).join(":")}}],[{key:"endpoints",get:function(){return{list:f.a.endpoints.get+"addresses/",create:f.a.endpoints.get+"addresses/",update:"addresses/{id}/"}}}]),n}(p.a)},"40zP":function(t,e,n){},"4Gk9":function(t,e,n){"use strict";n("mlf+")},"4GuJ":function(t,e,n){},"5rbR":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n("lwsE"),r=n.n(i),a=n("PJYZ"),s=n.n(a),o=n("7W2i"),l=n.n(o),c=n("a1gu"),u=n.n(c),d=n("Nsbk"),h=n.n(d),p=n("oShl");function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var m=function(t){l()(n,t);var e=f(n);function n(t){var i;return r()(this,n),(i=e.call(this,"Submit Validation Failed")).errors=t,Error.captureStackTrace&&Error.captureStackTrace(s()(i),i.constructor),i.name=i.constructor.name,u()(i,s()(i))}return n}(n.n(p)()(Error))},"5xko":function(t,e,n){},6359:function(t,e,n){},"6HWo":function(t,e,n){"use strict";var i=n("Kw5r"),r=n("aScO"),a=function(){var t=this,e=t._self._c;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"pagination justify-content-center mb-1"},[e("li",{staticClass:"page-item",class:{disabled:t.previousDisabled}},[e("router-link",{staticClass:"page-link",attrs:{to:{name:t.pageName,query:t.linkQueryString(t.previousPage)}}},[t._v("\n                    Previous\n                ")])],1),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:t.nextDisabled}},[e("router-link",{staticClass:"page-link",attrs:{to:{name:t.pageName,query:t.linkQueryString(t.nextPage)}}},[t._v("\n                    Next\n                ")])],1)])]),t._v(" "),e("div",{staticClass:"text-center text-muted"},[t.loading?e("small"):e("small",[t._v("Page "+t._s(t.currentPage)+" of "+t._s(t.totalPages))]),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-center mt-2"},[e("small",[t._v("Showing ")]),t._v(" "),e("div",{staticClass:"pagination-select-container mr-2 ml-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLimit,expression:"selectedLimit"}],staticClass:"form-control form-control-sm",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedLimit=e.target.multiple?n:n[0]}}},t._l(t.limitOptions,(function(n){return e("option",{key:n,domProps:{value:n}},[t._v(t._s(n))])})),0)]),t._v(" "),e("small",[t._v("per page")])])])])};a._withStripped=!0;var s=n("lSNA"),o=n.n(s),l={props:{paginationData:{type:n("ZRYv").a,required:!0},pageName:{type:String,required:!1,default:function(){return this.$route.name}},queryStringKey:{type:String,required:!1},loading:{type:Boolean,required:!1,default:!1}},data:function(){return{limitOptions:[25,50,100,200,500],selectedLimit:null}},computed:{totalPages:function(){return Math.ceil(this.paginationData.total/this.selectedLimit)},currentPage:function(){return parseInt(this.$route.query[this.queryStringKeyPage])||1},previousPage:function(){return this.currentPage>1?this.currentPage-1:this.currentPage},nextPage:function(){return this.currentPage<this.totalPages?this.currentPage+1:this.currentPage},previousDisabled:function(){return this.currentPage<=1||this.loading},nextDisabled:function(){return this.currentPage>this.totalPages-1||this.loading},queryStringKeyPage:function(){return this.queryStringKey?"page_".concat(this.queryStringKey):"page"},queryStringKeyLimit:function(){return this.queryStringKey?"limit_".concat(this.queryStringKey):"limit"}},methods:{linkQueryString:function(t){var e=Object.assign({},this.$route.query,o()({},this.queryStringKeyPage,t));return e=Object.assign({},e,o()({},this.queryStringKeyLimit,this.selectedLimit))}},watch:{selectedLimit:function(){if(!this.$route.query[this.queryStringKeyLimit]||parseInt(this.$route.query[this.queryStringKeyLimit])!=this.selectedLimit){var t=this.linkQueryString(1);this.$router.push({name:this.pageName,query:t})}}},created:function(){this.selectedLimit=parseInt(this.$route.query[this.queryStringKeyLimit])||this.paginationData.maxPerPage}},c=(n("wBlg"),n("KHd+")),u=Object(c.a)(l,a,[],!1,null,"15a2deec",null).exports,d=function(){var t=this._self._c;return t("button",{staticClass:"btn pj-btn",class:this.cssClass,attrs:{type:"button",disabled:this.loading},on:{click:this.emitClick}},[t("div",{class:{"slot-container-loading":this.loading}},[this._t("default")],2),this._v(" "),this.loading?t("LoadingSpinner",{staticClass:"loading-container"}):this._e()],1)};d._withStripped=!0;var h={props:{loading:Boolean,small:Boolean,block:Boolean,type:{validator:function(t){var e=[];return["default","primary","secondary","info","success","warning","danger","light","dark"].forEach((function(t){e.push(t),e.push("outline-"+t)})),-1!==e.indexOf(t)}}},computed:{cssClass:function(){var t="btn-"+this.type;return this.small&&(t+=" btn-sm"),this.block&&(t+=" btn-block"),t}},methods:{emitClick:function(){this.$emit("click")}}},p=(n("MO6L"),Object(c.a)(h,d,[],!1,null,"2cd5a370",null).exports),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"radio-button-container",on:{click:function(e){return t.$emit("click")}}},[e("div",{staticClass:"radio-button",class:{active:t.selected}},[t.selected?e("div",{staticClass:"radio-button-selected"}):t._e()]),t._v(" "),e("div",{staticClass:"radio-label ml-2"},[t._v(t._s(t.label))])])};f._withStripped=!0;var m={props:{selected:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:null},value:{required:!0}},methods:{}},v=(n("vYI4"),Object(c.a)(m,f,[],!1,null,"796ffada",null).exports),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"alert",class:t.cssClass},[t.title?e("strong",[t._v(t._s(t.title))]):t._e(),t._v(" "),e("div",[t._v(t._s(t.content))])])};g._withStripped=!0;var b={props:{title:{required:!1,type:String},content:{required:!0,type:String},type:{validator:function(t){return-1!==["default","primary","secondary","info","success","warning","danger","light","dark"].indexOf(t)}}},computed:{cssClass:function(){return"alert-"+this.type}}},y=Object(c.a)(b,g,[],!1,null,null,null).exports,_=n("HZW1"),S=function(){var t=this._self._c;return t("div",{staticClass:"pj-tooltip-wrapper"},[t("div",{staticClass:"slot-container"},[this._t("default")],2),this._v(" "),t("div",{staticClass:"pj-tooltip",class:this.tooltipCssClass},[this._v("\n        "+this._s(this.text)+"\n    ")])])};S._withStripped=!0;var w={props:{text:{type:String,default:"?"},position:{default:"bottom",validator:function(t){return-1!==["top","bottom","left","right"].indexOf(t)}}},computed:{tooltipCssClass:function(){return"pj-tooltip-".concat(this.position)}}},C=(n("1UaM"),Object(c.a)(w,S,[],!1,null,"21c5c80e",null).exports),O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pj-popover-wrapper"},[e("div",{staticClass:"trigger-container"},[t._t("triggerContainer")],2),t._v(" "),t.disabled?t._e():e("div",{staticClass:"pj-popover",class:t.popoverCssClass,on:{click:function(t){t.stopPropagation()},mousedown:function(e){return e.stopPropagation(),t.mousedown.apply(null,arguments)},mouseup:function(t){t.stopPropagation()}}},[t._t("contentContainer")],2)])};O._withStripped=!0;var E={props:{position:{default:"bottom",validator:function(t){return-1!==["top","bottom","left","right"].indexOf(t)}},disabled:{type:Boolean,default:!1,required:!1},closeOnHover:{type:Boolean,default:!0,required:!1},mouseDownPreventDefault:{type:Boolean,default:!1,required:!1}},computed:{popoverCssClass:function(){var t,e="pj-popover-".concat(this.position);return t={},o()(t,e,!0),o()(t,"hover-close",this.closeOnHover),t}},methods:{mousedown:function(t){this.mouseDownPreventDefault&&t.preventDefault(),this.$emit("mousedown")}}},A=(n("+eZG"),Object(c.a)(E,O,[],!1,null,"17de6ed0",null).exports),T=n("IAQg"),P=function(){var t=this,e=t._self._c;return e("PJDialogue",{attrs:{title:"Confirm",persistent:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("v-btn",{attrs:{"min-width":"110",color:"grey darken-2",outlined:""},on:{click:function(e){return t.selectAnswer(!1)}}},[t._v(t._s(t.cancelLabel))]),t._v(" "),e("v-btn",{attrs:{"min-width":"110",color:t.confirmColor?t.confirmColor:"grey darken-2",outlined:""},on:{click:function(e){return t.selectAnswer(!0)}}},[t._v(t._s(t.confirmLabel))])]},proxy:!0}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e("v-sheet",{domProps:{innerHTML:t._s(t.question)}}),t._v(" "),t.hint?e("v-sheet",{staticClass:"text--secondary mt-2"},[t._v("\n        "+t._s(t.hint)+"\n    ")]):t._e()],1)};P._withStripped=!0;var x=n("bbSu"),k=n("u8Zi"),j={data:function(){return{title:"Confirm",icon:"",iconColor:"",open:!1,question:"",callback:null,hint:null,confirmLabel:"Ok",cancelLabel:"Cancel",confirmColor:null}},methods:{show:function(){this.open=!0},hide:function(){this.open=!1},reset:function(){this.question="",this.callback=null,this.confirmLabel="Ok",this.cancelLabel="Cancel",this.confirmColor=null,this.title="Confirm",this.icon="",this.iconColor="",this.hint=null},selectAnswer:function(t){"function"==typeof this.callback?this.callback(t):console.log("Callback invalid"),this.hide()}},mounted:function(){var t=this;x.a.$on(k.a.CONFIRM_VUETIFY,(function(e){t.reset(),t.question=e.question,t.callback=e.callback,e.title&&(t.title=e.title),e.icon&&(t.icon=e.icon),e.iconColor&&(t.iconColor=e.iconColor),e.confirmLabel&&(t.confirmLabel=e.confirmLabel),e.cancelLabel&&(t.cancelLabel=e.cancelLabel),e.confirmColor&&(t.confirmColor=e.confirmColor),e.hint&&(t.hint=e.hint),t.show()}))},beforeMount:function(){x.a.$off(k.a.CONFIRM_VUETIFY)},beforeDestroy:function(){x.a.$off(k.a.CONFIRM_VUETIFY)}},I=n("ZUTo"),R=n.n(I),D=n("gzZi"),L=n("jdmY"),M=Object(c.a)(j,P,[],!1,null,null,null),N=M.exports;R()(M,{VBtn:D.a,VSheet:L.a});var V=function(){var t=this._self._c;return t("transition",{attrs:{name:"transition-fade",appear:""}},[t("div",{staticClass:"pj-loading-overlay"},[t("div",{staticClass:"inner"},[t("LoadingSpinner",{attrs:{large:this.large}}),this._v(" "),this.text?t("div",{staticClass:"ml-2",class:{large:this.large}},[this._v(this._s(this.text))]):this._e()],1)])])};V._withStripped=!0;var U={props:{text:{type:String,required:!1},large:{type:Boolean,required:!1}}},q=(n("6XYD"),Object(c.a)(U,V,[],!1,null,"e3bfa938",null).exports),F=function(){var t=this._self._c;return t("div",{staticClass:"vuetify-iso"},[t("v-app",[this._t("default")],2)],1)};F._withStripped=!0;var B=n("dJbz"),H=Object(c.a)({},F,[],!1,null,null,null),$=H.exports;R()(H,{VApp:B.a});var G=function(){var t=this,e=t._self._c;return e("v-dialog",{staticClass:"pj-modal",attrs:{persistent:t.persistent,scrollable:"","max-width":t.maxWidth,"overlay-opacity":t.overlayOpacity},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e("v-card",[t.title?e("v-card-title",[e("div",[t.icon?e("v-icon",{staticClass:"mr-2",attrs:{color:"grey darken-3"}},[t._v(t._s(t.icon))]):t._e(),t._v("\n                "+t._s(t.title)+"\n            ")],1)]):t._e(),t._v(" "),t.title?e("v-divider"):t._e(),t._v(" "),e("v-card-text",{class:{"pt-5":!t.title},staticStyle:{"max-height":"80vh",position:"relative"}},[t._t("body"),t._v(" "),e("v-overlay",{attrs:{value:t.showLoadingOverlay,absolute:"",color:"white",opacity:"0.6"}},[e("v-progress-circular",{attrs:{indeterminate:"",size:"64",color:"grey darken-1"}})],1)],2),t._v(" "),e("v-divider"),t._v(" "),e("v-sheet",{attrs:{color:"grey lighten-4 py-1 px-1"}},[e("v-card-actions",{staticClass:"d-flex justify-content-between",attrs:{color:"primary"}},[e("div",[t.hideCloseButton||t.saving?t._e():e("v-btn",{staticClass:"btn-min-width",attrs:{color:t.theme,elevation:"0"},on:{click:t.close}},[t._v(t._s(t.closeButtonText))]),t._v(" "),t._t("buttons-left")],2),t._v(" "),e("div",[t._t("buttons")],2)])],1)],1)],1)};G._withStripped=!0;var W={props:o()({value:{type:Boolean,required:!0},title:{type:String,required:!1,default:""},icon:{type:String,required:!1,default:""},loading:{type:Boolean,required:!1,default:!1},saving:{type:Boolean,required:!1,default:!1},loadingText:{type:String,required:!1,default:"Loading..."},closeButtonText:{type:String,required:!1,default:"Close"},hideCloseButton:{type:Boolean,required:!1,default:!1},large:{type:Boolean,required:!1,default:!1},persistent:{type:Boolean,required:!1,default:!1},maxWidth:{type:String,required:!1,default:"800px"},overlayOpacity:{type:Number,required:!1,default:.46},closeCallback:{type:Function,required:!1,default:null}},"maxWidth",{type:String,required:!1,default:"800px"}),computed:{open:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},showLoadingOverlay:function(){return!(!this.loading&&!this.saving)}},methods:{close:function(){this.closeCallback?this.closeCallback():this.$emit("input",!1)}}},J=n("sK+t"),Y=n("mdmw"),Q=n("FpqX"),K=n("zn5u"),z=n("Ey0z"),Z=n("p5fY"),X=n("SQoD"),tt=Object(c.a)(W,G,[],!1,null,null,null),et=tt.exports;R()(tt,{VBtn:D.a,VCard:J.a,VCardActions:Y.a,VCardText:Y.c,VCardTitle:Y.d,VDialog:Q.a,VDivider:K.a,VIcon:z.a,VOverlay:Z.a,VProgressCircular:X.a,VSheet:L.a});var nt=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:"","max-width":"470px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e("v-card",[e("v-card-text",{staticClass:"pt-4"},[t.title?e("div",{staticClass:"mb-3"},[e("h3",[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.$slots.default?t._t("default"):e("div",[t._v(t._s(t.text))])],2),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"purple darken-2",text:""},on:{click:t.cancel}},[t._v("Cancel")]),t._v(" "),e("v-btn",{attrs:{color:"purple darken-2",text:""},on:{click:t.discard}},[t._v("Discard Changes")]),t._v(" "),e("v-btn",{attrs:{color:"purple darken-2",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)};nt._withStripped=!0;var it={props:{value:{type:Boolean,required:!0},title:{type:String,required:!1},text:{type:String,required:!1,default:"Save changes?"}},computed:{open:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{cancel:function(){this.open=!1},save:function(){this.open=!1,this.$emit("save")},discard:function(){this.open=!1,this.$emit("discard")}}},rt=n("L6Q5"),at=Object(c.a)(it,nt,[],!1,null,null,null),st=at.exports;R()(at,{VBtn:D.a,VCard:J.a,VCardActions:Y.a,VCardText:Y.c,VDialog:Q.a,VSpacer:rt.a});var ot=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:t.persistent,"max-width":"420px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e("v-card",[t.title?e("v-card-title",[t._v(t._s(t.title))]):t._e(),t._v(" "),e("v-card-text",[t._t("default")],2),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),t._t("buttons")],2)],1)],1)};ot._withStripped=!0;var lt={props:{value:{type:Boolean,required:!0},title:{type:String,required:!1},persistent:{type:Boolean,default:!1}},computed:{open:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},ct=Object(c.a)(lt,ot,[],!1,null,null,null),ut=ct.exports;R()(ct,{VCard:J.a,VCardActions:Y.a,VCardText:Y.c,VCardTitle:Y.d,VDialog:Q.a,VSpacer:rt.a});e.a={register:function(){i.default.component("LoadingSpinner",r.a),i.default.component("LoadingOverlay",q),i.default.component("PaginationControls",u),i.default.component("PJButton",p),i.default.component("PJRadioButton",v),i.default.component("PJAlert",y),i.default.component("PJModal",_.a),i.default.component("PJConfirmModal",T.a),i.default.component("PJConfirmModalVuetify",N),i.default.component("PJTooltip",C),i.default.component("PJPopover",A),i.default.component("PJVuetify",$),i.default.component("PJModalVuetify",et),i.default.component("PJSaveChangesModal",st),i.default.component("PJDialogue",ut)}}},"6OTJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("lwsE"),r=n.n(i),a=n("W8MJ"),s=n.n(a),o=n("7W2i"),l=n.n(o),c=n("a1gu"),u=n.n(c),d=n("Nsbk"),h=n.n(d),p=n("1IrZ"),f=n("jsnD");function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var v=function(t){l()(n,t);var e=m(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).endpoints=n.endpoints,i.email=t.email,i.firstName=t.firstName,i.middleName=t.middleName,i.lastName=t.lastName,i.displayName=t.displayName,i.roles=t.roles||[],i}return s()(n,[{key:"hasRole",value:function(t){return this.roles.includes(t)}}],[{key:"endpoints",get:function(){return{me:"users/me/"}}},{key:"getOwnProfileData",value:function(){return new Promise((function(t,e){n.get({url:n.endpoints.me}).then((function(e){f.a.commit("user/setUser",e),f.a.commit("user/setUserRolesFromDecodedToken"),t(e)})).catch((function(t){console.log("Error getting user",t),e(t)}))}))}}]),n}(p.a)},"6XYD":function(t,e,n){"use strict";n("0ZMU")},"7Cqk":function(t,e,n){},"7FqK":function(t,e,n){},"7WsP":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("wMS7"),r=n.n(i),a=n("AuB/");function s(t,e){var n=a.a.markupToHtml(a.a.escapeHtml(e.value));t.innerHTML=r.a.sanitize(n)}},"8lBm":function(t,e,n){"use strict";n("UeNe")},"8mAG":function(t,e,n){},"9Gxo":function(t,e,n){},"9d2D":function(t,e,n){"use strict";var i=n("o0o1"),r=n.n(i),a=n("lSNA"),s=n.n(a),o=n("yXPU"),l=n.n(o),c=n("E+oP"),u=n.n(c),d=n("fTik"),h=n("IXB0"),p=n("IoyE"),f=n("bbSu");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.a={mixins:[p.a,h.a],props:{routeQuery:{type:Object,required:!1,default:function(){}}},computed:{computedFilters:function(){return Object.assign(this.filters,this.routeQuery)},showPagination:function(){return this.totalItems>this.listQueryOptions.itemsPerPage},paginationConfig:function(){var t=Math.ceil(this.totalItems/this.listQueryOptions.itemsPerPage),e=t<this.listQueryOptions.paginationButtonsMax?t:this.listQueryOptions.paginationButtonsMax;return{page:this.listQueryOptions.page,length:t,visible:e,perPage:this.listQueryOptions.itemsPerPage}}},data:function(){return{listQueryOptions:{sortBy:[],sortDesc:[],page:1,itemsPerPage:15,paginationButtonsMax:7,totalItems:0,reset:!0},filters:{}}},watch:{deletedItem:function(t){f.a.$emit("RESOURCE_DELETED",t),t.skipNotification||this.showMessage("Deleted")},error:function(t){t&&this.showError(t)},items:function(){this.listQueryOptions.totalItems=this.totalItems}},methods:{handlePageChange:function(t){this.listQueryOptions.page=t,this.onUpdateOptions(this.listQueryOptions)},onUpdateOptions:function(){var t=arguments,e=this;return l()(r.a.mark((function n(){var i,a,s,o,l,c,d;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:e.listQueryOptions,a=i.page,s=i.itemsPerPage,o=i.sortBy,l=i.sortDesc,c=t.length>1&&void 0!==t[1]?t[1]:"getPage",d=v({},e.computedFilters),s&&s>0&&(d=v(v({},d),{},{itemsPerPage:s,page:a})),u()(o)||u()(l)||Object.keys(o).forEach((function(t){d["order[".concat(o[t],"]")]=l[t]?"desc":"asc"})),e.resetList=e.listQueryOptions.reset,n.next=8,e[c](d).then((function(){e.listQueryOptions.sortBy=o,e.listQueryOptions.sortDesc=l,e.listQueryOptions.itemsPerPage=s,e.listQueryOptions.totalItems=e.totalItems,e.listQueryOptions.pagination={page:e.listQueryOptions.page,itemsPerPage:e.listQueryOptions.itemsPerPage,pageCount:5,itemsLength:e.listQueryOptions.totalItems}}));case 8:case"end":return n.stop()}}),n)})))()},setDefaultFilterAndUpdateList:function(t){this.listQueryOptions.itemsPerPage=30,this.filters=Object.assign(this.filters,this.defaultFilters),this.onUpdateOptions(t)},downloadCSV:function(){this.filters=Object.assign(this.filters,this.defaultFilters);var t=v(v({},this.computedFilters),{},{itemsPerPage:500});this.getCSV(t)},onSendFilter:function(){this.resetList=this.listQueryOptions.reset,this.onUpdateOptions(this.listQueryOptions)},resetFilter:function(){this.filters={},this.defaultFilters&&(this.filters=Object.assign(this.filters,this.defaultFilters))},addHandler:function(){this.$router.push({name:"".concat(this.$options.servicePrefix,"Create")})},showHandler:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={id:t.id};if(t.slug||t.tag){var i=t.slug||t.tag;n={id:t.id,slug:i}}var r=e||"".concat(this.$options.servicePrefix,"Show");this.$router.push({name:r,params:n})},editHandler:function(t){this.$router.push({name:"".concat(this.$options.servicePrefix,"Update"),params:{id:t.id}})},deleteHandler:function(t){var e=this;this.deleteItem(t).then((function(){return e.onUpdateOptions(e.listQueryOptions)}))},formatDateTime:d.a}}},"9e0r":function(t,e,n){},"9mcV":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return t.component?e(t.component,{tag:"component",attrs:{type:t.result.type,info:t.result.data,highlightedHits:t.result.hit.highlight,subjectFilters:t.subjects,tagFilters:t.tags,loadMasonry:t.loadMasonry}}):t._e()};i._withStripped=!0;var r={data:function(){return{component:null}},props:{result:Object,subjects:Array,tags:Array,loadMasonry:Boolean,isStaffSearch:Boolean},computed:{loader:function(){var t=this.result.type;"Preprint"===t?t="Publication":t.includes("QuestionAnnotation")&&(t="QuestionAnnotation");var e="";return this.isStaffSearch&&(e="staff/Staff"),function(){return n("lrI9")("./".concat(e,"SearchResult").concat(t))}}},mounted:function(){var t=this;this.loader().then((function(){t.component=function(){return t.loader()}})).catch((function(){console.log("Unknown result type")}))}},a=(n("OG7s"),n("KHd+")),s=Object(a.a)(r,i,[],!1,null,null,null);e.default=s.exports},AOl6:function(t,e,n){},"AuB/":function(t,e,n){"use strict";var i=n("DlQD"),r=n.n(i);e.a={escapeHtml:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,(function(t){return e[t]}))},markupToHtml:function(t){for(var e=[/\[sup\](\d+)\[sup\]/g,/\[sup\](.*?)\[sup\]/g,/\[sub\](.*?)\[sub\]/g,/\[i\](.*?)\[i\]/g,/\[p\](.*?)\[p\]/g,/\[b\](.*?)\[b\]/g,/\∂\∑(.*?)\∂\∑/g,/\[url\](https?:\/\/.+?)\[url\]/g],n=["<sup>$1</sup>","<sup>$1</sup>","<sub>$1</sub>","<i>$1</i>","<p>$1</p>","<b>$1</b>",'<span class="search-highlight">$1</span>','<a href="$1">$1</a>'],i=0;i<e.length;i++)t=t.replace(e[i],n[i]);return t},markdownToHtml:function(t){return r()(t).replace(/^(?:<p>)|(?:<\/p>)$/g,"")},nl2br:function(t){return t.replace(/(\r\n|\n|\r)/gm,"<br>")},nl2HtmlEntity:function(t){return t.replace(/(?:\r\n|\r|\n)/g,"%0A")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},isAllCaps:function(t){return!!t.length&&t.toUpperCase()==t},isNotAllCaps:function(t){return!t.length||t.toUpperCase()!=t}}},"C+Gu":function(t,e,n){"use strict";e.a=Object.freeze({IS_STAFF_SEARCH:!1,ANY_YEAR:"Any year",DEFAULT_PARAMS:{q:"",type:"",journal:"",discipline:"",manuscriptType:"",t:"",tag:"",faqType:"",help:"",research:"",subject:"","published-gte":null,"published-lte":null,"citations-gte":null,"citations-lte":null,"downloads-gte":null,"downloads-lte":null,"votes-gte":null,"votes-lte":null,"answers-gte":null,"answers-lte":null},ES_QUERY_TYPES:["articles","preprints","user","editor","figure","institutions","question","answer"],ALLOWED_TYPES_BY_PARAM:{hub:[null,"","articles","preprints","user","editor","figure","question"],journal:[null,"","articles","preprints","user","editor","figure","question"],discipline:[null,"","articles","preprints","user","figure"],manuscriptType:[null,"","articles","preprints"],t:[null,"","articles","preprints"],tag:[null,"","question"],faqType:[null,"","question"],help:[null,"","question"],research:[null,"","question"],subject:[null,"","articles","preprints","user","editor","figure","question"],"published-gte":[null,"","articles","preprints","question","answer"],"published-lte":[null,"","articles","preprints","question","answer"],"citations-gte":[null,"","articles"],"citations-lte":[null,"","articles"],"downloads-gte":[null,"","articles","preprints"],"downloads-lte":[null,"","articles","preprints"],"votes-gte":["question","answer"],"votes-lte":["question","answer"],"answers-gte":["question"],"answers-lte":["question"]},REVIEW_TYPES:[{slug:"",name:"Any review status",title:"Review states"},{slug:"articles",name:"Peer-reviewed only",title:"Peer-reviewed"},{slug:"preprints",name:"Preprint only",title:"Preprint"}],PUBLICATION_FILTER_TYPES:["articles","preprints","question","answer","",null],CITATION_FILTER_TYPES:["articles","publication","",null],DOWNLOAD_FILTER_TYPES:["articles","publication","preprints","",null],VOTE_FILTER_TYPES:["question","answer"],ANSWER_FILTER_TYPES:["question"],TYPES_SUPPORTING_NUM_FILTERS:["articles","publication","preprints","preprint","question","answer"],NUMBER_PARAM_FILTERS:["citations-gte","citations-lte","downloads-gte","downloads-lte","published-gte","published-lte","votes-gte","votes-lte","answers-gte","answers-lte"],EXTRA_PARAM_FILTERS:["citations-gte","citations-lte","downloads-gte","downloads-lte","published-gte","published-lte","votes-gte","votes-lte","answers-gte","answers-lte","discipline","journal"],SEARCH_NAV_ZERO_RESULT_CLASS:"text-secondary",CONFIG_SEARCH_NAV_ROW:{All:{path:"/search",icon:"icon-search",mdi:"mdi-magnify",title:"All",breakpoint:null,active:!1},Publication:{icon:"icon-file",mdi:"mdi-bacteria-outline",aggSource:"type",title:"Research articles",queryType:"articles",active:!1,breakpoint:null,class:null,count:0},editor:{icon:"icon-user",mdi:"mdi-card-account-details-star-outline",aggSource:"editor",addbucketSource:"advisor",title:"Editors",queryType:"editor",active:!1,breakpoint:null,class:null,displaySize:"md",count:0},User:{icon:"icon-group",mdi:"mdi-account",aggSource:"type",title:"Researchers",queryType:"user",active:!1,breakpoint:null,class:null,displaySize:"lg",count:0},Preprint:{icon:"icon-pencil",mdi:"mdi-file-edit-outline",aggSource:"type",title:"Preprints",queryType:"preprints",active:!1,breakpoint:null,class:null,displaySize:"xl",count:0},Figure:{icon:"icon-picture",mdi:"mdi-camera-burst",aggSource:"type",title:"Figures",queryType:"figure",active:!1,class:null,breakpoint:null,displaySize:"xl",isMoreDropdownSwappable:!0,count:0},InstitutionPage:{icon:"icon-building",mdi:"mdi-office-building",aggSource:"type",title:"Institutions",queryType:"institutions",active:!1,class:null,isMoreDropdownItem:!0,count:0},PublicQuestionAnnotation:{icon:"icon-comment",mdi:"mdi-comment-question",aggSource:"type",title:"Questions",queryType:"question",active:!1,class:null,isMoreDropdownItem:!0,count:0},AnswerAnnotation:{icon:"icon-comments",mdi:"mdi-forum",aggSource:"type",title:"Answers",queryType:"answer",active:!1,class:null,isMoreDropdownItem:!0,count:0}},MASONRY_RESULT_TYPES:["figure"],DATE_KEYS:{"":"Any time",day:"Past Day",week:"Past Week",month:"Past 30 Days","60d":"Past 60 Days","90d":"Past 90 Days",year:"This Year"},POSSIBLE_AGG_SECTIONS:{help:{aggs:{},date:!1,title:"Help Center Questions",limit:4,alwaysCreateModal:!1,showMoreTitle:"Show all help questions",showOnType:["question"],excludeIfSelfFiltered:!1},research:{aggs:{},date:!1,title:"Research Questions",limit:4,alwaysCreateModal:!1,showMoreTitle:"Show all research questions",showOnType:["question"],excludeIfSelfFiltered:!1},journal:{aggs:{},date:!1,title:"Journal",limit:12,alwaysCreateModal:!1,showMoreTitle:"See all journals",showOnType:["articles","publication","preprints","figure","user","editor","question"],excludeIfSelfFiltered:!0},manuscriptType:{aggs:{},date:!1,title:"Research article type",limit:10,alwaysCreateModal:!1,showMoreTitle:"See all article types",showOnType:["articles","publication"],excludeIfSelfFiltered:!0},t:{aggs:{},date:!0,title:"Recency",limit:10,alwaysCreateModal:!1,showMoreTitle:"Show all",showOnType:["articles","publication","preprints","question","answer"],excludeIfSelfFiltered:!0},subject:{aggs:{},date:!1,title:"Top subject areas",limit:15,alwaysCreateModal:!0,showMoreTitle:"Show all subjects",showOnType:["articles","publication","preprints","figure","user","editor","question"],excludeIfSelfFiltered:!1},tag:{aggs:{},date:!1,title:"Tags",limit:15,alwaysCreateModal:!0,showMoreTitle:"Show all tags",showOnType:["question"],excludeIfSelfFiltered:!1}}})},CmJ3:function(t,e,n){},EWeI:function(t,e,n){"use strict";n("RvOg")},Euig:function(t,e,n){},FeVv:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var i={disableCustomizer:!0,rtl:!1,verticalSidebarMini:!1,verticalSidebarDrawer:!0,verticalCompactSidebarDrawer:!0,showBreadcrumb:!0,layout:"VerticalSidebar",isLoading:!1,isDark:!1,verticalSidebarDrawerColor:"dark",appBarColor:"white"},r={breakpoint:{scrollBarWidth:16},rtl:!1,icons:{iconfont:"mdi"},theme:{dark:(!1).matches,default:"light",disable:!1,options:{cspNonce:void 0,customProperties:!0,minifyTheme:void 0,themeCache:void 0},themes:{light:{primary:"#536dfe",primaryConst:"#536dfe",secondary:"#FF5C93",secondaryConst:"#FF5C93",tertiary:"#FF4081",error:"#FD5353",accent:"#8c9eff",warning:"#FFC260",success:"#3CD4A0",successConst:"#3CD4A0",info:"#9013FE",greyBold:"#4a4a4a",greyBoldConst:"#4a4a4a",greyMedium:"#6e6e6e",greyTint:"#b9b9b9",default:"#e0e0e0",dark:"#242939",white:"#FFFFFF"},dark:{primary:"#8c9eff",primaryConst:"#8c9eff",secondary:"#FF5C93",secondaryConst:"#FF5C93",tertiary:"#FF4081",success:"#3CD4A0",successConst:"#3CD4A0",accent:"#8c9eff",warning:"#FFC260",error:"#FD5353",greyMedium:"#bfbfbf",greyBold:"#d6d6d6",greyBoldConst:"#4a4a4a",greyTint:"#9b9b9b",default:"#e0e0e0",white:"#FFFFFF",dark:"#242939",info:"#9013FE"}}}}},Gkvw:function(t,e,n){},HZW1:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal-bg-fade"},on:{"before-enter":function(e){t.modalVisible=!0}}},[t.backgroundVisible?e("div",{staticClass:"pj-modal-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.hideModal()}}},[e("transition",{attrs:{name:"modal-dialogue-slide"},on:{"before-leave":function(e){t.backgroundVisible=!1}}},[t.modalVisible?e("div",{staticClass:"modal-dialog",class:{"modal-lg":t.large},style:t.cssStyle},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t.icon?e("i",{class:"mr-1 icon "+t.icon}):t._e(),t._v(" "+t._s(t.title))])]),t._v(" "),e("div",{staticClass:"modal-body"},[t._t("body"),t._v(" "),e("transition",{attrs:{name:"transition-fade"}},[t.loading?e("div",{staticClass:"d-flex loading-container"},[e("LoadingSpinner"),t._v(" "),e("div",{staticClass:"ml-2"},[t._v(t._s(t.loadingText))])],1):t._e()])],2),t._v(" "),e("div",{staticClass:"modal-footer legacy-b2-wrap"},[e("div",{staticClass:"w-50 d-flex justify-content-between pull-right"},[e("div",[t.hideCloseButton||t.loading?t._e():e("PJButton",{attrs:{type:"light"},on:{click:function(e){return t.hideModal()}}},[t._v(t._s(t.closeButtonText))]),t._v(" "),t._t("buttons-left")],2),t._v(" "),e("div",{staticClass:"ml-4"},[t._t("buttons")],2)])])])]):t._e()])],1):t._e()])};i._withStripped=!0;var r={props:{title:String,closeCallback:Function,hideCloseButton:Boolean,loading:Boolean,loadingText:{type:String,required:!1,default:"Loading..."},closeButtonText:{type:String,required:!1,default:"Close"},large:{type:Boolean,required:!1,default:!1},icon:{type:String,required:!1,default:""},maxWidth:{type:Number,required:!1}},data:function(){return{backgroundVisible:!1,modalVisible:!1}},computed:{cssStyle:function(){return this.maxWidth?"max-width:"+this.maxWidth+"px":""}},methods:{showModal:function(){this.backgroundVisible=!0,this.modalVisible=!1,document.body.parentElement.classList.add("body-modal-open")},hideModal:function(){this.closeCallback&&this.closeCallback(),this.modalVisible=!1,document.body.parentElement.classList.remove("body-modal-open")},modalKeyDown:function(t){"Escape"==t.key&&this.hideModal()}},watch:{modalVisible:function(){this.modalVisible?document.addEventListener("keydown",this.modalKeyDown,!0):document.removeEventListener("keydown",this.modalKeyDown,!0)}}},a=(n("tc4C"),n("KHd+")),s=Object(a.a)(r,i,[],!1,null,"0e04e322",null);e.a=s.exports},IAQg:function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("PJModal",{ref:"confirmModal",attrs:{title:"Confirm",hideCloseButton:!0},scopedSlots:t._u([{key:"body",fn:function(){return[t.hint?e("div",[e("h4",[t._v(t._s(t.question))]),t._v(" "),e("div",{staticClass:"mt-2 text-muted"},[t._v(t._s(t.hint))])]):e("div",[t._v(t._s(t.question))])]},proxy:!0},{key:"buttons",fn:function(){return[e("button",{staticClass:"btn btn-secondary text-white",on:{click:function(e){return t.selectAnswer(!1)}}},[t._v("Cancel")]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.selectAnswer(!0)}}},[t._v(t._s(t.confirmLabel))])]},proxy:!0}])})};i._withStripped=!0;var r=n("bbSu"),a=n("u8Zi"),s={data:function(){return{question:"",callback:null,hint:null,confirmLabel:"Ok"}},methods:{show:function(){this.$refs.confirmModal.showModal()},hide:function(){this.$refs.confirmModal.hideModal()},reset:function(){this.question="",this.callback=null,this.confirmLabel="Ok",this.hint=null},selectAnswer:function(t){"function"==typeof this.callback?this.callback(t):console.log("Callback invalid"),this.hide()}},beforeMount:function(){r.a.$off(a.a.CONFIRM)},mounted:function(){var t=this;r.a.$on(a.a.CONFIRM,(function(e){t.reset(),e.data.question?(t.question=e.data.question,t.hint=e.data.hint?e.data.hint:null,t.confirmLabel=e.data.confirmLabel?e.data.confirmLabel:null):t.question=e.data,t.callback=e.callback,t.show()}))},beforeDestroy:function(){r.a.$off(a.a.CONFIRM)}},o=n("KHd+"),l=Object(o.a)(s,i,[],!1,null,null,null);e.a=l.exports},IJJa:function(t,e,n){"use strict";n.d(e,"a",(function(){return C})),n.d(e,"c",(function(){return _})),n.d(e,"b",(function(){return S})),n.d(e,"d",(function(){return w}));var i,r=n("lwsE"),a=n.n(r),s=n("W8MJ"),o=n.n(s),l=n("7W2i"),c=n.n(l),u=n("a1gu"),d=n.n(u),h=n("Nsbk"),p=n.n(h),f=n("lSNA"),m=n.n(f),v=(n("/hMX"),n("1IrZ")),g=n("reo2"),b=n("6OTJ");function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d()(this,n)}}var _=Object.freeze({GENERAL:"article-note-general",CRITICAL:"article-note-critical",REVIEW:"article-note-review",CHECK:"article-note-check",PRODUCTION:"article-note-production"}),S=Object.freeze((i={},m()(i,_.PRODUCTION,"Production"),m()(i,_.CRITICAL,"Critical"),m()(i,_.CHECK,"Check"),m()(i,_.GENERAL,"General"),m()(i,_.REVIEW,"Review"),i)),w={default:[_.CRITICAL,_.CHECK,_.PRODUCTION,_.REVIEW,_.GENERAL],production:[_.PRODUCTION,_.CRITICAL,_.CHECK,_.REVIEW,_.GENERAL]},C=function(t){c()(n,t);var e=y(n);function n(t){var i;return a()(this,n),(i=e.call(this,t)).endpoints=n.endpoints,i.creator=t.creator?new b.a(t.creator):null,i.text=t.text,i.type=t.type,i.links=t._links?{article:t._links.article||null}:[],i}return o()(n,[{key:"validate",value:function(){var t=!0,e={};return this.text.length<1&&(t=!1,e.content="Please add some content to the note"),{status:t,errors:e}}},{key:"getArticle",value:function(){var t=this;return new Promise((function(e,n){RevisionModel.get({url:t.links.article}).then((function(t){e(t)})).catch((function(t){n(t)}))}))}}],[{key:"endpoints",get:function(){return{create:g.a.endpoints.get+"article-notes/",list:"articles/{id}/article-notes/"}}}]),n}(v.a);e.e=C},IJjz:function(t,e,n){"use strict";n("Euig")},IXB0:function(t,e,n){"use strict";var i=n("lSNA"),r=n.n(i),a=n("WTW0");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}e.a={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.c)("me",["account","roles","isAdmin","isStaff","isSectionEditor","isEditor","isUser","isChecker","appGroups"]))}},IoyE:function(t,e,n){"use strict";var i=n("lSNA"),r=n.n(i),a=n("WTW0");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}e.a={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.c)("notifications",["color","show","subText","text","timeout","isError","showIcon","errorIcon","successIcon"])),methods:{cleanState:function(){var t=this;setTimeout((function(){t.show=!1}),this.timeout)},showError:function(t){this.showMessage(t,"error",!0)},showMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isError=n,this.showIcon=!0,this.show=!0,this.color=e,"string"!=typeof t?(this.text=t.message,t.response&&(this.subText=t.response.data.message)):this.text=t}}}},Jctx:function(t,e,n){"use strict";n("OfZY")},Kena:function(t,e,n){"use strict";(function(t){var i=n("lSNA"),r=n.n(i),a=n("GoyQ"),s=n.n(a),o=n("YB1K"),l=n("5rbR"),c=n("Zchh");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h="application/ld+json",p=function(t,e){return e.map((function(e){return"".concat(t,"[]=").concat(e)})).join("&")};e.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===n.headers&&(n.headers={}),n.headers.hasOwnProperty("Accept")||(n.headers=d(d({},n.headers),{},{Accept:h})),void 0===n.body||n.body instanceof FormData||n.headers.hasOwnProperty("Content-Type")||(n.headers=d(d({},n.headers),{},{"Content-Type":h})),n.params){var i=Object(c.a)(n.params),r=Object.keys(i).map((function(t){return Array.isArray(i[t])?p(t,i[t]):"".concat(t,"=").concat(i[t])})).join("&");e="".concat(e,"?").concat(r)}var a=o.a+(o.a.endsWith("/")?"":"/"),u=n.body&&JSON.parse(n.body);return s()(u)&&u["@id"]&&(void 0!==n.hasEmbeddedUpdates&&n.hasEmbeddedUpdates?(delete n.hasEmbeddedUpdates,n.body=JSON.stringify(Object(c.b)(u))):n.body=JSON.stringify(Object(c.a)(u))),t.fetch(new URL(e,a),n).then((function(t){return t.ok?t:t.json().then((function(t){var e=t["hydra:description"]||t["hydra:title"]||"An error occurred.";if(!t.violations)throw Error(e);var n={_error:e};throw t.violations.forEach((function(t){return n[t.propertyPath]?n[t.propertyPath]+="\n"+n[t.propertyPath]:n[t.propertyPath]=t.message})),new l.a(n)}),(function(){throw new Error(t.statusText||"An error occurred.")}))}))}}).call(this,n("yLpj"))},LKqP:function(t,e,n){"use strict";n("moDH")},LRuh:function(t,e,n){},LiM6:function(t,e,n){"use strict";n("LRuh")},MO6L:function(t,e,n){"use strict";n("jhst")},"O0D+":function(t,e,n){"use strict";e.a=Object.freeze({SEARCH_QUERY_PARAM_CHANGE:"paramChangeEvent",SHOW_MODAL:"showModal"})},OG7s:function(t,e,n){"use strict";n("7Cqk")},OP9Q:function(t,e,n){},OfZY:function(t,e,n){},P4bK:function(t,e,n){},PSin:function(t,e,n){"use strict";n.r(e);var i=function(){return(0,this._self._c)("base-item-group",{attrs:{"no-action":"","sub-group":"",item:this.item}})};i._withStripped=!0;var r={name:"ItemSubGroup",props:{item:{type:Object,default:function(){return{avatar:void 0,group:void 0,title:void 0,children:[]}}}}},a=(n("4Gk9"),n("KHd+")),s=Object(a.a)(r,i,[],!1,null,null,null);e.default=s.exports},PaZL:function(t,e,n){},Pl9e:function(t,e,n){},R1d8:function(t,e,n){"use strict";n("PaZL")},RnhZ:function(t,e,n){var i={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn-bd":"loYQ","./bn-bd.js":"loYQ","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-mx":"tbfe","./es-mx.js":"tbfe","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(t){var e=a(t);return n(e)}function a(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=a,t.exports=r,r.id="RnhZ"},RvOg:function(t,e,n){},S07e:function(t,e,n){},SW4x:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("v-list-group",{staticClass:"pl-0",attrs:{"prepend-icon":t.item.icon,"sub-group":t.subGroup,"no-action":"",flat:"","active-class":" ".concat(t.isDark&&"white"!=t.getThemeMode.verticalSidebarDrawerColor?t.getThemeMode.verticalSidebarDrawerColor+" darken-1 white--text":"grey lighten-4")},scopedSlots:t._u([{key:"activator",fn:function(){return[t.text?e("v-list-item-icon",{staticClass:"v-list-item__icon--text",domProps:{textContent:t._s(t.computedText)}}):t._e(),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{staticClass:"text-13",domProps:{textContent:t._s(t.title)}})],1)]},proxy:!0}]),model:{value:t.listModel,callback:function(e){t.listModel=e},expression:"listModel"}},[t._v(" "),t._l(t.children,(function(t,n){return[t.children?e("base-item-sub-group",{key:"sub-group-".concat(n),staticClass:"pl-0",attrs:{item:t}}):e("base-item",{key:"item-".concat(n),attrs:{item:t,text:!1}})]}))],2)};i._withStripped=!0;var r=n("lSNA"),a=n.n(r),s=n("L2JU"),o=n("N1om"),l=n.n(o);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={name:"ItemGroup",mixins:[n("dWAg").a],inheritAttrs:!1,data:function(){return{listModel:0}},props:{item:{type:Object,default:function(){return{avatar:void 0,group:void 0,title:void 0,subHeader:void 0,children:[]}}},subGroup:{type:Boolean,default:!1},text:{type:Boolean,default:!1}},computed:u(u({},Object(s.c)(["getThemeMode"])),{},{children:function(){return this.item.children.map((function(t){return u(u({},t),{},{to:t.to?"".concat(t.to):void 0})}))},title:function(){return this.item&&(this.item.text||this.item.title)?this.item.text?this.item.text:this.item.title:""},computedText:function(){if(!this.item||!this.item.title)return"";var t="";return this.item.title.split(" ").forEach((function(e){t+=e.substring(0,1)})),t},group:function(){return this.genGroup(this.item.children)}}),methods:{genGroup:function(t){var e=this;return t.filter((function(t){return t.to})).map((function(t){var n=t.group||e.item.group,i="".concat(n,"/").concat(l()(t.to));return t.children&&(i="".concat(i,"|").concat(e.genGroup(t.children))),i})).join("|")}}},h=n("KHd+"),p=n("ZUTo"),f=n.n(p),m=n("VrAw"),v=n("XSMC"),g=n("NMP6"),b=Object(h.a)(d,i,[],!1,null,null,null);e.default=b.exports;f()(b,{VListGroup:m.a,VListItemContent:v.a,VListItemIcon:g.a,VListItemTitle:v.c})},THXi:function(t,e,n){"use strict";n("7FqK")},UeNe:function(t,e,n){},Vckv:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[0!==t.index?e("v-divider",{staticClass:"my-8"}):t._e(),t._v(" "),e("div",{staticClass:"text-h6 pl-4"},[t._v(t._s(t.title))]),t._v(" "),e("v-list",{attrs:{dense:""}},t._l(t.displayableAggs,(function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.emitClick(n.key)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"text-capitalize"},[t._v(t._s(t.formatKey(n.key)))])],1),t._v(" "),e("v-list-item-icon",[e("v-chip",{staticClass:"ml-2",attrs:{small:"",color:t.isSubjectFiltered(n.key)?"success darken-1":""}},[t._v(t._s(n.doc_count.toLocaleString()))])],1)],1)})),1),t._v(" "),t.moreAvailable?e("v-btn",{staticClass:"ml-4 mt-4 p-2",attrs:{elevation:"0",block:""},on:{click:t.showAllOverlay}},[t._v(t._s(t.showMoreTitle))]):t._e(),t._v(" "),t.moreAvailable?e("v-dialog",{attrs:{transition:"slide-x-reverse-transition"},model:{value:t.modalOpen,callback:function(e){t.modalOpen=e},expression:"modalOpen"}},[e("v-card",{attrs:{elevation:"0"}},[e("v-toolbar",{attrs:{tile:"",elevation:"0",flat:"",dark:"",color:"primary"}},[e("v-spacer"),t._v(" "),e("v-toolbar-title",[t._v(t._s(t.title))]),t._v(" "),e("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModal}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),e("v-card-text",[e("v-row",t._l(t.aggChunks,(function(n,i){return e("v-col",{key:i,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e("v-list",{attrs:{dense:""}},t._l(n,(function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.emitClick(n.key)}}},[e("v-list-item-content",[e("v-list-item-title",{staticClass:"text-capitalize"},[t._v(t._s(t.formatKey(n.key)))])],1),t._v(" "),e("v-list-item-icon",[e("v-chip",{staticClass:"ml-2",attrs:{small:"",color:t.isSubjectFiltered(n.key)?"success darken-1":""}},[t._v(t._s(n.doc_count.toLocaleString()))])],1)],1)})),1)],1)})),1)],1)],1)],1):t._e()],1)};i._withStripped=!0;var r=n("RIqP"),a=n.n(r),s=n("lSNA"),o=n.n(s),l=n("bbSu"),c=n("L2JU"),u=n("O0D+"),d=n("HZW1");function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={components:{searchAppModal:d.a},props:{aggs:Array|Object,date:Boolean,title:String,param:String,limit:Number,alwaysCreateModal:Boolean,showMoreTitle:String,subjectFilters:Array,tagFilters:Array,index:Number},data:function(){return{allowedJournalTypes:["articles","preprints","editor","reference"],modalOpen:!1}},beforeMount:function(){l.a.$off(u.a.SHOW_MODAL)},mounted:function(){l.a.$on(u.a.SHOW_MODAL,this.triggerModalEvent)},beforeDestroy:function(){l.a.$off(u.a.SHOW_MODAL,this.triggerModalEvent)},computed:p(p(p({},Object(c.c)("search",["findJournalNameBySlug"])),Object(c.e)("search",["searchParams"])),{},{moreAvailable:function(){return!!this.alwaysCreateModal||this.aggs.length>this.limit},aggChunks:function(){if(this.moreAvailable){var t=Math.ceil(this.aggs.length/4);return e=this.aggs,n=t,e.reduce((function(t,e){return(t.length&&t[t.length-1].length!==n?t[t.length-1].push(e):t.push([e]))&&t}),[])}var e,n},displayableAggs:function(){return a()(this.aggs).splice(0,this.limit)}}),methods:{getJournals:function(){return this.$store.state["search/journals"]},formatKey:function(t){return"journal"===this.param?this.findJournalNameBySlug(t):this.date?this.searchParams.DATE_KEYS[t]:"tag"===this.param?t:"research"===this.param?("expertrxiv"===t&&(t="ExpertR𝛘iv"),"On "+t):"help"===this.param?"community"===t?"From the "+t:"From "+t:t=t.replace(/-/g," ")},triggerModalEvent:function(t){t===this.param&&this.showAllOverlay()},closeModal:function(){this.modalOpen=!1},showAllOverlay:function(){this.modalOpen=!0},isSubjectFiltered:function(t){return"subject"===this.param?~this.subjectFilters.indexOf(this.createSlug(t)):"tag"===this.param?~this.tagFilters.indexOf(this.createSlug(t)):void 0},createSlug:function(t){return["tag","country","research","help","assigned"].includes(this.param)?t:(t=(t=(t=(t=(t=t.replace(/\'/g,"")).replace(/\W+/g,"-")).replace("Authors & users","user")).replace("Publication","articles")).replace("Preprint","preprints")).toLowerCase()},emitClick:function(t){this.modalOpen&&this.closeModal(),l.a.$emit(u.a.SEARCH_QUERY_PARAM_CHANGE,{param:this.param,val:this.createSlug(t)})}}},m=(n("m/TM"),n("KHd+")),v=n("ZUTo"),g=n.n(v),b=n("gzZi"),y=n("sK+t"),_=n("mdmw"),S=n("zCDB"),w=n("Yq0q"),C=n("FpqX"),O=n("zn5u"),E=n("Ey0z"),A=n("iGBT"),T=n("2hOt"),P=n("XSMC"),x=n("NMP6"),k=n("D9m0"),j=n("L6Q5"),I=n("cdmR"),R=n("Kn9U"),D=Object(m.a)(f,i,[],!1,null,"c03c6e42",null);e.default=D.exports;g()(D,{VBtn:b.a,VCard:y.a,VCardText:_.c,VChip:S.a,VCol:w.a,VDialog:C.a,VDivider:O.a,VIcon:E.a,VList:A.a,VListItem:T.a,VListItemContent:P.a,VListItemIcon:x.a,VListItemTitle:P.c,VRow:k.a,VSpacer:j.a,VToolbar:I.a,VToolbarTitle:R.b})},XLwj:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex px-3"},[t._t("header"),t._v(" "),t.showDownload?e("div",[e("v-spacer"),t._v(" "),e("v-menu",{attrs:{left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({staticClass:"white--text darken-4",attrs:{"x-small":"",color:"dark",elevation:"0",dark:""}},"v-btn",r,!1),i),[e("v-icon",{attrs:{size:"14"},domProps:{textContent:t._s(t.downloadIcon)}})],1)]}}],null,!1,2997362411)},[t._v(" "),e("v-list",t._l(t.chartDownloads,(function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.downloadChart(n)}}},[e("v-list-item-title",[t._v("Download "+t._s(n))])],1)})),1)],1)],1):t._e()],2),t._v(" "),e("apexchart",{ref:"chart",attrs:{height:t.chartHeight,type:t.chartType,options:t.histogram.chartOptions,series:t.histogram.series}})],1)};i._withStripped=!0;var r=n("Kw5r"),a=n("EyHm"),s=n.n(a);r.default.use(s.a),r.default.component("apexchart",s.a);var o={name:"ChartComponent",props:{chartType:{type:String,required:!1,default:function(){return"line"}},series:{type:Array},yAxis:{type:Array|Object},xAxisCategories:{type:Array,required:!1},xAxisType:{type:String,required:!1,default:function(){return"datetime"}},fill:{type:String|Object,required:!1,default:function(){return{type:"solid"}}},chartHeight:{type:String,required:!1,default:function(){return"350"}},chartDownloads:{type:Array,required:!1,default:function(){return["PNG","CSV","SVG"]}},showDownload:{type:Boolean,required:!1},downloadIcon:{type:String,required:!1,default:function(){return"mdi-download"}}},computed:{colors:function(){return[this.$vuetify.theme.themes[this.theme].primary,this.$vuetify.theme.themes[this.theme].secondary,this.$vuetify.theme.themes[this.theme].info,"#ec6925","#eccb25",this.$vuetify.theme.themes[this.theme].error,this.$vuetify.theme.themes[this.theme].success,this.$vuetify.theme.themes[this.theme].greyBold]},histogram:function(){var t=this,e={total:0,series:this.series,chartOptions:{colors:[],plotOptions:{bar:{startingShape:"flat",endingShape:"rounded",columnWidth:"30%",dataLabels:{position:"top"}}},chart:{height:this.chartHeight,type:this.chartType,toolbar:{show:!1},zoom:{enabled:!1,autoScaleYaxis:!0}},stroke:{width:[0,4],curve:"smooth"},dataLabels:{enabled:!1,enabledOnSeries:[1]},grid:{show:!0,borderColor:"#e4e4e4",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},yaxis:this.yAxis,markers:{size:6,radius:2},xaxis:{type:this.xAxisType,categories:this.xAxisCategories},fill:this.fill}},n=0;return e.series.forEach((function(i){e.chartOptions.colors.push(t.colors[n]),n++})),e}},data:function(){return{}},methods:{downloadChart:function(t){var e=this.$refs.chart.chart;switch(t){case"PNG":e.exports.exportToPng();break;case"SVG":e.exports.exportToSVG();break;case"CSV":e.exports.exportToCSV({series:e.config.series,columnDelimiter:","})}},toggleChartPeriod:function(){var t=this.histograms[this.chartDatePeriod],e=[],n=[];this.aggregations[t.aggName].status.buckets.map((function(t){e.push(t.doc_count),n.push(t.key)})),this.histogram.series.data=e,this.histogram.categories=n}}},l=n("KHd+"),c=n("ZUTo"),u=n.n(c),d=n("gzZi"),h=n("Ey0z"),p=n("iGBT"),f=n("2hOt"),m=n("XSMC"),v=n("5Emp"),g=n("L6Q5"),b=Object(l.a)(o,i,[],!1,null,null,null);e.default=b.exports;u()(b,{VBtn:d.a,VIcon:h.a,VList:p.a,VListItem:f.a,VListItemTitle:m.c,VMenu:v.a,VSpacer:g.a})},XUDj:function(t,e,n){},YB1K:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var i=n("kvwn"),r=document.getElementById(i.a.PEERJ_CORE_VUE_ROUTER_OUTLET_ID),a=r.getAttribute("data-api"),s=null;r.getAttribute("data-mercure")&&(s=r.getAttribute("data-mercure"));var o=s},Z1DM:function(t,e,n){"use strict";n("up92")},Z1Zl:function(t,e,n){},ZDqI:function(t,e,n){"use strict";e.a=function(t){var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}},ZRYv:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("lwsE"),r=n.n(i),a=function t(e){r()(this,t);try{this.count=e.count,this.total=e.total,this.maxPerPage=e.maxPerPage,this.links={first:e.links.first,last:e.links.last,next:e.links.next,prev:e.links.previous,self:e.links.self}}catch(t){throw new Error("Could not construct pagination data")}}},ZZ8N:function(t,e,n){"use strict";n("9e0r")},Zchh:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var i=n("mwIZ"),r=n.n(i),a=n("OFL0"),s=n.n(a),o=n("noZS"),l=n.n(o);function c(t){return s()(t,"hydra:member")?(t["hydra:member"]=t["hydra:member"].map((function(t){return c(t)})),t):l()(t,(function(t){return Array.isArray(t)?t.map((function(t){return r()(t,"@id",t)})):r()(t,"@id",t)}))}function u(t){return s()(t,"hydra:member")?(t["hydra:member"]=t["hydra:member"].map((function(t){return c(t)})),t):t}},aPrH:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this._self._c;return t("v-card",{staticClass:"mx-auto",class:{"pa-4":this.padding,cardClass:this.cardClass},attrs:{elevation:"0",color:this.$vuetify.theme.dark&&"white"==this.color?"dark":this.color,dark:this.$vuetify.theme.dark,"max-width":"100%"}},[t("v-skeleton-loader",{attrs:{height:"100%",width:"100%",type:"card",loading:this.getThemeMode.isLoading}},[this._t("default")],2)],1)};i._withStripped=!0;var r=n("lSNA"),a=n.n(r),s=n("L2JU");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var l={name:"Card",props:{color:{type:String,default:"white"},cardClass:{type:String,default:""},padding:{type:Boolean,default:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.c)(["getThemeMode"]))},c=n("KHd+"),u=n("ZUTo"),d=n.n(u),h=n("sK+t"),p=n("MSko"),f=Object(c.a)(l,i,[],!1,null,null,null);e.default=f.exports;d()(f,{VCard:h.a,VSkeletonLoader:p.a})},aScO:function(t,e,n){"use strict";var i=function(){return(0,this._self._c)("span",{staticClass:"spinner-grow",class:{"spinner-grow-sm":!this.large},attrs:{role:"status","aria-hidden":"true"}})};i._withStripped=!0;var r={props:{large:{type:Boolean,default:!1}}},a=n("KHd+"),s=Object(a.a)(r,i,[],!1,null,null,null);e.a=s.exports},aoHw:function(t,e,n){"use strict";n("+MGT")},b7uH:function(t,e,n){"use strict";n("w+dn")},bPE9:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("v-hover",{attrs:{"open-delay":"100"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.hover;return[e("v-btn",{staticClass:"border",class:[t.textColor,t.textHover,t.bgHover,t.borderColor],attrs:{elevation:i?8:0,outlined:"",color:t.color,block:t.block,large:t.large,rounded:t.rounded}},[t._v(t._s(t.text))])]}}])})};i._withStripped=!0;var r={name:"OutlineButton",props:{text:{type:String,default:""},color:{type:String,default:""},block:{type:Boolean,default:!1},large:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},textColor:{type:String,default:"white--text"},textHover:{type:String,default:"hover:white--text"},bgHover:{type:String,default:"primary"},borderColor:{type:String,default:""}}},a=n("KHd+"),s=n("ZUTo"),o=n.n(s),l=n("gzZi"),c=n("zoeD"),u=Object(a.a)(r,i,[],!1,null,null,null);e.default=u.exports;o()(u,{VBtn:l.a,VHover:c.a})},bbSu:function(t,e,n){"use strict";var i=n("Kw5r");e.a=new i.default},cKyj:function(t,e,n){"use strict";n("AOl6")},cqKV:function(t,e,n){"use strict";var i=n("Hc5T");e.a={mixins:[i.validationMixin],watch:{"$v.$invalid":{deep:!0,handler:function(){this.$data._isValidFormData=!this.$v.$invalid,this.emitValidationStatus&&this.$emit("isValidForm",!this.$v.$invalid)}}},data:function(){return{_isValidFormData:!1,emitValidationStatus:!1,showValidationErrors:!1,serverValidationErrors:{}}},methods:{getValidationErrors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;if(!this.showValidationErrors)return[];var n=[];if(t)var i=this.$v[t][e]||null;else i=this.$v[e]||null;var r=this.serverValidationErrors[t]?this.serverValidationErrors[t][e]:null;return i&&i.$error?i.$params.required&&!i.required?n.push("This field is required"):i.$params.email&&!i.email?n.push("Please enter a valid email address"):i.$params.hasOwnProperty("allCaps")&&!i.allCaps&&n.push("Capitalize the first letter of each name only e.g. 'Joycelyn' instead of 'JOYCELYN'"):r&&n.push(r),n},setServerValidationErrors:function(t,e){var n=this;this.serverValidationErrors[t]={},e.forEach((function(e){n.serverValidationErrors[t][e.name]=e.message}))},clearServerValidationErrors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?e&&this.serverValidationErrors.hasOwnProperty(t)?this.serverValidationErrors[t][e]=null:this.serverValidationErrors[t]={}:this.serverValidationErrors={}}}}},cwXf:function(t,e,n){"use strict";n("4GuJ")},dwWe:function(t,e,n){"use strict";e.a={setItem:function(t,e){return localStorage.setItem(t,e)},getItem:function(t){return localStorage.getItem(t)},removeItem:function(t){return localStorage.removeItem(t)},clear:function(){return localStorage.clear()}}},e1Bn:function(t,e,n){"use strict";n("pz7x")},f3Hx:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("RIqP"),r=n.n(i);function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=!1;t.forEach((function(t){if(t.id)var c=[document.getElementById(t.id)];else if(t.cssClass){c=document.getElementsByClassName(t.cssClass);c=r()(c)}if(c[0]){var u=0;c.forEach((function(r){t.id?r.id=t.id:r.id="vue_".concat(Date.now(),"_").concat(t.cssClass,"_").concat(u);var c={};t.props&&(c.props={},t.props.forEach((function(t){t in r.dataset&&(c.props[t]=r.dataset[t])})));var d="bootstrap-4-iso";if(o&&(d="vuetify-iso"),!l){l=!0;var h=document.createElement("div");h.classList.add(d),r.parentNode.insertBefore(h,r),h.appendChild(r)}var p={render:function(e){return e(t.component,c)}};n&&(p.store=n),i&&(p.router=i),a&&(p.vuetify=a),s&&(p.i18n=s);var f=t.delay?t.delay:0;setTimeout((function(){new e(p).$mount("#"+r.id)}),f*u),u++}))}}))}},fTik:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("wd/R"),r=n.n(i),a=function(t){return t?r()(t).format("DD/MM/YYYY"):null}},fYPL:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("base-card",{staticClass:"h-full"},[e("v-card-title",{staticClass:"d-flex justify-space-between"},[t.title?e("div",{staticClass:"mb-0 mr-4"},[e("p",{staticClass:"card-title mb-0"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.showButton?e("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[t.buttonText?e("v-btn",t._g(t._b({attrs:{color:"grey lighten-3",small:"",depressed:""}},"v-btn",r,!1),i),[t._v("\n          "+t._s(t.buttonText)+"\n          "),e("v-icon",[t._v("mdi-chevron-down")])],1):t._e()]}}],null,!1,2091180619)},[t._v(" "),e("v-list",[e("v-list-item",[e("v-list-item-title",[t._v(" View Chart")])],1),t._v(" "),e("v-list-item",[e("v-list-item-title",[t._v(" Edit Chart")])],1),t._v(" "),e("v-list-item",[e("v-list-item-title",[t._v(" Delete Chart")])],1)],1)],1):t._e()],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[t._t("chart")],2)],1)};i._withStripped=!0;var r={props:{title:{type:String,default:""},showButton:{type:Boolean,default:function(){return!0}},buttonText:{type:String,default:"More"}}},a=n("KHd+"),s=n("ZUTo"),o=n.n(s),l=n("gzZi"),c=n("mdmw"),u=n("zn5u"),d=n("Ey0z"),h=n("iGBT"),p=n("2hOt"),f=n("XSMC"),m=n("5Emp"),v=Object(a.a)(r,i,[],!1,null,null,null);e.default=v.exports;o()(v,{VBtn:l.a,VCardText:c.c,VCardTitle:c.d,VDivider:u.a,VIcon:d.a,VList:h.a,VListItem:p.a,VListItemTitle:f.c,VMenu:m.a})},iarp:function(t,e,n){"use strict";n.r(e);var i=n("o0o1"),r=n.n(i),a=n("yXPU"),s=n.n(a),o=n("RIqP"),l=n.n(o),c=n("lSNA"),u=n.n(c),d=n("L2JU"),h=n("WTW0"),p=n("Kw5r"),f=n("3LiA"),m=n.n(f),v=n("nWMH"),g=n.n(v),b=(n("3rzL"),n("wjVM")),y=n("8wkQ"),_=n("FeVv"),S=n("gQMU"),w=n.n(S),C=n("u6S6"),O=n.n(C);function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var A,T=n("0fxA"),P=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}(T.keys());try{for(P.s();!(A=P.n()).done;){var x=A.value,k=T(x),j=x.replace(/index.js/,"").replace(/^\.\//,"").replace(/\.\w+$/,""),I=w()(O()(j));p.default.component("Base".concat(I),k.default||k)}}catch(t){P.e(t)}finally{P.f()}p.default.use(y.a);var R=new y.a({theme:_.b.theme,rtl:_.b.rtl}),D=n("jsnD"),L=n("jE9Z"),M=n("kvwn"),N=function(){var t=this,e=t._self._c;return e("div",[t.articleLoading?e("div",[t._v("Loading...")]):t.articleError?e("div",[t._m(0)]):e("div",[e("div",{staticClass:"row"},[t._m(1),t._v(" "),e("div",{staticClass:"col-md-2"},[t.expandAllButtonVisible?e("router-link",{staticClass:"btn btn-light btn-block btn-small",attrs:{to:{name:"ArticleMessages",query:{page_system:1,limit_system:500,with_content:1}}}},[t._v("\n                    Expand All\n                ")]):t._e()],1)]),t._v(" "),e("ul",{staticClass:"nav nav-tabs mt-4"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",class:{active:t.isSystemMessagesSelected},attrs:{to:{name:"ArticleMessages",query:t.$route.query}}},[e("h6",[t._v("System Messages\n                        "),e("span",{staticClass:"badge badge-primary"},[t.messagesLoading.system?e("span",[e("i",{staticClass:"icon-spin icon-spinner"})]):e("span",[t._v(t._s(t.systemMessagesCount))])])])])],1),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",class:{active:!t.isSystemMessagesSelected},attrs:{to:{name:"ArticleMessagesExternal",query:t.$route.query}}},[e("h6",[t._v("External Messages\n                        "),e("span",{staticClass:"badge badge-primary"},[t.messagesLoading.external?e("span",[e("i",{staticClass:"icon-spin icon-spinner"})]):e("span",[t._v(t._s(t.externalMessagesCount))])])])])],1)]),t._v(" "),e("div",{staticClass:"mt-2"},[e("router-view")],1)])])};N._withStripped=!0;var V=function(){var t=this,e=t._self._c;return e("div",[t.messagesLoading.system?e("div",{staticClass:"mt-4"},[e("span",{staticClass:"text-muted"},[t._v(t._s(t.loadingMessage))])]):t.messagesError.system?e("div",{staticClass:"alert alert-danger"},[t._v("Error loading messages")]):t.messages.system.items.length?e("div",[t._l(t.messages.system.items,(function(t){return e("MessageListing",{key:t.id,staticClass:"mb-4 mt-4",attrs:{message:t}})})),t._v(" "),e("hr"),t._v(" "),e("PaginationControls",{attrs:{paginationData:t.messages.system.pagination,loading:t.messagesLoading.system,queryStringKey:"system"}})],2):e("div",{staticClass:"text-muted"},[t._v("\n        There are no system messages\n    ")])])};V._withStripped=!0;var U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-container"},[e("div",{staticClass:"message-details row",on:{click:function(e){return t.toggleExpanded()}}},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"pr-2 subject"},[t._v("\n                "+t._s(t.message.subject)+"\n            ")])]),t._v(" "),e("div",{staticClass:"col-1"},[e("PJTooltip",{attrs:{text:t.sentTime}},[t._v("\n                "+t._s(t._f("dateFormat")(t.message.sent,"MMM dd, ''yy"))+"\n            ")])],1),t._v(" "),e("div",{staticClass:"col-4 email-address-column"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"email-label"},[t._v("To ")]),t._v(" "),e("div",t._l(t.message.recipients.items,(function(n){return e("div",{key:n.id},[e("span",{staticClass:"email-name"},[t._v(t._s(n.name))]),t._v(" "),e("span",{staticClass:"email-address"},[t._v(t._s(n.email))])])})),0)]),t._v(" "),e("div",[e("span",{staticClass:"email-label"},[t._v("From")]),t._v(" "),t.message.senderName?e("span",{staticClass:"email-sender"},[t._v(t._s(t.message.senderName))]):e("span",{staticClass:"email-sender"},[t._v("PeerJ")])])]),t._v(" "),e("div",{staticClass:"col-1 send-buttons-container"},[e("PJButton",{attrs:{type:"light",small:"",block:"",loading:t.resendLoading},nativeOn:{click:function(e){return e.stopPropagation(),t.confirmResend.apply(null,arguments)}}},[t._v("Resend")]),t._v(" "),e("PJButton",{attrs:{type:"light",small:"",block:"",loading:t.sendToMeLoading},nativeOn:{click:function(e){return e.stopPropagation(),t.confirmSendToMe.apply(null,arguments)}}},[t._v("Mail me")])],1)]),t._v(" "),e("transition",{attrs:{name:"transition-slide-fade"}},[t.expanded?e("div",{staticClass:"mb-0 mt-2 row"},[e("div",{staticClass:"col-5"},[e("div",{staticClass:"btn-group-vertical email-format-selector mt-2 col-4 float-right"},[e("PJButton",{attrs:{type:t.txtOnlySelected?"light":"primary",small:""},nativeOn:{click:function(e){return t.setTxtOnly(!1)}}},[t._v("HTML")]),t._v(" "),e("PJButton",{attrs:{type:t.txtOnlySelected?"primary":"light",small:""},nativeOn:{click:function(e){return t.setTxtOnly(!0)}}},[t._v("TXT")])],1)]),t._v(" "),e("div",{staticClass:"p-0 col-7"},[e("div",{ref:"emailContainer",staticClass:"email-container"},[e("EmailView",{attrs:{message:t.message,txtOnly:t.txtOnlySelected}})],1)])]):t._e()])],1)};U._withStripped=!0;var q=function(){var t=this,e=t._self._c;return e("div",[t.loading[t.format]?e("div",[t._v("Loading "+t._s(t.format.toUpperCase())+" Email...")]):t.error[t.format]?e("div",[e("PJAlert",{attrs:{type:"danger",title:t.error[t.format].title,content:t.error[t.format].message}})],1):e("div",[e("div",{staticClass:"email-preview p-4",domProps:{innerHTML:t._s(t.selectedEmailContent)}})])])};q._withStripped=!0;var F={props:{message:Object,txtOnly:Boolean},data:function(){return{emailContent:{html:"",text:""},loading:{html:!1,text:!1},error:{html:!1,text:!1}}},computed:{format:function(){return this.txtOnly?"text":"html"},selectedEmailContent:function(){var t=this.emailContent[this.format];return this.txtOnly&&(t=t.replace(/\n/g,"<br />")),t}},methods:{getEmailContent:function(){var t=this;return s()(r.a.mark((function e(){var n,i,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="Unexpected error when retrieving message body",i="Error",t.loading[t.format]=!0,t.error[t.format]=!1,e.prev=4,e.next=7,t.message.getEmailContent(t.format);case 7:t.emailContent[t.format]=e.sent,e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),t.error[t.format]=!0,e.t0.response&&(n="Network error when retrieving message body, if this continues to happen please contact support@peerj.com with this status text: "+e.t0.response.statusText,e.t0.response.status&&(i+=" "+e.t0.response.status,n+=" "+e.t0.response.status,a="You don't have permission to access this message, if refreshing the page fails please contact support@peerj.com with this status text: "+e.t0.response.statusText,s={401:a,403:a,404:"The "+t.format.toUpperCase()+" message body was not found"},e.t0.response.status in s&&(n=s[e.t0.response.status]))),t.error[t.format]={title:i,message:n};case 15:return e.prev=15,t.loading[t.format]=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,10,15,18]])})))()}},watch:{txtOnly:function(){this.emailContent[this.format]||this.getEmailContent()}},created:function(){this.message.htmlContent?(this.emailContent.html=this.message.htmlContent,this.emailContent.text=this.message.textContent):this.getEmailContent()}},B=(n("LKqP"),n("KHd+")),H=Object(B.a)(F,q,[],!1,null,"3d6f3334",null).exports,$=n("bbSu"),G={components:{EmailView:H},props:{message:Object},data:function(){return{txtOnlySelected:!1,resendLoading:!1,sendToMeLoading:!1,expanded:!1,reSendCount:0,sentToMeCount:0}},computed:{sentTime:function(){return this.$options.filters.dateFormat(this.message.sent,"HH:mm'UTC'X")}},methods:{setTxtOnly:function(t){this.txtOnlySelected=t,this.$refs.emailContainer.scrollTop=0},confirmResend:function(){var t=this;if(!this.resendLoading){var e=this.reSendCount?"You have already re-sent this email, do you really want to resend again?":"Are you sure you want to resend this email?";this.showConfirmModal(e,(function(e){e&&t.resendEmail()}))}},confirmSendToMe:function(){var t=this;if(!this.sendToMeLoading){var e=this.sentToMeCount?"You have already sent this email to yourself. Send again?":"Are you sure you want to send this email to yourself?";this.showConfirmModal(e,(function(e){e&&t.sendToMe()}))}},resendEmail:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resendLoading=!0,e.prev=1,e.next=4,t.message.resendEmail();case 4:t.reSendCount++,t.showSendSuccess("The email was resent"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),t.showSendError();case 12:return e.prev=12,t.resendLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},sendToMe:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sendToMeLoading=!0,e.prev=1,e.next=4,t.message.sendEmailToMe();case 4:t.sentToMeCount++,t.showSendSuccess("The email was sent to you"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),t.showSendError();case 12:return e.prev=12,t.sendToMeLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},toggleExpanded:function(){this.expanded=!this.expanded},showSendSuccess:function(t){this.$store.dispatch("notificationAlerts/addNotification",{title:"Sent",message:t,type:"success"})},showSendError:function(){this.$store.dispatch("notificationAlerts/addNotification",{title:"Error",message:"The email could not be sent",type:"error"})}},created:function(){this.$route.query.with_content&&(this.expanded=!0)}},W=(n("lFuB"),Object(B.a)(G,U,[],!1,null,"766e357e",null).exports),J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-container"},[e("div",{staticClass:"message-details",on:{click:function(e){return t.toggleExpanded()}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"pr-2 subject"},[e("strong",[t._v(t._s(t.message.subject))]),t._v(" "),e("div",{staticClass:"badge ml-1",class:{"badge-success":"accepted"==t.message.status,"badge-secondary":"accepted"!=t.message.status}},[t._v(t._s(t.message.status))])])]),t._v(" "),e("div",{staticClass:"col-1"},[t._v("\n                "+t._s(t._f("dateFormat")(t.message.messageDate,"MMM dd, ''yy"))+"\n            ")]),t._v(" "),e("div",{staticClass:"col-1"},[t._v("\n                "+t._s(t.message.source.toUpperCase())+"\n                "),t.message.threadId?e("small",[e("br"),t._v("("+t._s(t.message.threadId)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"col-4 email-address-column"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"email-label"},[t._v("To ")]),t._v(" "),e("span",{staticClass:"email-recipient"},[t._v(t._s(t.recipients))])]),t._v(" "),e("div",[e("span",{staticClass:"email-label"},[t._v("From")]),t._v(" "),e("span",{staticClass:"email-sender"},[t._v(t._s(t.message.sender))])])])])]),t._v(" "),t.expanded?e("table",{staticClass:"table table-sm mb-0 mt-2"},[e("tr",[e("td",{staticClass:"p-0"},[e("div",{ref:"emailContainer",staticClass:"email-container"},[e("EmailView",{attrs:{message:t.message,txtOnly:!1}})],1)])])]):t._e()])};J._withStripped=!0;var Y={components:{EmailView:H},props:{message:Object},data:function(){return{expanded:!1}},computed:{recipients:function(){return this.message.recipients.replace(/,/g,", ")}},methods:{toggleExpanded:function(){this.expanded=!this.expanded}}};n("cwXf");function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z={props:{},components:{MessageListing:W,ExternalMessageListing:Object(B.a)(Y,J,[],!1,null,"61bbebf0",null).exports},computed:K({},Object(d.e)("articleMessages",["messages","messagesLoading","messagesError","expandAllLoading"])),methods:K({},Object(d.d)("articleMessages",["setMessagesLoading","setMessagesError","setMessages","setExpandAllLoading","reset"]))},Z={mixins:[z],computed:{loadingMessage:function(){var t="Loading...";return this.$route.query.with_content&&(t="Loading with content..."),t}}},X=Object(B.a)(Z,V,[],!1,null,null,null).exports,tt=function(){var t=this,e=t._self._c;return e("div",[t.messagesLoading.external?e("div",{staticClass:"text-muted"},[t._v("Loading...")]):t.messagesError.external?e("div",{staticClass:"alert alert-danger"},[t._v("Error loading external messages")]):t.messages.external.items.length?e("div",[t._l(t.messages.external.items,(function(t){return e("ExternalMessageListing",{key:t.id,staticClass:"mb-4 mt-4",attrs:{message:t}})})),t._v(" "),e("hr"),t._v(" "),e("PaginationControls",{attrs:{paginationData:t.messages.external.pagination,loading:t.messagesLoading.external,queryStringKey:"external"}})],2):e("div",{staticClass:"text-muted"},[t._v("\n        There are no external messages\n    ")])])};tt._withStripped=!0;var et={mixins:[z]},nt=Object(B.a)(et,tt,[],!1,null,null,null).exports,it=n("reo2"),rt={mixins:[z],data:function(){return{article:{},articleLoading:!1,articleError:!1,expandAllFinished:!1}},computed:{pageSystem:function(){return this.$route.query.page_system?this.$route.query.page_system:1},pageExternal:function(){return this.$route.query.page_external?this.$route.query.page_external:1},limitSystem:function(){return this.$route.query.limit_system?this.$route.query.limit_system:null},limitExternal:function(){return this.$route.query.limit_external?this.$route.query.limit_external:null},withContent:function(){return!!this.$route.query.with_content},systemMessagesCount:function(){return this.messagesError.system?"?":this.messages.system.pagination.total},externalMessagesCount:function(){return this.messagesError.system?"?":this.messages.external.pagination.total},isSystemMessagesSelected:function(){return"ArticleMessages"==this.$route.name},messagesSubPageComponent:function(){return this.isSystemMessagesSelected?X:nt},expandAllButtonVisible:function(){return!(!this.isSystemMessagesSelected||this.$route.query.with_content)&&!this.messagesLoading.system}},methods:{getArticleAndMessages:function(){var t=this;return s()(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.articleLoading=!0,e.prev=1,n=t.$route.params.articleId,e.next=5,it.a.get({urlParams:{id:n}});case 5:t.article=e.sent,t.getMessages("system"),t.getMessages("external"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("error getting article and messages",e.t0),t.articleError=e.t0;case 14:return e.prev=14,t.articleLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})))()},getMessages:function(t){var e=this;return s()(r.a.mark((function n(){var i,a,s,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=!!e.$route.query.with_content,e.setMessagesLoading({type:t,status:!0}),e.setMessagesError({type:t,status:!1}),a={system:e.pageSystem,external:e.pageExternal},s={system:e.limitSystem,external:e.limitExternal},n.next=8,e.article.getMessages(t,a[t],s[t],i);case 8:o=n.sent,e.setMessages({type:t,messages:o}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),e.setMessagesError({type:t,status:!0}),e.setMessagesLoading({type:t,status:!1});case 16:return n.prev=16,e.setMessagesLoading({type:t,status:!1}),i&&(e.expandAllFinished=!0,e.setExpandAllLoading(!1)),n.finish(16);case 20:case"end":return n.stop()}}),n,null,[[0,12,16,20]])})))()}},watch:{pageSystem:function(){this.getMessages("system"),this.scrollContainerTop(),this.expandAllFinished=!1},pageExternal:function(){this.getMessages("external"),this.scrollContainerTop()},limitSystem:function(){this.getMessages("system"),this.scrollContainerTop(),this.expandAllFinished=!1},limitExternal:function(){this.getMessages("external"),this.scrollContainerTop()}},created:function(){this.reset(),this.getArticleAndMessages()}},at=(n("2oEp"),Object(B.a)(rt,N,[function(){var t=this._self._c;return t("div",[t("strong",[this._v("Error loading article")])])},function(){var t=this._self._c;return t("div",{staticClass:"col-md-10"},[t("h1",[this._v("Messages")])])}],!1,null,"7627d812",null).exports),st={path:"",name:"annotationHome",component:{render:function(t){return t("router-view")}},children:[{path:"/ask",name:"AskHome",component:function(){return Promise.all([n.e(1),n.e(3),n.e(6),n.e(50)]).then(n.bind(null,"Tlfj"))}},{path:"/ask/faq",name:"AskFaq",component:function(){return Promise.all([n.e(1),n.e(3),n.e(6),n.e(49)]).then(n.bind(null,"bOAy"))}},{path:"/ask/faq-edit/:id",name:"AskFaqEdit",component:function(){return Promise.all([n.e(1),n.e(3),n.e(6),n.e(49)]).then(n.bind(null,"bOAy"))}},{path:"/ask/staff",name:"AskStaff",component:function(){return Promise.all([n.e(1),n.e(3),n.e(6),n.e(51)]).then(n.bind(null,"j9IS"))}},{path:"/ask/staff-edit/:id",name:"AskStaffEdit",component:function(){return Promise.all([n.e(1),n.e(3),n.e(6),n.e(51)]).then(n.bind(null,"j9IS"))}},{path:"/question-edit/:id",name:"AskEdit",component:function(){return Promise.all([n.e(1),n.e(3),n.e(6),n.e(50)]).then(n.bind(null,"Tlfj"))}},{path:"/questions/:id",name:"PublicQuestionItem",component:function(){return Promise.all([n.e(3),n.e(15),n.e(147)]).then(n.bind(null,"SUVx"))}},{path:"/questions/faq/:id",alias:"/faq/:id",name:"FaqQuestionItem",component:function(){return Promise.all([n.e(3),n.e(15),n.e(146)]).then(n.bind(null,"t+q7"))}},{path:"/questions/staff/:id",alias:"/staff/questions/:id",name:"StaffQuestionItem",component:function(){return Promise.all([n.e(3),n.e(15),n.e(148)]).then(n.bind(null,"Xves"))}}]},ot={path:"/categories",name:"categories",component:function(){return n.e(155).then(n.bind(null,"1wc5"))},redirect:{name:"CategoryList"},children:[{name:"CategoryList",path:"",component:function(){return Promise.all([n.e(1),n.e(11),n.e(158)]).then(n.bind(null,"u4Wo"))}},{name:"CategoryCreate",path:"new",component:function(){return n.e(116).then(n.bind(null,"bisZ"))}},{name:"CategoryUpdate",path:":id/edit",component:function(){return n.e(123).then(n.bind(null,"e+An"))}},{name:"CategoryShow",path:":id",component:function(){return n.e(129).then(n.bind(null,"je9X"))}}]},lt={path:"/journals",name:"journals",component:function(){return n.e(156).then(n.bind(null,"AKh9"))},redirect:{name:"JournalList"},children:[{name:"JournalList",path:"",component:function(){return Promise.all([n.e(1),n.e(11),n.e(159)]).then(n.bind(null,"cZAY"))}},{name:"JournalCreate",path:"new",component:function(){return n.e(117).then(n.bind(null,"tTzS"))}},{name:"JournalUpdate",path:":id/edit",component:function(){return n.e(124).then(n.bind(null,"BhVi"))}},{name:"JournalShow",path:":id",component:function(){return n.e(130).then(n.bind(null,"GVVi"))}}]},ct={path:"/notify",name:"notify",component:function(){return n.e(111).then(n.bind(null,"TAZB"))}};function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht=dt(dt(dt(dt({},{path:"/articles",name:"articles",component:function(){return n.e(154).then(n.bind(null,"Z0Si"))},redirect:{name:"ArticleList"},children:[{name:"ArticleList",path:"",component:function(){return Promise.all([n.e(1),n.e(11),n.e(157)]).then(n.bind(null,"n/52"))}},{name:"ArticleCreate",path:"new",component:function(){return n.e(115).then(n.bind(null,"jBdh"))}},{name:"ArticleUpdate",path:":id/edit",component:function(){return n.e(122).then(n.bind(null,"LJBN"))}},{name:"ArticleShow",path:":id",component:function(){return n.e(128).then(n.bind(null,"0XP9"))}}]}),ot),lt),ct),pt={label:"CollectionList",icon:"",to:{name:"CollectionList"}},ft={label:"CollectionShow",icon:"",to:{name:pt.label}},mt={label:"CollectionUpdate",icon:"",to:{name:pt.label}},vt={label:"CollectionShow",icon:"",to:{name:pt.label}},gt={label:"CollectionSpecialIssuesShow",icon:"",to:{name:"Special Issues Index"}};function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var yt=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{path:"/collections",name:"collections",component:function(){return n.e(53).then(n.bind(null,"DyAl"))},meta:{breadcrumb:pt},redirect:{name:"CollectionList"},children:[{path:"/special-issues",name:"Special Issues",component:function(){return n.e(53).then(n.bind(null,"DyAl"))},meta:{breadcrumb:pt},redirect:{name:"Special Issues"},children:[{name:"",path:"/special-issues",props:function(t){return{routeQuery:{"type.type":"special-issue"},queryArgs:t.query}},component:function(){return Promise.all([n.e(14),n.e(19)]).then(n.bind(null,"4XK2"))},meta:{breadcrumb:pt}},{name:"CollectionSpecialIssuesShow",path:"/special-issues/:id-:slug",component:function(){return n.e(9).then(n.bind(null,"oXDR"))},meta:function(t){return{breadcrumb:gt,breadcrumbTitle:t.params.slug}}},{name:"CollectionSpecialIssuesShowId",path:"/special-issues/:id",component:function(){return n.e(9).then(n.bind(null,"oXDR"))},meta:function(t){return{breadcrumb:gt,breadcrumbTitle:t.params.id}}}]},{name:"",path:"/collections",component:function(){return Promise.all([n.e(14),n.e(19)]).then(n.bind(null,"4XK2"))},meta:{breadcrumb:pt},children:[]},{name:"CollectionAdminList",path:"admin",component:function(){return Promise.all([n.e(1),n.e(11),n.e(127)]).then(n.bind(null,"LCbt"))}},{name:"CollectionCreate",path:"new",component:function(){return n.e(106).then(n.bind(null,"AH0D"))},meta:function(t){return{breadcrumb:ft,breadcrumbTitle:"New"}}},{name:"CollectionUpdate",path:":id/edit",component:function(){return Promise.all([n.e(0),n.e(4),n.e(8),n.e(75),n.e(73)]).then(n.bind(null,"8vCm"))},meta:function(t){return{breadcrumb:mt,breadcrumbTitle:t.params.slug}}},{name:"CollectionShow",path:":id-:slug",component:function(){return n.e(9).then(n.bind(null,"oXDR"))},meta:function(t){return{breadcrumb:vt,breadcrumbTitle:t.params.slug}}},{name:"CollectionShowId",path:":id",component:function(){return n.e(9).then(n.bind(null,"oXDR"))},meta:function(t){return{breadcrumb:vt,breadcrumbTitle:t.params.id}}}]}),_t={path:"/kanban",name:"KanbanList",component:function(){return Promise.all([n.e(4),n.e(13),n.e(26),n.e(18)]).then(n.bind(null,"l5zH"))},children:[{name:"KanbanBoard",path:":uuid",component:function(){return Promise.all([n.e(4),n.e(13),n.e(26),n.e(18)]).then(n.bind(null,"l5zH"))}}]};function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var wt=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{path:"/",name:"home",component:{render:function(t){return t("router-view")}},children:[{path:"/",name:"home",component:function(){return n.e(97).then(n.bind(null,"lXgH"))}},{path:"/about",name:"about",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))}},{path:"/about/join-editorial-board",name:"joinEditorialBoard",component:function(){return n.e(142).then(n.bind(null,"Yama"))}},{path:"/about/contributor-rewards",name:"contributorRewards",component:function(){return n.e(141).then(n.bind(null,"vDkx"))}},{path:"/about/team",name:"team",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Our Team",metaTags:[{name:"description",content:"PeerJ's mission is to efficiently publish the world's knowledge."},{property:"og:description",content:"PeerJ's mission is to efficiently publish the world's knowledge."}]}},{path:"/about/beliefs",name:"beliefs",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Our Beliefs"}},{path:"/about/publications",name:"publications",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Our Publications",metaTags:[{name:"description",content:"PeerJ is an Open Access, peer-reviewed, scholarly journal, whilst PeerJ Preprints is a venue for rapid communication of results."},{property:"og:description",content:"PeerJ is an Open Access, peer-reviewed, scholarly journal, whilst PeerJ Preprints is a venue for rapid communication of results."}]}},{path:"/about/author-testimonials",name:"author-testimonials",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Author Testimonials"}},{path:"/about/editor-testimonials",name:"editor-testimonials",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Editor Testimonials"}},{path:"/about/author-interviews",name:"author-interviews",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"Author Interviews",metaTags:[{name:"description",content:"Case study interview with PeerJ authors"},{property:"og:description",content:"Case study interview with PeerJ authors"}]}},{path:"/about/author-interviews/:author",name:"author-interviews-author",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"Author Interviews",metaTags:[{name:"description",content:"Case study interview with PeerJ authors"},{property:"og:description",content:"Case study interview with PeerJ authors"}]}},{path:"/about/partnerships",name:"partnerships",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Partnerships"}},{path:"/about/endorsements",name:"endorsements",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Endorsements"}},{path:"/about/reviews",name:"reviews",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"About - Reviews & Awards"}},{path:"/about/contact",name:"contact",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"HB43"))},meta:{title:"Contact Us"}},{path:"/open-advances",name:"advancesJournalsLanding",component:function(){return n.e(112).then(n.bind(null,"5kLW"))}},{path:"/pricing",name:"pricing",component:function(){return Promise.all([n.e(14),n.e(96)]).then(n.bind(null,"HFDr"))},meta:{title:"Pricing",metaTags:[{name:"description",content:"Fees for individuals and institutional affiliations. Optional add ons, such as language editing and non-commercial copyright licenses."},{property:"og:description",content:"Fees for individuals and institutional affiliations. Optional add ons, such as language editing and non-commercial copyright licenses."}]}}]}),Ct={path:"/",name:"reviewersHome",component:{render:function(t){return t("router-view")}},children:[{path:"submissions/:id/reviews",name:"reviewers",component:function(){return n.e(54).then(n.bind(null,"QYrg"))},children:[{name:"FindReviewerMatches",path:"match",component:function(){return Promise.all([n.e(78),n.e(137)]).then(n.bind(null,"z82b"))}}]},{path:"reviewer-match",name:"reviewerVolunteerList",component:function(){return n.e(54).then(n.bind(null,"QYrg"))},children:[{name:"ReviewVolunteerRegister",path:"register",component:function(){return Promise.all([n.e(16),n.e(94)]).then(n.bind(null,"zyZk"))}},{name:"ReviewVolunteerDetailsUnknown",path:"u",component:function(){return Promise.all([n.e(4),n.e(16),n.e(24),n.e(20)]).then(n.bind(null,"fWa7"))}},{name:"ReviewVolunteerDetails",path:"u/:id",component:function(){return Promise.all([n.e(4),n.e(16),n.e(24),n.e(20)]).then(n.bind(null,"fWa7"))}}]}]};function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var Et=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{path:"/staff/reports/",name:"reports",component:{render:function(t){return t("router-view")}},children:[{path:"grouped-citations",name:"GroupedCitationsReport",component:function(){return n.e(101).then(n.bind(null,"iEL0"))}}]});var At={path:"/",name:"usersHome",component:{render:function(t){return t("router-view")}},children:[{path:"/",name:"Login",component:function(){return n.e(162).then(n.bind(null,"iPa1"))},children:[{path:"admin/social-login",name:"AdminSocialLogin",component:function(){return Promise.all([n.e(4),n.e(103)]).then(n.bind(null,"WQ9o"))}},{path:"auth",name:"AuthDetail",component:function(){return n.e(136).then(n.bind(null,"a9mn"))}},{path:"login",alias:"login/",name:"MainLogin",component:function(){return n.e(35).then(n.bind(null,"hfyr"))}},{path:"signup",alias:"signup/",name:"MainSignup",component:function(){return n.e(35).then(n.bind(null,"hfyr"))}},{path:"settings/sign-on",name:"ConnectedAccounts",component:function(){return n.e(77).then(n.bind(null,"Chxx"))}}]},{path:"/settings",name:"UserSettings",component:function(){return n.e(7).then(n.bind(null,"vHIv"))},redirect:{name:"UserSettingsDetails"},children:[{name:"UserSettingsDetails",path:"/settings/details",meta:{scrollCancel:!0,scrollCancelBack:!0},alias:"/settings/account",components:{default:function(){return n.e(7).then(n.bind(null,"vHIv"))},dialog:function(){return Promise.all([n.e(0),n.e(5),n.e(23),n.e(153)]).then(n.bind(null,"gZKz"))}},props:function(t){return{previousPath:t.query.previousPath}}},{name:"UserSettingsInstitutions",path:"/settings/institutions",meta:{scrollCancel:!0,scrollCancelBack:!0},components:{default:function(){return n.e(7).then(n.bind(null,"vHIv"))},dialog:function(){return Promise.all([n.e(0),n.e(4),n.e(5),n.e(71)]).then(n.bind(null,"ut8b"))}},props:function(t){var e=t.query.previousPath;if(e)return{previousPath:e}}},{name:"UserSettingsSubjects",path:"/settings/subjects",meta:{scrollCancel:!0,scrollCancelBack:!0},components:{default:function(){return n.e(7).then(n.bind(null,"vHIv"))},dialog:function(){return Promise.all([n.e(0),n.e(5),n.e(90)]).then(n.bind(null,"pqHE"))}}},{name:"UserSettingsWebsites",path:"/settings/websites",meta:{scrollCancel:!0,scrollCancelBack:!0},alias:"/settings/orcid",components:{default:function(){return n.e(7).then(n.bind(null,"vHIv"))},dialog:function(){return Promise.all([n.e(0),n.e(5),n.e(85)]).then(n.bind(null,"DeDP"))}}},{name:"UserSettingsPassword",path:"/settings/password",meta:{scrollCancel:!0,scrollCancelBack:!0},components:{default:function(){return n.e(7).then(n.bind(null,"vHIv"))},dialog:function(){return Promise.all([n.e(0),n.e(5),n.e(102)]).then(n.bind(null,"5a77"))}}}]},{path:"/admin/",name:"user-admin",component:{render:function(t){return t("router-view")}},children:[{path:"spam",name:"UserSpam",component:function(){return n.e(28).then(n.bind(null,"vqPa"))}},{path:"spam/list",name:"UserSpamList",component:function(){return n.e(28).then(n.bind(null,"vqPa"))}}]},{path:"/",name:"user-groups",component:{render:function(t){return t("router-view")}},children:[{path:"hubs",name:"HubsHome",component:function(){return Promise.all([n.e(0),n.e(89),n.e(100)]).then(n.bind(null,"TRBo"))}},{path:"hubs/index",alias:"groups/index",name:"GroupAdminIndex",component:function(){return Promise.all([n.e(1),n.e(152)]).then(n.bind(null,"EWyd"))},children:[]},{path:"groups-test/article-token-test",name:"GroupArticleTokenTest",component:function(){return n.e(135).then(n.bind(null,"F/hP"))}},{name:"HubLanding",path:"hubs/:id",alias:"hubs/:id/join/invalid",component:function(){return Promise.all([n.e(0),n.e(65)]).then(n.bind(null,"17q1"))}},{name:"HubSubmit",path:"hubs/:id/submit",component:function(){return Promise.all([n.e(0),n.e(74),n.e(93)]).then(n.bind(null,"OzwT"))}},{name:"HubAbout",path:"hubs/:id/about",component:function(){return Promise.all([n.e(0),n.e(83)]).then(n.bind(null,"ch/q"))}},{name:"HubEvents",path:"hubs/:id/events",component:function(){return Promise.all([n.e(0),n.e(84)]).then(n.bind(null,"X9KG"))}},{name:"HubAdmin",path:"hubs/:id/admin",component:function(){return Promise.all([n.e(1),n.e(4),n.e(108)]).then(n.bind(null,"qFjF"))}},{name:"HubAdminLanding",path:"hubs/:id/admin/landing",component:function(){return Promise.all([n.e(0),n.e(86),n.e(120)]).then(n.bind(null,"3fPk"))}},{name:"HubAdminAbout",path:"hubs/:id/admin/about",component:function(){return Promise.all([n.e(0),n.e(67),n.e(119)]).then(n.bind(null,"KHCD"))}},{name:"HubAdminSettings",path:"hubs/:id/admin/settings",component:function(){return Promise.all([n.e(0),n.e(69),n.e(121)]).then(n.bind(null,"pjqw"))}},{name:"HubsSubmissionAssessment",path:"hubs/:id/dashboard/:uuid",component:function(){return Promise.all([n.e(0),n.e(72),n.e(98)]).then(n.bind(null,"jfaj"))}},{name:"HubEditor",path:"hubs/:id/dashboard",component:function(){return Promise.all([n.e(1),n.e(107)]).then(n.bind(null,"FfP2"))}},{name:"HubFunding",path:"hubs/:id/funding",component:function(){return Promise.all([n.e(1),n.e(66),n.e(118)]).then(n.bind(null,"CW8+"))}},{name:"HubFundingApplication",path:"hubs/:id/funding-application/:uuid",component:function(){return n.e(95).then(n.bind(null,"id8g"))}},{name:"HubsSubmissionUpdate",path:"hubs/:id/update/:uuid",component:function(){return Promise.all([n.e(76),n.e(145)]).then(n.bind(null,"gJmD"))}},{name:"HubsPresubmissionItem",path:"hubs/:id/presubmissions/:uuid",component:function(){return Promise.all([n.e(0),n.e(80)]).then(n.bind(null,"JxtG"))}}]},{path:"/",name:"user-files",component:{render:function(t){return t("router-view")}},children:[{path:"files",name:"FilesIndex",component:function(){return Promise.all([n.e(1),n.e(87)]).then(n.bind(null,"yIyv"))}}]}]},Tt=function(){var t=this._self._c;return t("v-row",{staticClass:"manuscript-page-layout"},[t("v-col",{attrs:{cols:"12"}},[this.loading?t("div",[this._v("Loading...")]):t("router-view")],1)],1)};Tt._withStripped=!0;var Pt={data:function(){return{loading:!1}},methods:{getArticle:function(){var t=this;return s()(r.a.mark((function e(){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=t.$router.currentRoute.params.id,e.next=5,it.a.get({urlParams:{id:n}});case 5:i=e.sent,t.$store.commit("articleModel/set",i),t.loading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t.$store.dispatch("notificationAlerts/addNotification",{title:"Article Error",message:"Error loading article",type:"error"}),console.log("Error getting article",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()}},created:function(){this.getArticle()}},xt=n("ZUTo"),kt=n.n(xt),jt=n("Yq0q"),It=n("D9m0"),Rt=Object(B.a)(Pt,Tt,[],!1,null,"d8a260b0",null),Dt=Rt.exports;kt()(Rt,{VCol:jt.a,VRow:It.a});var Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"authors-page"},[e("ManuscriptSidebarLayout",{attrs:{title:"Authors",continueRoute:t.continueRoute,preventNavigation:t.navSingleAuthorConfirm},on:{continueButtonClick:t.showSingleAuthorConfirm},scopedSlots:t._u([{key:"main",fn:function(){return[t.loading?e("div",[t._v("Loading...")]):e("div",[t.showAddAuthor?e("div",{staticClass:"mb-6"},[t.article.hasPreviousDecision?t._e():e("p",[t._v("\n                        Only add authors that meet the\n                        "),e("PJPopover",{staticClass:"author-criteria-popup",attrs:{position:"right"},scopedSlots:t._u([{key:"triggerContainer",fn:function(){return[e("div",{staticStyle:{display:"inline-block"}},[e("a",{attrs:{href:t.authorshipCriteriaUrl}},[t._v("authorship criteria")])])]},proxy:!0},{key:"contentContainer",fn:function(){return[e("div",{staticStyle:{width:"420px","white-space":"initial"}},[e("b",[t._v("Authorship Criteria")]),t._v(" "),e("div",{staticClass:"mb-2 mt-2"},[t._v("An author must meet all 4 criteria:")]),t._v(" "),e("b",[e("ol",{staticClass:"mb-2 text-bold"},[e("li",[t._v("Made substantial contributions")]),t._v(" "),e("li",[t._v("Drafted or revised")]),t._v(" "),e("li",[t._v("Made final approval")]),t._v(" "),e("li",[t._v("Fully accountable")])])]),t._v(" "),e("div",[t._v("\n                                        Contributors who do not meet these criteria can be included in the Acknowledgments section of your manuscript text (with their permission).\n                                        These criteria have been set out by the International Committee of Medical Journal Editors.\n                                    ")])])]},proxy:!0}],null,!1,484060590)}),t._v(".\n                        Co-authors are sent an email to confirm authorship after you submit.\n                    ")],1),t._v(" "),t.article.hasPreviousDecision?e("div",[e("p",[e("v-chip",{staticClass:"mr-1",attrs:{label:"",small:"",color:"orange","text-color":"white"}},[e("b",[t._v("Important note")])]),t._v("\n\n                            Please make sure this is your final author list with all relevant details (for example: named authors, author order, equal co-first and corresponding author designations).\n                        ")],1),t._v(" "),e("p",[e("strong",[t._v("No changes of any kind will be permitted after acceptance.")])])]):t._e(),t._v(" "),t.showEqualAuthorsHint?e("p",[t._v("\n                        Equal first authors must be placed in the first and second OR the first and last position.\n                    ")]):t._e(),t._v(" "),t.showCorrespondingWarning?e("p",[t._v("\n                        You must set at least one corresponding author.\n                    ")]):t._e()]):e("div",{staticClass:"mb-6"},[t._v("\n                    This article has been submitted so you cannot edit the author or address lists.\n                    "),t.canEditAuthorEmails?e("span",[t._v("If necessary you can edit the emails of any unconfirmed authors and reinvite them.")]):t._e()]),t._v(" "),t.approvalRequired?e("div",{staticClass:"alert alert-warning mb-6 mt-n3"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"mr-5"},[e("h2",[e("i",{staticClass:"icon icon-warning-sign"}),t._v(" Author approval needed")]),t._v(" "),e("div",[t._v("\n                                Some of your author changes must be approved by your co-authors.\n                            ")])]),t._v(" "),e("a",{staticClass:"btn btn-warning align-self-center",attrs:{href:t.approvalUrl}},[t._v("Ask co-authors to approve")])])]):t._e(),t._v(" "),t.isStaff||t.isChecker?e("div",{staticClass:"pull-right"},[e("a",{attrs:{href:t.oldUrl}},[t._v("Staff view")])]):t._e(),t._v(" "),t.authors.length?e("div",{staticClass:"section"},[e("h4",{staticClass:"section-title"},[t._v("Authors\n                        "),e("br"),t._v(" "),t.authors.length>0?e("small",{staticClass:"ml-0"},[e("span",[t._v("Click to "+t._s(t.canEditAuthors?"edit":"view")+".")]),t._v(" "),t.canReorderAuthors?e("span",[t._v("Drag to re-order.")]):t._e(),t._v(" "),e("span",{staticClass:"faux-link",on:{click:t.toggleKey}},[t._v("\n                                "+t._s(t.keyOpen?"Hide key":"View key")+"\n                            ")]),t._v(" "),e("transition",{attrs:{name:"transition-fade"}},[t.keyOpen?e("v-sheet",{staticClass:"d-flex mt-2 mb-3",attrs:{rounded:"",outlined:""}},[e("v-sheet",{staticClass:"py-2 px-3 d-flex align-items-center mr-2",attrs:{color:"grey",dark:""}},[e("strong",[t._v("Key")])]),t._v(" "),e("div",{staticClass:"d-flex align-items-center text--secondary key-items-container"},t._l(t.authorKeyItems,(function(n,i){return e("div",{key:i,staticClass:"d-flex align-items-center pr-6"},[n.icon?e("v-icon",{staticClass:"mr-1"},[t._v("mdi-"+t._s(n.icon))]):n.entity?e("div",{staticClass:"mr-1 font-weight-black",domProps:{innerHTML:t._s(n.entity)}}):t._e(),t._v(" "),e("span",[t._v(t._s(n.label))])],1)})),0),t._v(" "),e("v-sheet",{staticClass:"d-flex border-1 align-items-center ml-auto",staticStyle:{cursor:"pointer"},on:{click:t.toggleKey}},[e("v-icon",[t._v("mdi-close")])],1)],1):t._e()],1)],1):t._e()]),t._v(" "),e("div",{staticStyle:{position:"relative"}},[e("VueDraggable",{staticClass:"d-flex flex-wrap",attrs:{group:"authors",ghostClass:"drag-ghost",animation:200,move:t.authorsMove,disabled:!t.canReorderAuthors},on:{start:t.authorDragStart,end:t.authorDragEnd,update:t.authorsOrderUpdate},model:{value:t.authors,callback:function(e){t.authors=e},expression:"authors"}},t._l(t.authors,(function(n,i){return e("div",{key:i,staticClass:"item-container mr-2 mb-2",attrs:{"data-author-id":n.id,"data-equal-contrib":n.equalContrib?"1":""}},[e("AuthorListItem",{attrs:{refNumber:t.getAffiliationIds(n),showErrors:"",author:n,popoverDisabled:t.authorPopoverDisabled,link:""},nativeOn:{mousedown:function(e){return t.disableAuthorPopovers()},mouseup:function(e){return t.enableAuthorPopovers()}}})],1)})),0),t._v(" "),t.authorOrderLoading?e("LoadingOverlay",{attrs:{large:""}}):t._e()],1)]):t._e(),t._v(" "),t.affiliations.length?e("div",{staticClass:"section mt-5"},[e("h4",{staticClass:"section-title"},[t._v("Affiliations"),e("br"),t._v(" "),e("small",{staticClass:"ml-0"},[e("span",[t._v("Click to "+t._s(t.canEditAuthors?"edit":"view"))])])]),t._v(" "),e("div",{staticClass:"d-flex flex-column"},t._l(t.orderedAffiliations,(function(t,n){return e("router-link",{key:n,staticClass:"item-container mb-2",attrs:{replace:"",to:{name:"AffiliationEdit",params:{affiliationId:t.id}}}},[e("AddressListItem",{attrs:{address:t,refNumber:n+1}})],1)})),1)]):t._e(),t._v(" "),e("div",{staticClass:"d-flex justify-content-end mt-3 pt-3 border-top add-buttons"},[t.showAddAuthor?e("v-btn",{attrs:{color:"primary"},on:{click:t.showAddAuthorModal}},[t._v("Add Author")]):t._e(),t._v(" "),t.showAddAffiliation?e("v-btn",{staticClass:"ml-1",attrs:{color:"primary"},on:{click:t.showAddAddressModal}},[t._v("Add Affiliation")]):t._e()],1)])]},proxy:!0},{key:"sidebar",fn:function(){return[e("SectionChecklist",{attrs:{list:t.checklistItems}})]},proxy:!0}])}),t._v(" "),e("AddAuthorModal",{on:{saved:t.authorModalSaved,deleted:t.authorModalDeleted}}),t._v(" "),e("AddAddressModal"),t._v(" "),e("NonInstitutionalEmailModal")],1)};Lt._withStripped=!0;var Mt=n("t2rG"),Nt=n.n(Mt),Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-8"},[t.title?e("div",[e("PageTitle",[t._v(t._s(t.title))])],1):t._e(),t._v(" "),t._t("main")],2),t._v(" "),e("div",{staticClass:"col-4"},[t._t("sidebar"),t._v(" "),t.continueRoute?e("div",{staticClass:"mt-3 float-right"},[e("router-link",{attrs:{to:{name:t.continueRoute},event:""},nativeOn:{click:function(e){return e.preventDefault(),t.continueClick(t.continueRoute)}}},[e("v-btn",{attrs:{color:"primary",loading:t.continueButtonLoading,disabled:t.continueButtonLoading}},[t._v("\n                        Save and Continue "),e("v-icon",[t._v("mdi-chevron-right")])],1)],1),t._v(" "),t.continueRouteTitle?e("div",{staticClass:"mt-2 text-body-2 text-right text--disabled"},[t._v("Next Section: "+t._s(t.continueRouteTitle))]):t._e()],1):t._e()],2)])};Vt._withStripped=!0;var Ut=function(){return(0,this._self._c)("h1",{staticClass:"slim manuscript-page-title"},[this._t("default")],2)};Ut._withStripped=!0;var qt={},Ft=(n("b7uH"),Object(B.a)(qt,Ut,[],!1,null,"dc532f32",null).exports),Bt={props:{title:{required:!1,type:String},continueRoute:{required:!1,type:String},preventNavigation:{type:Boolean,required:!1,default:!1}},components:{PageTitle:Ft},data:function(){return{continueButtonLoading:!1}},computed:{articleId:function(){return this.$store.state.articleModel.article.id},continueRouteTitle:function(){if(this.continueRoute){var t=this.$router.resolve({name:this.continueRoute});return t?t.route.meta.title:""}return""}},methods:{continueClick:function(t){this.preventNavigation?this.$emit("continueButtonClick",t):(this.$router.push({name:t}),this.continueButtonLoading=!0)}},mounted:function(){this.continueButtonLoading=!1}},Ht=(n("Z1DM"),n("gzZi")),$t=n("Ey0z"),Gt=Object(B.a)(Bt,Vt,[],!1,null,"b3696e06",null),Wt=Gt.exports;kt()(Gt,{VBtn:Ht.a,VIcon:$t.a});var Jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"checklist-container"},[e("h2",{staticClass:"title slim mb-4"},[t._v("Checklist")]),t._v(" "),t._l(t.list,(function(n,i){return e("div",{key:i,staticClass:"item",style:{color:"dark"===t.theme?"#eee":"#121212"}},[n.icon?e("v-icon",{staticClass:"icon mr-3"},[t._v(t._s(n.icon))]):e("v-icon",{staticClass:"icon mr-3"},[t._v("mdi-check-circle")]),t._v(" "),e("div",{domProps:{innerHTML:t._s(n.text?n.text:n)}})],1)}))],2)};Jt._withStripped=!0;var Yt={props:{list:{required:!0,type:Array}},computed:{itemColor:function(){return"dark"===this.theme?"#eee":"#121212"}}},Qt=(n("qkxR"),Object(B.a)(Yt,Jt,[],!1,null,"3d49ddfc",null)),Kt=Qt.exports;kt()(Qt,{VIcon:$t.a});var zt=function(){var t=this,e=t._self._c;return e("div",{ref:"author-list-item",staticStyle:{position:"relative"}},[e("PJPopover",{attrs:{position:"top",disabled:!t.displayErrors,closeOnHover:!1,mouseDownPreventDefault:""},scopedSlots:t._u([{key:"triggerContainer",fn:function(){return[e(t.link?"router-link":"div",{tag:"component",staticClass:"author-list-item",class:{"author-warning":t.showErrors&&t.warnings.length,"author-error":t.showErrors&&t.errors.length},attrs:{to:{name:"AuthorEdit",params:{authorId:t.author.id}}}},[t.author.displayName.trim()?e("span",[t._v(t._s(t.author.displayName))]):e("span",[t._v(t._s(t.author.email))]),t._v(" "),e("sup",{staticClass:"ref-container"},[e("span",[t._v(t._s(t.refNumber))]),t._v(" "),e("span",[t.author.corresponding?e("v-icon",[t._v("mdi-email")]):t._e(),t._v(" "),t.author.deceased?e("span",{staticClass:"font-weight-black"},[t._v("†")]):t._e(),t._v(" "),t.author.equalContrib?e("v-icon",[t._v("mdi-asterisk")]):t._e(),t._v(" "),t.author.admin?e("v-icon",[t._v("mdi-pencil")]):t._e()],1)]),t._v(" "),t.showDelete?e("div",{staticClass:"delete-icon",on:{click:function(e){return t.$emit("delete")}}},[e("i",{staticClass:"icon icon-remove-sign"})]):t._e()])]},proxy:!0},{key:"contentContainer",fn:function(){return[e("div",{staticStyle:{"max-width":"340px"}},[e("v-sheet",{staticClass:"py-2 author-error-popover",attrs:{color:t.theme,rounded:""}},[t._l(t.errors,(function(n,i){return e("div",{key:"e-"+i,staticClass:"author-error-list-item"},[e("i",{staticClass:"icon icon-warning-sign text-danger mr-1"}),t._v(" "+t._s(n)+"\n                    ")])})),t._v(" "),t._l(t.warnings,(function(n,i){return e("div",{key:"w-"+i,staticClass:"author-error-list-item"},["string"==typeof n?e("div",[e("i",{staticClass:"icon icon-warning-sign text-warning mr-1"}),t._v(" "+t._s(n)+"\n                        ")]):"profile"==n.type?e("div",[e("div",{staticStyle:{"white-space":"initial","min-width":"340px"}},[e("i",{staticClass:"icon icon-warning-sign text-warning mr-1"}),t._v("\n                                The name you entered ("),e("b",[t._v(t._s(t.author.displayName))]),t._v(") is different from the name this author entered on their profile page\n                                ("),e("b",[t._v(t._s(t.author.profile?t.author.profile.displayName:""))]),t._v("). These names must match.\n                                "),e("br"),e("br"),t._v("Please email the author to resolve:\n                                "),e("br"),t._v(" "),e("v-btn",{staticClass:"mt-2",attrs:{href:t.emailAuthorLink,color:"primary"}},[t._v("Email Author")])],1)]):t._e()])}))],2)],1)]},proxy:!0}])})],1)};zt._withStripped=!0;var Zt=n("lwsE"),Xt=n.n(Zt),te=n("W8MJ"),ee=n.n(te),ne=n("7W2i"),ie=n.n(ne),re=n("a1gu"),ae=n.n(re),se=n("Nsbk"),oe=n.n(se),le=n("1IrZ"),ce=n("2waU");function ue(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=oe()(t);if(e){var r=oe()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ae()(this,n)}}var de=function(t){ie()(n,t);var e=ue(n);function n(t){var i;return Xt()(this,n),(i=e.call(this,t)).accepted=t.accepted,i.declined=t.declined,i.sent=t.sent,i}return n}(le.a),he=n("6OTJ");function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=oe()(t);if(e){var r=oe()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ae()(this,n)}}var fe=function(t){ie()(n,t);var e=pe(n);function n(t){var i;Xt()(this,n),(i=e.call(this,t)).admin=!!t&&t.admin,i.givenName=t?t.givenName:"",i.familyName=t?t.familyName:"",i.email=t?t.email:"",i.initials=t?t.initials:"",i.displayName=t?t.displayName:"",i.corresponding=!!t&&t.corresponding,i.equalContrib=!!t&&t.equalContrib,i.deceased=!!t&&t.deceased,i.invitation=t&&t.invitation?new de(t.invitation):null,i.profile=t&&t.profile?new he.a(t.profile):null,i.ordinal=t?t.ordinal:null;var r=t?t.addresses:[];return i.addresses=[],r.map((function(t){return i.addresses.push(new ce.a(t))})),i}return ee()(n,[{key:"profileNameMatch",get:function(){return!this.profile||this.displayName==this.profile.displayName}},{key:"getCopy",value:function(){var t=new n,e=Object.assign(t,this);return e.addresses=l()(this.addresses),e}}],[{key:"endpoints",get:function(){return{list:it.a.endpoints.get+"authors/",create:it.a.endpoints.get+"authors/",update:"authors/{id}/"}}}]),n}(le.a),me=n("AuB/"),ve={props:{author:{type:fe,required:!1},refNumber:{type:[String,Number],required:!1,default:""},showDelete:{type:Boolean,required:!1,default:!1},showErrors:{type:Boolean,required:!1,default:!1},popoverDisabled:{type:Boolean,required:!1,default:!1},link:{type:Boolean,required:!1}},computed:{article:function(){return this.$store.state.articleModel.article},user:function(){return this.$store.state.user.user},errors:function(){var t=[];return this.author.addresses.length||t.push("This author does not have an affiliation"),this.author.declined&&t.push("This author declined their invitation"),t},warnings:function(){var t=[];return this.approvalRequired&&t.push("This author change needs approval"),this.isConfirmed||!this.article.hasPreviousSubmission&&!this.article.currentRevisionSubmitted||t.push("This author has not confirmed"),this.author.profileNameMatch||t.push({type:"profile"}),t},displayErrors:function(){return!this.popoverDisabled&&this.showErrors&&(this.errors.length||this.warnings.length)},approvalRequired:function(){var t=this;return this.article.authorChanges.filter((function(e){return e._links.author==t.author.links.self&&!e.isApproved})).length},isConfirmed:function(){return!!this.author.invitation&&this.author.invitation.accepted},declined:function(){return!!this.author.invitation&&this.author.invitation.declined},emailAuthorLink:function(){var t,e,n,i,r=(t=this.article.title,e=this.author.displayName,n=this.author.profile?this.author.profile.displayName:"",i=this.user.firstName,me.a.nl2HtmlEntity("Hello,\n\nI am working on our PeerJ submission: '".concat(t,"'.\n\nThe name I entered for you for this submission is:\n- ").concat(e,"\n\nBut the name you entered on your PeerJ profile is:\n- ").concat(n,"\n\nWhich version of your name do you want to use? They must be the same to publish.\n\nWe have 2 options:\n1) I can update your name on the submission to: ").concat(n,"\n2) Or you can update your profile name to: ").concat(e,"\n\nPlease let me know how you want to proceed.\n\nBest regards,\n\n").concat(i)));return"mailto:".concat(this.author.email,"?subject=Please%20update%20your%20profile%20name&body=").concat(r)}}},ge=(n("e1Bn"),n("jdmY")),be=Object(B.a)(ve,zt,[],!1,null,"4e50bcc2",null),ye=be.exports;kt()(be,{VBtn:Ht.a,VIcon:$t.a,VSheet:ge.a});var _e=function(){var t=this,e=t._self._c;return e("div",[t.error?e("PJPopover",{attrs:{position:"top"},scopedSlots:t._u([{key:"triggerContainer",fn:function(){return[e("div",{staticClass:"address-list-item error"},[t._v(t._s(t.address.fullAddress))])]},proxy:!0},{key:"contentContainer",fn:function(){return[t._v("\n            "+t._s(t.error)+"\n        ")]},proxy:!0}],null,!1,1088991694)}):e("div",{staticClass:"address-list-item"},[t.refNumber?e("div",{staticClass:"ref-container"},[t._v(t._s(t.refNumber))]):t._e(),t._v(" "),e("span",[t._v(t._s(t.address.fullAddress))]),t._v(" "),t.showDelete?e("div",{staticClass:"delete-icon",on:{click:t.deleteItem}},[e("i",{staticClass:"icon icon-remove-sign"})]):t._e()])],1)};_e._withStripped=!0;var Se={props:{address:{type:ce.a,required:!0},error:{type:String,required:!1,default:""},refNumber:{type:[String,Number],required:!1,default:null},showDelete:{type:Boolean,required:!1,default:!1}},methods:{deleteItem:function(){this.$emit("delete")}}},we=(n("k15Y"),Object(B.a)(Se,_e,[],!1,null,"1b018b61",null).exports),Ce=function(){var t=this,e=t._self._c;return e("PJModalVuetify",{attrs:{persistent:"",title:t.title,icon:"mdi-account-details",saving:t.showSavingOverlay,closeCallback:t.checkForChangesBeforeClose},scopedSlots:t._u([{key:"body",fn:function(){return[e("v-row",{staticClass:"mt-5 mb-1"},[e("v-col",{attrs:{cols:"12"}},[t.canEdit("email")&&!t.canEdit("givenName")?e("div",[t._v("\n                    If necessary, edit and re-send this author's invitation.\n                ")]):t._e(),t._v(" "),t.canEdit("email")||t.canEdit("givenName")?t._e():e("div",[t._v("\n                    This article has been submitted so you cannot edit this author.\n                ")]),t._v(" "),t.canEdit("email")&&t.canEdit("givenName")?e("div",[t._v("\n                    Enter full author details for publication.\n                ")]):t._e()])],1),t._v(" "),e("v-row",{staticClass:"pt-3",staticStyle:{"min-height":"344px"}},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{ref:"firstNameInput",attrs:{disabled:!t.canEdit("givenName"),label:"First given name*",hint:"Enter first given name in full",required:"","error-messages":t.getValidationErrors("author","givenName")},model:{value:t.author.givenName,callback:function(e){t.$set(t.author,"givenName",e)},expression:"author.givenName"}}),t._v(" "),e("v-text-field",{staticClass:"mt-4",attrs:{disabled:!t.canEdit("familyName"),label:"Family name (surname)*",hint:"Enter family name (surname) in full","error-messages":t.getValidationErrors("author","familyName"),required:""},model:{value:t.author.familyName,callback:function(e){t.$set(t.author,"familyName",e)},expression:"author.familyName"}}),t._v(" "),t.showMiddleName?e("div",[e("v-text-field",{staticClass:"mt-4",attrs:{disabled:!t.canEdit("initials"),label:"Middle name initial",hint:"Initials only, e.g. 'W' for Peter Ware Higgs"},model:{value:t.author.initials,callback:function(e){t.$set(t.author,"initials",e)},expression:"author.initials"}})],1):e("div",{},[t.canEdit("initials")?e("label",{staticClass:"mb-1 mt-3"},[e("v-btn",{attrs:{"x-small":"",depressed:""},on:{click:t.showMiddleNameField}},[t._v("+ middle name (optional)")])],1):t._e()]),t._v(" "),e("v-text-field",{staticClass:"mt-4",attrs:{disabled:!t.canEdit("email"),label:"Email*",hint:"Institutional email preferred","error-messages":t.getValidationErrors("author","email"),required:""},on:{keydown:function(e){return t.clearServerValidationErrors("author","email")},change:function(e){return t.clearServerValidationErrors("author","email")}},model:{value:t.author.email,callback:function(e){t.$set(t.author,"email",e)},expression:"author.email"}}),t._v(" "),e("v-checkbox",{staticClass:"mt-5 modal-checkbox",attrs:{disabled:!t.canEditCorresponding,label:"Corresponding author post publication"+(t.correspondingEnabled?"":" (Maximum of 2)")},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({},"v-icon",r,!1),i),[t._v("mdi-information")])]}}])},[t._v(" "),e("v-card",[e("v-card-text",{staticClass:"pa-4 checkbox-popover"},[t._v("\n                                    On the published article, this author will be listed as a corresponding author and their email will be displayed.\n                                    This setting does not allow the author to edit this manuscript.\n                                ")])],1)],1)]},proxy:!0}]),model:{value:t.author.corresponding,callback:function(e){t.$set(t.author,"corresponding",e)},expression:"author.corresponding"}}),t._v(" "),e("v-checkbox",{staticClass:"modal-checkbox",attrs:{disabled:!t.canEdit("equalContrib")||!t.equalContribEnabled,label:t.equalContribLabel},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({},"v-icon",r,!1),i),[t._v("mdi-information")])]}}])},[t._v(" "),e("v-card",[e("v-card-text",{staticClass:"pa-4 checkbox-popover"},[t._v('\n                                    All equal first authors are labelled with "These authors contributed equally to this work" on the published article.\n                                    The first author in your author list must be one of the equal first authors. 2 maximum.\n                                ')])],1)],1)]},proxy:!0}]),model:{value:t.author.equalContrib,callback:function(e){t.$set(t.author,"equalContrib",e)},expression:"author.equalContrib"}}),t._v(" "),e("div",{staticStyle:{position:"relative"}},[e("v-checkbox",{staticClass:"modal-checkbox",attrs:{disabled:!t.canEditDeceased,label:"Deceased"},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-icon",t._g(t._b({},"v-icon",r,!1),i),[t._v("mdi-information")])]}}])},[t._v(" "),t.canEditDeceased?e("v-card",[e("v-card-text",{staticClass:"pa-4 checkbox-popover"},[t._v("\n                                        The next of kin must give permission to publish the deceased's name.\n                                        We will contact you with instructions for how to do this.\n                                    ")])],1):t._e()],1)]},proxy:!0}]),model:{value:t.author.deceased,callback:function(e){t.$set(t.author,"deceased",e)},expression:"author.deceased"}}),t._v(" "),t.canEditDeceased?e("div",{staticClass:"deceased-trigger",on:{mousedown:function(e){return t.confirmDeceased()}}}):t._e()],1)],1),t._v(" "),e("v-col",{attrs:{cols:"6",id:"aff-col"}},[e("div",{staticClass:"mb-1"},[t._v("Affiliations")]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between"},[e("v-btn",{staticStyle:{width:"49%"},attrs:{color:"grey darken-2",dark:!t.affiliationNewDisabled,disabled:t.affiliationNewDisabled},on:{click:function(e){return t.addNewAffiliation(!1)}}},[t._v("\n                        Add New\n                    ")]),t._v(" "),e("div",{staticStyle:{width:"49%"}},[e("v-menu",{attrs:{right:"","offset-y":"","max-height":"80vh","max-width":"92%",dense:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{block:"",color:"grey darken-2",dark:!t.affiliationLinkDisabled,disabled:t.affiliationLinkDisabled}},"v-btn",r,!1),i),[t._v("\n                                    Link "),e("v-icon",[t._v("mdi-chevron-down")])],1)]}}])},[t._v(" "),e("v-list",t._l(t.remainingAffiliations,(function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.addAffiliation(n)}}},[e("v-list-item-title",{staticStyle:{"white-space":"no-wrap"}},[n.department||n.institution?e("span",[n.department?e("span",[t._v(t._s(n.department)+", ")]):t._e(),t._v(t._s(n.institution)+"\n                                        ")]):e("span",[t._v(t._s(n.country))])])],1)})),1)],1)],1)],1),t._v(" "),e("v-divider",{staticClass:"my-2"}),t._v(" "),t._l(t.author.addresses,(function(n,i){return e("div",{key:i,staticClass:"mb-1"},[e("AddressListItem",{attrs:{address:t.getAffiliation(n.apiId),showDelete:t.canEdit("addresses")},on:{delete:function(e){return t.removeAffiliation(n.apiId)}}})],1)}))],2)],1),t._v(" "),e("PJSaveChangesModal",{attrs:{text:"Save changes to author?"},on:{save:function(e){return t.save(!1)},discard:function(e){return t.hide()},cancel:t.toggleSaveConfirm},model:{value:t.saveConfirmOpen,callback:function(e){t.saveConfirmOpen=e},expression:"saveConfirmOpen"}}),t._v(" "),e("PJSaveChangesModal",{attrs:{title:"Author replace"},on:{save:function(e){return t.confirmReplace()},discard:function(e){return t.hide()},cancel:function(e){t.replaceModalOpen=!1}},model:{value:t.replaceModalOpen,callback:function(e){t.replaceModalOpen=e},expression:"replaceModalOpen"}},[e("p",[t._v("It looks like you want to replace this author? This is not permitted at this stage.")]),t._v(" "),e("p",[t._v("Please delete this author and add a new author instead.")]),t._v(" "),e("p",[t._v("If you are not replacing this author, save and continue as normal.")])]),t._v(" "),e("PJDialogue",{attrs:{title:"Affiliation Missing"},scopedSlots:t._u([{key:"buttons",fn:function(){return[e("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){return t.hideNoAffiliationModal(!0,!1)}}},[t._v("Save")]),t._v(" "),e("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){return t.hideNoAffiliationModal(!1,!0)}}},[t._v("Add Affiliation")])]},proxy:!0}]),model:{value:t.noAffiliationModalOpen,callback:function(e){t.noAffiliationModalOpen=e},expression:"noAffiliationModalOpen"}},[t._v("\n                This author does not have an affiliation\n                "),e("br"),e("br"),t._v("All authors must have at least one affiliation\n                "),e("br"),t._v("("),e("span",{staticClass:"text-decoration-underline blue--text",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.toggleIndieResearcherInfo()}}},[t._v("\n                    including independent researchers\n                ")]),t._v(")\n\n                "),e("transition",{attrs:{name:"transition-fade"}},[t.indieResearcherInfoVisible?e("IndependentResearcherInfo",{staticClass:"mt-4"}):t._e()],1)],1)]},proxy:!0},{key:"buttons-left",fn:function(){return[t.showDeleteButton?e("v-btn",{attrs:{color:"red darken-1",outlined:"",loading:t.deleting},on:{click:t.deleteConfirm}},[t._v("Delete Author")]):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[t.deleting?t._e():e("v-btn",{attrs:{color:"primary",loading:t.saving,disabled:t.saving||!t.canSave||t.canInvite()&&!t.emailChanged},on:{click:function(e){return t.save(!1)}}},[t._v("Save"+t._s(t.canInvite()?" and invite":""))])]},proxy:!0}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}})};Ce._withStripped=!0;var Oe=n("xweI"),Ee=n.n(Oe),Ae=n("u8Zi"),Te=function(){var t=this._self._c;return t("v-sheet",{staticClass:"p-3 grey--text text--darken-2",attrs:{color:"grey lighten-3",rounded:""}},[t("strong",[this._v("Independent Researchers")]),this._v(" "),t("div",{staticClass:"mt-2"},[this._v("\n        If this author is an independent researcher (i.e. not affiliated to an institution) you must enter City and Country information as a minimum.\n        You must also enter "),t("b",[t("em",[this._v("'Unaffiliated'")])]),this._v(" in the Institution field.\n    ")])])};Te._withStripped=!0;var Pe={},xe=Object(B.a)(Pe,Te,[],!1,null,null,null),ke=xe.exports;kt()(xe,{VSheet:ge.a});var je=n("ta7f"),Ie=n("cqKV"),Re={mixins:[Ie.a],components:{AddressListItem:we,IndependentResearcherInfo:ke},validations:{author:{givenName:{allCaps:function(t){return this.isValidName(t)}},familyName:{allCaps:function(t){return this.isValidName(t)}},email:{required:je.required,email:je.email}}},data:function(){return{changed:!1,open:!1,author:{},authorEditable:{},saving:!1,deleting:!1,affiliationMenuOpen:!1,showMiddleName:!1,institutionEmailModalOpen:!1,saveConfirmOpen:!1,replaceModalOpen:!1,authorOriginal:{},disableNoAffiliationModal:!1,noAffiliationModalOpen:!1,indieResearcherInfoVisible:!1}},computed:{affiliations:function(){return this.$store.state.articleModel.affiliations.all},articleAuthors:function(){return this.$store.state.articleModel.authors.all},remainingAffiliations:function(){var t=this.author.addresses.map((function(t){return t.apiId})),e=this.affiliations.filter((function(e){return!t.includes(e.apiId)}));return Ee()(e,(function(t){return t.department?t.department:t.institution}))},title:function(){return this.author.id?"Author edit":"Add Author"},showSavingOverlay:function(){return!(!this.saving&&!this.deleting)},loadingOverlayText:function(){return this.deleting?"Deleting...":"Saving..."},showDeleteButton:function(){return!this.saving&&this.author.id&&this.author.allowedActions.self&&this.author.allowedActions.self.delete},correspondingEnabled:function(){var t=this,e=this.articleAuthors.filter((function(e){return e.corresponding&&e.id!=t.author.id})).length;if(this.author.corresponding&&e>1)return!0;var n=e<2;return!!this.userIsStaff||n},equalAuthorCount:function(){var t=this;return this.articleAuthors.filter((function(e){return e.equalContrib&&e.id!=t.author.id})).length},equalContribEnabled:function(){var t=this.equalAuthorCount;if(this.author.equalContrib&&t>1&&0!=this.getArrayPos)return!0;var e=[1,this.articleAuthors.length-1].includes(this.getArrayPos),n=t<2&&e;return!!this.userIsStaff||n},equalContribLabel:function(){var t="Equal first author";return this.equalContrib>=2&&!this.userIsStaff?t+=" (Maximum of 2)":0==this.getArrayPos&&this.author.equalContrib&&!this.userIsStaff?t+=" (Removed when other equal authors are unchecked)":0!=this.getArrayPos||this.author.equalContrib||this.userIsStaff?this.equalContribEnabled||this.userIsStaff||(t+=" (Can only be set on 1st, 2nd or last author)"):t+=" (Auto checked when adding another equal first author)",t},userIsStaff:function(){return this.$store.state.user.user.hasRole("ROLE_STAFF")},getArrayPos:function(){var t=this;return this.articleAuthors.findIndex((function(e){return e.id===t.author.id}))},deceased:function(){return this.author.deceased},canCreateAddresses:function(){var t=this.$store.state.articleModel.article;return t.allowedActions.hasOwnProperty("authorAddresses")&&t.allowedActions.authorAddresses.createResource},canSave:function(){if(this.author.id)return this.author.allowedActions.hasOwnProperty("self")&&this.author.allowedActions.self.updateResource;var t=this.$store.state.articleModel.article;return t.allowedActions.hasOwnProperty("authors")&&t.allowedActions.authors.createResource},emailChanged:function(){return this.authorOriginal.email!=this.author.email},affiliationLinkDisabled:function(){return!this.canEdit("addresses")||!this.remainingAffiliations.length},affiliationNewDisabled:function(){return!this.canEdit("addresses")||!this.canCreateAddresses},canEditDeceased:function(){return!this.author.corresponding&&!this.author.admin&&this.canEdit("deceased")},canEditCorresponding:function(){return!(this.author.deceased||!this.correspondingEnabled)&&this.canEdit("corresponding")}},methods:{confirmDeceased:function(){var t=this;this.author.deceased?this.author.deceased=!1:(this.author.deceased=!1,this.showConfirmModal({vuetify:!0,title:"Important Confirmation",icon:"mdi-alert-circle",iconColor:"error",question:"\n                        You are about to mark this author as deceased.\n                        <br><br>Are you sure you want to do this?\n                        <br><br>The next of kin must give permission to publish the deceased's name.\n                        We will email you with instructions for how to do this, after you submit.\n                    ",confirmLabel:"Mark as deceased",confirmColor:"primary",callback:function(e){t.author.deceased=e}}))},canEdit:function(t){return!this.author.id||this.author.allowedActions.hasOwnProperty(t)&&this.author.allowedActions[t].update},reset:function(){var t=this;this.author=new fe,this.authorOriginal=this.author,setTimeout((function(){t.changed=!1}),500),this.authorEditable={},this.affiliationMenuOpen=!1,this.saving=!1,this.deleting=!1,this.showMiddleName=!1,this.showValidationErrors=!1,this.clearServerValidationErrors(),this.disableNoAffiliationModal=!1,this.noAffiliationModalOpen=!1,this.indieResearcherInfoVisible=!1},showAddMode:function(){var t=this;this.reset(),this.open=!0,setTimeout((function(){t.$refs.firstNameInput.focus()}),200)},showEditMode:function(t){this.reset(),this.author=t.getCopy(),this.authorOriginal=t,this.open=!0,t.initials&&this.showMiddleNameField()},hide:function(){this.open=!1,this.author.id&&this.$router.replace({name:"ManuscriptAuthors"}),this.author=new fe},addNewAffiliation:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];$.a.$emit(Ae.a.MANUSCRIPT_SHOW_ADD_ADDRESS_MODAL,{hideAuthors:!0,showIndieResearcherInfo:t})},addAffiliation:function(t){this.affiliationMenuOpen=!1,-1==this.author.addresses.findIndex((function(e){return e.apiId==t.apiId}))&&this.author.addresses.push(t)},removeAffiliation:function(t){var e=this.author.addresses.findIndex((function(e){return e.apiId==t}));e>-1&&this.author.addresses.splice(e,1)},getAffiliation:function(t){var e=this.affiliations.filter((function(e){return e.links.self==t}));return e.length?e[0]:null},deleteConfirm:function(){var t=this;this.showConfirmModal({vuetify:!0,question:"Are you sure you want to delete this author?",confirmLabel:"Delete Author",confirmColor:"red",callback:function(e){e&&t.deleteAuthor()}})},deleteAuthor:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.deleting=!0,e.prev=1,e.next=4,t.author.delete();case 4:t.$store.commit("articleModel/authors/remove",t.author),t.$store.dispatch("notificationAlerts/addNotification",{title:"Author Deleted",message:"The author was deleted",type:"success"}),t.deleting=!1,t.hide(),t.$emit("deleted",t.author),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t.$store.dispatch("notificationAlerts/addNotification",{title:"Error Deleting Author",message:"The author could not be deleted",type:"error"}),t.deleting=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},save:function(){var t=arguments,e=this;return s()(r.a.mark((function n(){var i,a,s,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]&&t[0],e.showValidationErrors=!1,e.$v.$touch(),!e.$v.$invalid){n.next=6;break}return e.showValidationErrors=!0,n.abrupt("return");case 6:if(!e.author.id||i){n.next=13;break}if(!e.author.invitation){n.next=13;break}if(["givenName","familyName","email"].map((function(t){return e.author[t].toLowerCase()!=e.authorOriginal[t].toLowerCase()})).includes(!1)){n.next=13;break}return e.replaceModalOpen=!0,n.abrupt("return");case 13:if(e.author.addresses.length||e.disableNoAffiliationModal){n.next=16;break}return e.showNoAffiliationModal(),n.abrupt("return");case 16:if(e.saving=!0,a=e.$router.currentRoute.params.id,n.prev=18,!e.author.id){n.next=28;break}return s=e.canInvite()?{queryParams:{invite:!0}}:{},n.next=23,e.author.update(s);case 23:o=n.sent,e.$store.commit("articleModel/authors/update",o),e.$store.dispatch("notificationAlerts/addNotification",{title:"Author Updated",message:"The author was updated",type:"success"}),n.next=34;break;case 28:return e.author.ordinal=e.articleAuthors.length,n.next=31,e.author.save({urlParams:{id:a}});case 31:o=n.sent,e.$store.commit("articleModel/authors/add",o),e.$store.dispatch("notificationAlerts/addNotification",{title:"Author Created",message:"The author was added to the article",type:"success"});case 34:e.$emit("saved",o),e.hide(),n.next=43;break;case 38:n.prev=38,n.t0=n.catch(18),console.log("Error saving author",n.t0),n.t0.data.problemDetails&&(e.setServerValidationErrors("author",n.t0.data.problemDetails),e.showValidationErrors=!0),e.$store.dispatch("notificationAlerts/addNotification",{title:"Error",message:e.author.id?"The author could not be updated":"The author could not be added to the article",type:"error"});case 43:return n.prev=43,e.saving=!1,n.finish(43);case 46:case"end":return n.stop()}}),n,null,[[18,38,43,46]])})))()},confirmReplace:function(){this.replaceModalOpen=!1,this.save(!0)},toggleAffiliationMenuOpen:function(){this.affiliationMenuOpen=!this.affiliationMenuOpen},showMiddleNameField:function(){this.showMiddleName=!0},showConfirmInstitutionEmailModal:function(){$.a.$emit(Ae.a.MANUSCRIPT_SHOW_INSTITUTIONAL_EMAIL_MODAL,this.author)},toggleSaveConfirm:function(){this.saveConfirmOpen=!this.saveConfirmOpen},checkForChangesBeforeClose:function(){this.changed?this.toggleSaveConfirm():this.hide()},canInvite:function(){return this.canEdit("email")&&this.emailChanged&&(this.userIsStaff||this.author.invitation&&!this.author.invitation.accepted&&!this.author.invitation.declined)},isValidName:function(t){return!(t&&t.length>1)||me.a.isNotAllCaps(t)},showNoAffiliationModal:function(){this.noAffiliationModalOpen=!0},hideNoAffiliationModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.noAffiliationModalOpen=!1,t&&(this.disableNoAffiliationModal=!0,this.save()),e&&this.addNewAffiliation(this.indieResearcherInfoVisible)},toggleIndieResearcherInfo:function(){this.indieResearcherInfoVisible=!this.indieResearcherInfoVisible}},watch:{author:{handler:function(){this.changed=!0},deep:!0}},created:function(){this.reset()},mounted:function(){$.a.$on(Ae.a.MANUSCRIPT_SHOW_ADD_AUTHOR_MODAL,this.showAddMode),$.a.$on(Ae.a.MANUSCRIPT_SHOW_EDIT_AUTHOR_MODAL,this.showEditMode),$.a.$on(Ae.a.MANUSCRIPT_ADDRESS_ADDED_FROM_AUTHOR_MODAL,this.addAffiliation)},beforeMount:function(){$.a.$off(Ae.a.MANUSCRIPT_SHOW_ADD_AUTHOR_MODAL),$.a.$off(Ae.a.MANUSCRIPT_SHOW_EDIT_AUTHOR_MODAL),$.a.$off(Ae.a.MANUSCRIPT_ADDRESS_ADDED_FROM_AUTHOR_MODAL)},beforeDestroy:function(){$.a.$off(Ae.a.MANUSCRIPT_SHOW_ADD_AUTHOR_MODAL),$.a.$off(Ae.a.MANUSCRIPT_SHOW_EDIT_AUTHOR_MODAL),$.a.$off(Ae.a.MANUSCRIPT_ADDRESS_ADDED_FROM_AUTHOR_MODAL)}},De=(n("LiM6"),n("sK+t")),Le=n("mdmw"),Me=n("rHzn"),Ne=n("zn5u"),Ve=n("iGBT"),Ue=n("2hOt"),qe=n("XSMC"),Fe=n("5Emp"),Be=n("hlRy"),He=Object(B.a)(Re,Ce,[],!1,null,"13860a99",null),$e=He.exports;kt()(He,{VBtn:Ht.a,VCard:De.a,VCardText:Le.c,VCheckbox:Me.a,VCol:jt.a,VDivider:Ne.a,VIcon:$t.a,VList:Ve.a,VListItem:Ue.a,VListItemTitle:qe.c,VMenu:Fe.a,VRow:It.a,VTextField:Be.a});var Ge=function(){var t=this,e=t._self._c;return e("PJModalVuetify",{attrs:{persistent:"",title:t.title,icon:"mdi-domain",loading:t.saving,loadingText:"Saving....",closeCallback:t.checkForChangesBeforeClose},scopedSlots:t._u([{key:"body",fn:function(){return[e("v-row",{staticClass:"mt-5 mb-1"},[e("v-col",{attrs:{cols:"12"}},[t.showIndieResearcherInfo?e("IndieResearcherInfo"):e("div",[t._v("Enter full affiliation details for publication.")])],1)],1),t._v(" "),e("v-row",{staticClass:"pt-3",staticStyle:{"min-height":"344px"}},[e("v-col",{attrs:{cols:t.hideAuthors?12:6}},[e("v-combobox",{ref:"institutionInput",attrs:{disabled:!t.canEdit("institution"),label:"Institution*",hint:"Enter full title, e.g. 'Arizona State University' instead of 'ASU'. If unaffiliated enter: 'Unaffiliated'","persistent-hint":"",items:t.institutionSuggestions,"search-input":t.institutionSearch,"item-value":"name","item-text":"name",required:""},on:{"update:searchInput":function(e){t.institutionSearch=e},"update:search-input":function(e){t.institutionSearch=e}},scopedSlots:t._u([{key:"item",fn:function(n){n.parent;var i=n.item;return[e("v-list-item-content",[e("v-list-item-title",{domProps:{innerHTML:t._s("".concat(t.genFilteredText(i.name)))}}),t._v(" "),e("v-list-item-subtitle",[t._v(t._s(i.country))])],1)]}}]),model:{value:t.address.institution,callback:function(e){t.$set(t.address,"institution",e)},expression:"address.institution"}}),t._v(" "),e("v-text-field",{staticClass:"mt-3",attrs:{disabled:!t.canEdit("department"),label:"Department / Faculty / School / etc",hint:"Enter full title, e.g. 'Department of Bioscience' instead of 'Bioscience'. Do not enter general info e.g. 'Masters program', 'Undergraduate' etc.",required:""},model:{value:t.address.department,callback:function(e){t.$set(t.address,"department",e)},expression:"address.department"}}),t._v(" "),e("v-text-field",{staticClass:"mt-3",attrs:{disabled:!t.canEdit("city"),label:"City*",hint:"Enter full city (or town/village) name, e.g. New York instead of NY",required:""},model:{value:t.address.city,callback:function(e){t.$set(t.address,"city",e)},expression:"address.city"}}),t._v(" "),e("v-text-field",{staticClass:"mt-3",attrs:{disabled:!t.canEdit("state"),label:"State / Region",hint:"Enter full state name, e.g. 'Arizona' instead of 'Ariz'",required:""},model:{value:t.address.state,callback:function(e){t.$set(t.address,"state",e)},expression:"address.state"}}),t._v(" "),e("v-text-field",{staticClass:"mt-3",attrs:{disabled:!t.canEdit("country"),label:"Country*",hint:"Enter full country name, e.g. 'United Kingdom' instead of 'UK'",required:"","error-messages":t.getValidationErrors("address","country")},model:{value:t.address.country,callback:function(e){t.$set(t.address,"country",e)},expression:"address.country"}})],1),t._v(" "),t.hideAuthors?t._e():e("v-col",{attrs:{cols:"6"}},[e("div",{staticClass:"mb-1"},[t._v("Authors")]),t._v(" "),e("v-menu",{attrs:{"offset-y":"","max-height":"80vh"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{color:"grey darken-2",width:"100%",dark:t.canAttachAuthors,disabled:!t.canAttachAuthors}},"v-btn",r,!1),i),[t._v("\n                            Link author "),e("v-icon",[t._v("mdi-chevron-down")])],1)]}}],null,!1,1398321516)},[t._v(" "),e("v-list",t._l(t.remainingAuthors,(function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return t.attachAuthor(n)}}},[n.displayName.length>1?e("v-list-item-title",{staticClass:"!black-text"},[t._v(t._s(n.displayName))]):e("v-list-item-title",[t._v(t._s(n.email))])],1)})),1)],1),t._v(" "),e("v-divider",{staticClass:"my-2"}),t._v(" "),e("div",{staticClass:"author-list"},t._l(t.attachedAuthors,(function(n,i){return e("div",{key:i,staticClass:"mb-1"},[e("AuthorListItem",{staticClass:"w-100",attrs:{author:n,showDelete:t.canEditAuthor(n)},on:{delete:function(e){return t.removeAttachedAuthor(n,i)}}})],1)})),0)],1)],1),t._v(" "),e("PJSaveChangesModal",{attrs:{text:"Save changes to affiliation?"},on:{save:t.save,discard:t.hide,cancel:t.toggleSaveConfirm},model:{value:t.saveConfirmOpen,callback:function(e){t.saveConfirmOpen=e},expression:"saveConfirmOpen"}})]},proxy:!0},{key:"buttons-left",fn:function(){return[t.showDeleteButton?e("v-btn",{staticClass:"mr-2",attrs:{color:"red darken-1",outlined:"",loading:t.deleting},on:{click:t.deleteConfirm}},[t._v("Delete Affiliation")]):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[t.deleting?t._e():e("v-btn",{attrs:{color:"primary",loading:t.saving,disabled:t.saving||!t.canSave},on:{click:t.save}},[t._v("Save")])]},proxy:!0}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}})};Ge._withStripped=!0;var We=n("/hMX"),Je=n("koCO");function Ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=oe()(t);if(e){var r=oe()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ae()(this,n)}}var Qe,Ke=function(t){ie()(n,t);var e=Ye(n);function n(t){var i;return Xt()(this,n),(i=e.call(this,t)).name=t?t.name:"",i.shortName=t?t.shortName:"",i.localName=t?t.localName:"",i.country=t?t.country:"",i}return ee()(n,null,[{key:"endpoints",get:function(){return{list:"institutions/"}}}]),n}(le.a);function ze(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ze(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Xe={"&":"&amp;","<":"&lt;",">":"&gt;"},tn={mixins:[Ie.a],components:{AuthorListItem:ye,IndieResearcherInfo:ke},validations:{address:{country:{required:je.required}}},data:function(){return{changed:!1,open:!1,address:{},saving:!1,deleting:!1,authorMenuOpen:!1,attachedAuthors:[],removedAuthors:[],hideAuthors:!1,saveConfirmOpen:!1,institutionSearch:"",institutionSuggestions:[],showIndieResearcherInfo:!1}},computed:{authors:function(){return this.$store.state.articleModel.authors.all},remainingAuthors:function(){var t=this;return this.authors.filter((function(e){for(var n=0;n<t.attachedAuthors.length;n++)if(e.apiId==t.attachedAuthors[n].apiId)return!1;return!0}))},title:function(){return this.address.id?"Affiliation edit":"Add Affiliation"},showDeleteButton:function(){return!this.saving&&this.address.id&&this.address.allowedActions.self&&this.address.allowedActions.self.delete},canSave:function(){if(this.address.id)return this.address.allowedActions.hasOwnProperty("self")&&this.address.allowedActions.self.updateResource;var t=this.$store.state.articleModel.article;return t.allowedActions.hasOwnProperty("authorAddresses")&&t.allowedActions.authorAddresses.createResource},canAttachAuthors:function(){var t=this;return this.remainingAuthors.findIndex((function(e){return t.canEditAuthor(e)}))>-1},findMatchingAddress:function(){var t,e=this.address.addressHash,n=ze(this.$store.state.articleModel.affiliations.all);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e.toLowerCase()===i.addressHash.toLowerCase())return i}}catch(t){n.e(t)}finally{n.f()}return null}},methods:{genFilteredText:function(t){var e=this.getMaskedCharacters(t),n=e.start,i=e.middle,r=e.end;return e.found?"".concat(this.escapeHTML(n)).concat(this.genHighlight(i)).concat(this.escapeHTML(r)):"".concat(this.escapeHTML(n)).concat(this.escapeHTML(i)).concat(this.escapeHTML(r))},genHighlight:function(t){return'<span style="background-color: yellow; color: black;">'.concat(this.escapeHTML(t),"</span>")},escapeHTML:function(t){return t.replace(/[&<>]/g,(function(t){return Xe[t]||t}))},getMaskedCharacters:function(t){var e=(this.institutionSearch||"").toString().toLocaleLowerCase(),n=t.toLocaleLowerCase().indexOf(e);if(n<0)return{start:t,middle:"",end:""};return{start:t.slice(0,n),middle:t.slice(n,n+e.length),end:t.slice(n+e.length),found:!0}},canEdit:function(t){return!this.address.id||this.address.allowedActions.hasOwnProperty(t)&&this.address.allowedActions[t].update},canEditAuthor:function(t){return t.allowedActions.hasOwnProperty("addresses")&&t.allowedActions.addresses.update},reset:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.address=new ce.a,setTimeout((function(){t.changed=!1}),500),this.authorMenuOpen=!1,this.attachedAuthors=[],this.deleting=!1,this.hideAuthors=!!e.hideAuthors&&e.hideAuthors,this.showIndieResearcherInfo=!!e.showIndieResearcherInfo&&e.showIndieResearcherInfo,this.removedAuthors=[],this.showValidationErrors=!1,this.clearServerValidationErrors()},showAddMode:function(t){var e=this;this.reset(t),this.open=!0,setTimeout((function(){e.$refs.institutionInput.focus()}),200)},showEditMode:function(t){var e=this;this.reset(),this.address=Object.assign(this.address,t),this.authors.forEach((function(n){n.addresses.forEach((function(i){t.apiId==i.apiId&&e.attachedAuthors.push(n)}))})),this.open=!0},hide:function(){this.open=!1,this.address.id&&this.$router.replace({name:"ManuscriptAuthors"})},toggleAuthorMenuOpen:function(){this.authorMenuOpen=!this.authorMenuOpen},attachAuthor:function(t){this.attachedAuthors.push(t),this.authorMenuOpen=!1;for(var e=0;e<this.removedAuthors.length;e++)if(this.removedAuthors[e].id==t.id){this.removedAuthors.splice(e,1);break}},removeAttachedAuthor:function(t,e){this.removedAuthors.push(t),this.attachedAuthors.splice(e,1)},deleteConfirm:function(){var t=this;this.showConfirmModal({vuetify:!0,question:"Are you sure you want to delete this affiliation?",confirmLabel:"Delete Affiliation",confirmColor:"red",callback:function(e){e&&t.deleteAddress()}})},deleteAddress:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.deleting=!0,e.prev=1,e.next=4,t.address.delete();case 4:t.$store.commit("articleModel/authors/removeAffiliationFromAll",t.address),t.$store.commit("articleModel/affiliations/remove",t.address),t.hide(),t.$store.dispatch("notificationAlerts/addNotification",{title:"Affiliation Deleted",message:"The affiliation was deleted",type:"success"}),t.deleting=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t.$store.dispatch("notificationAlerts/addNotification",{title:"Error Deleting Affiliation",message:"The affiliation could not be deleted",type:"error"}),t.deleting=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},save:function(){var t=this;return s()(r.a.mark((function e(){var n,i,a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.showValidationErrors=!1,t.$v.$touch(),!t.$v.$invalid){e.next=5;break}return t.showValidationErrors=!0,e.abrupt("return");case 5:if(t.saving=!0,n=t.$router.currentRoute.params.id,i=!1,e.prev=8,a=null,!t.address.id){e.next=17;break}return e.next=13,t.address.update();case 13:a=e.sent,t.$store.commit("articleModel/affiliations/update",a),e.next=27;break;case 17:if(!(o=t.findMatchingAddress)){e.next=23;break}a=o,i=!0,e.next=27;break;case 23:return e.next=25,t.address.save({urlParams:{id:n}});case 25:a=e.sent,t.$store.commit("articleModel/affiliations/add",a);case 27:return l=a.apiId,e.next=30,Promise.all(t.attachedAuthors.map(function(){var t=s()(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return-1==e.addresses.findIndex((function(t){return t.apiId==l}))&&e.addresses.push(a),t.next=4,e.update();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 30:return e.next=32,Promise.all(t.removedAuthors.map(function(){var t=s()(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.addresses.findIndex((function(t){return t.apiId==l})))>-1&&e.addresses.splice(n,1),t.next=4,e.update();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 32:$.a.$emit(Ae.a.MANUSCRIPT_ADDRESS_ADDED_FROM_AUTHOR_MODAL,a),t.$store.dispatch("notificationAlerts/addNotification",{title:t.address.id||i?"Affiliation Updated":"Affiliation Created",message:t.address.id||i?"The affiliation was updated":"The affiliation was added to the article",type:"success"}),t.hide(),e.next=42;break;case 37:e.prev=37,e.t0=e.catch(8),console.log("Error saving affiliation",e.t0),e.t0.data.problemDetails&&(t.setServerValidationErrors("address",e.t0.data.problemDetails),t.showValidationErrors=!0),t.$store.dispatch("notificationAlerts/addNotification",{title:"Error",message:t.address.id?"The affiliation could not be updated":"The affiliation could not be added to the article",type:"error"});case 42:return e.prev=42,t.saving=!1,e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[8,37,42,45]])})))()},toggleSaveConfirm:function(){this.saveConfirmOpen=!this.saveConfirmOpen},checkForChangesBeforeClose:function(){this.changed?this.toggleSaveConfirm():this.hide()},searchInstitutions:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.institutionsLoading=!0;try{We.a.call({url:"institutions/?q="+t.institutionSearch}).then((function(e){var n=new Je.a(e.data,Ke);t.institutionSuggestions=n.items}))}catch(t){console.log("Error searching institutions",t)}case 2:case"end":return e.stop()}}),e)})))()},getSuggestionTitle:function(t,e){var n=t.genFilteredText(e.name);return e.shortName&&(n+=" (".concat(e.shortName,")")),n}},watch:(Qe={address:{handler:function(){this.changed=!0},deep:!0}},u()(Qe,"address.institution",(function(t){t&&t.name?(this.address.institution=t.name,this.address.institutionCanonical=t,this.address.country=t.country):this.address.institutionCanonical&&this.address.institutionCanonical&&this.address.institutionCanonical.name!=this.address.institution&&(this.address.institutionCanonical=null)})),u()(Qe,"attachedAuthors",{handler:function(){this.changed=!0}}),u()(Qe,"institutionSearch",(function(t){t&&t.length>3&&this.searchInstitutions()})),Qe),created:function(){this.reset()},mounted:function(){$.a.$on(Ae.a.MANUSCRIPT_SHOW_ADD_ADDRESS_MODAL,this.showAddMode),$.a.$on(Ae.a.MANUSCRIPT_SHOW_EDIT_ADDRESS_MODAL,this.showEditMode)},beforeDestroy:function(){$.a.$off(Ae.a.MANUSCRIPT_SHOW_ADD_ADDRESS_MODAL),$.a.$off(Ae.a.MANUSCRIPT_SHOW_EDIT_ADDRESS_MODAL)}},en=n("K13u"),nn=Object(B.a)(tn,Ge,[],!1,null,null,null),rn=nn.exports;kt()(nn,{VBtn:Ht.a,VCol:jt.a,VCombobox:en.a,VDivider:Ne.a,VIcon:$t.a,VList:Ve.a,VListItem:Ue.a,VListItemContent:qe.a,VListItemSubtitle:qe.b,VListItemTitle:qe.c,VMenu:Fe.a,VRow:It.a,VTextField:Be.a});var an=function(){var t=this,e=t._self._c;return e("PJModalVuetify",{scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"text-center"},[e("div",{staticClass:"text-uppercase mb-2"},[t._v("Confirm Institution")]),t._v(" "),e("h2",{staticClass:"mb-1"},[t._v("Does this author have an institutional email account?")])]),t._v(" "),e("v-row",{staticClass:"py-3"},[e("v-col",{attrs:{cols:"6"}},[e("v-sheet",{staticClass:"rounded px-4 py-4",staticStyle:{height:"100%"},attrs:{color:"amber lighten-5"}},[e("h3",{staticClass:"text-center mb-1"},[t._v("YES")]),t._v(" "),e("ol",[e("li",{staticClass:"mb-4"},[t._v("This author must compose an email in their "),e("b",[t._v("institutional email account")]),t._v(".")]),t._v(" "),e("li",{staticClass:"mb-4"},[t._v("Paste this text into the email:\n                            "),e("br"),e("b",[t._v("I am "+t._s(t.author.displayName)+" confirming my institutional email. Article ID: "+t._s(t.article.id))])]),t._v(" "),e("li",[t._v("Send email to: "),e("a",{attrs:{href:"mailto:"+t.companyEmails.EDITORIAL_SUPPORT}},[t._v(t._s(t.companyEmails.EDITORIAL_SUPPORT))])])])])],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-sheet",{staticClass:"rounded px-4 py-4",attrs:{color:"amber lighten-5"}},[e("h3",{staticClass:"text-center mb-1"},[t._v("NO")]),t._v(" "),e("div",[t._v("\n                        Upload (as a "),e("a",{attrs:{href:t.filesPageUrl,target:"_blank"}},[t._v("supplemental file")]),t._v(") a photo of one of the following:\n                        "),e("ul",{staticClass:"mt-4"},[e("li",{staticClass:"mb-4"},[e("b",[t._v("Institutional ID card")]),t._v(" - With name, affiliation and photo displayed.")]),t._v(" "),e("li",[e("b",[t._v("Signed department letter")]),t._v(" - On Institution-header paper and signed by department head.")])]),t._v(" "),e("div",{staticClass:"mt-4"},[t._v("\n                            Or "),e("a",{attrs:{href:"mailto:"+t.companyEmails.EDITORIAL_SUPPORT}},[t._v("email us a link ")]),t._v(" to their departmental webpage displaying the email: "),e("b",[t._v(t._s(t.author.email))]),t._v(".\n                        ")])])])],1)],1)]},proxy:!0}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}})};an._withStripped=!0;var sn={SUPPORT:"support@peerj.com",EDITORIAL_SUPPORT:"editorial.support@peerj.com"},on={data:function(){return{open:!1,author:{}}},computed:{user:function(){return this.$store.state.user.user},article:function(){return this.$store.state.articleModel.article},filesPageUrl:function(){return"/manuscripts/".concat(this.article.id,"/files#peerj-supplemental-container")}},methods:{show:function(t){this.open=!0,this.author=t}},created:function(){this.companyEmails=sn},mounted:function(){$.a.$on(Ae.a.MANUSCRIPT_SHOW_INSTITUTIONAL_EMAIL_MODAL,this.show)},beforeMount:function(){$.a.$off(Ae.a.MANUSCRIPT_SHOW_INSTITUTIONAL_EMAIL_MODAL)},beforeDestroy:function(){$.a.$off(Ae.a.MANUSCRIPT_SHOW_INSTITUTIONAL_EMAIL_MODAL)}},ln=Object(B.a)(on,an,[],!1,null,null,null),cn=ln.exports;kt()(ln,{VCol:jt.a,VRow:It.a,VSheet:ge.a});var un=Object.freeze({FEATURE_AUTHORS_PAGE:"new-authors-page"});function dn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function hn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dn(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pn=!1,fn=!1,mn={beforeRouteUpdate:function(t,e,n){t.params.authorId?this.showEditAuthorModalFromRoute(t):t.params.affiliationId&&this.showEditAddressModalFromRoute(t),n()},components:{ManuscriptSidebarLayout:Wt,SectionChecklist:Kt,AuthorListItem:ye,AddressListItem:we,VueDraggable:Nt.a,AddAuthorModal:$e,AddAddressModal:rn,NonInstitutionalEmailModal:cn},data:function(){return{authorsLoading:!1,authorOrderLoading:!1,affiliationsLoading:!1,keyOpen:!1,authorPopoverDisabled:!1}},computed:hn(hn({},Object(d.e)({article:function(t){return t.articleModel.article},affiliations:function(t){return t.articleModel.affiliations.all}})),{},{authors:{get:function(){return this.$store.state.articleModel.authors.all},set:function(t){this.$store.commit("articleModel/authors/set",t)}},navSingleAuthorConfirm:function(){return 1==this.authors.length},articleId:function(){return this.$router.currentRoute.params.id},loading:function(){return this.authorsLoading+this.affiliationsLoading},orderedAffiliations:function(){var t=this,e=[];this.authors.forEach((function(t){t.addresses.forEach((function(t){e.includes(t.apiId)||e.push(t.apiId)}))}));var n=[];return e.forEach((function(e){t.affiliations.forEach((function(t){t.apiId==e&&n.push(t)}))})),this.affiliations.forEach((function(t){e.includes(t.apiId)||n.push(t)})),n},isStaff:function(){return this.$store.state.user.user.roles.includes("ROLE_STAFF")},isChecker:function(){return this.$store.state.user.user.roles.includes("ROLE_CHECKER")},oldUrl:function(){return this.$router.currentRoute.path+"staff"},approvalRequired:function(){return this.article.authorChanges.filter((function(t){return!t.isApproved})).length},approvalUrl:function(){return"/manuscripts/"+this.articleId+"/validate"},showCorrespondingWarning:function(){return!this.authors.filter((function(t){return t.corresponding})).length},showAddAuthor:function(){return this.article.allowedActions.authors.hasOwnProperty("createResource")&&this.article.allowedActions.authors.createResource},showAddAffiliation:function(){return this.article.allowedActions.authorAddresses.hasOwnProperty("createResource")&&this.article.allowedActions.authorAddresses.createResource},settingsUrl:function(){return"/manuscripts/"+this.articleId+"/settings"},continueRoute:function(){var t="";return this.article.allowedActions.hasOwnProperty("subjects")&&this.article.allowedActions.subjects.update&&(t="ManuscriptSubjects"),t},canEditAuthors:function(){return this.canEditAllAuthorProperties||this.canEditAuthorEmails},canEditAllAuthorProperties:function(){return this.authors.filter((function(t){return t._allowedActions.self.updateResource})).length>0},canEditAuthorEmails:function(){return this.authors.filter((function(t){return!t._allowedActions.givenName.update&&t._allowedActions.email.update})).length>0},showEqualAuthorsHint:function(){return this.authors.filter((function(t){return t.equalContrib})).length},canReorderAuthors:function(){return this.article._allowedActions.authors.order}}),methods:{toggleKey:function(){this.keyOpen=!this.keyOpen},getAuthors:function(){var t=this;return s()(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.authorsLoading=!0,e.prev=1,e.next=4,fe.list({urlParams:{id:t.articleId}});case 4:n=(n=e.sent).items.filter((function(t){return!(null==t.givenName||null==t.familyName)})),t.$store.commit("articleModel/authors/set",n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error getting authors",e.t0);case 12:return e.prev=12,t.authorsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))()},getAffiliations:function(){var t=this;return s()(r.a.mark((function e(){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.affiliationsLoading=!0,e.prev=1,e.next=4,ce.a.list({url:t.article.links.authorAddresses});case 4:n=e.sent,i=n.sortBy("department","asc"),t.$store.commit("articleModel/affiliations/set",i.items),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error getting affiliations",e.t0);case 12:return e.prev=12,t.affiliationsLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))()},getAffiliationIds:function(t){var e=this,n=[];return t.addresses.forEach((function(t){e.orderedAffiliations.forEach((function(e,i){t.apiId==e.apiId&&n.push(i+1)}))})),n.sort((function(t,e){return t-e})),n.join(", ")},getAuthorError:function(t){return this.getAffiliationIds(t)?"":"No affiliations attached"},disableAuthorPopovers:function(){this.authorPopoverDisabled=!0},enableAuthorPopovers:function(){this.authorPopoverDisabled=!1},authorDragStart:function(t){this.originalAuthorsArray=l()(this.authors)},authorsMove:function(t,e){if(this.isStaff||this.isChecker)return!0;pn=!1,fn=!1;var n=t.draggedContext.element,i=t.draggedContext.index,r=t.draggedContext.futureIndex,a=this.authors[r],s=[0,1,this.authors.length-1];return n.equalContrib&&0==i&&this.authors.length>1&&!this.authors[1].equalContrib?(console.log("Equal first author must remain in position 1"),fn=!0,!1):a.equalContrib&&!n.equalContrib?(pn=!0,!1):!(0==r&&a.equalContrib&&!n.equalContrib)&&(!(n.equalContrib&&!s.includes(r))||(pn=!0,!1))},authorDragEnd:function(){var t=this;pn?(this.authors=this.originalAuthorsArray,this.$store.dispatch("notificationAlerts/addNotification",{title:"",message:"Equal first authors must be in first, second or last position",type:"warning"})):fn&&(this.authors=this.originalAuthorsArray,this.$store.dispatch("notificationAlerts/addNotification",{title:"",message:"An equal first author must remain in the first position",type:"warning"})),setTimeout((function(){t.authorPopoverDisabled=!1}),50)},authorsOrderUpdate:function(t){var e=this;return s()(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.authorOrderLoading=!0,n=e.authors.map((function(t){return t.links.self})),t.next=5,We.a.call({url:fe.endpoints.list+"order/",urlParams:{id:e.article.id},method:"POST",data:n});case 5:t.sent,t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),e.authors=e.originalAuthorsArray,e.$store.dispatch("notificationAlerts/addNotification",{title:"Error Saving Order",message:"The author order was not saved",type:"error"}),console.log(t.t0);case 13:return t.prev=13,e.authorOrderLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,8,13,16]])})))()},showAddAuthorModal:function(){$.a.$emit(Ae.a.MANUSCRIPT_SHOW_ADD_AUTHOR_MODAL)},showAddAddressModal:function(){$.a.$emit(Ae.a.MANUSCRIPT_SHOW_ADD_ADDRESS_MODAL)},showEditAuthorModal:function(t){$.a.$emit(Ae.a.MANUSCRIPT_SHOW_EDIT_AUTHOR_MODAL,t)},showEditAddressModal:function(t){$.a.$emit(Ae.a.MANUSCRIPT_SHOW_EDIT_ADDRESS_MODAL,t)},showEditAuthorModalFromRoute:function(t){var e=this.authors.find((function(e){return e.id==t.params.authorId}));e?this.showEditAuthorModal(e):(console.log("Author not found",t.params.authorId),this.$store.dispatch("notificationAlerts/addNotification",{title:"Error",message:"The author was not found",type:"error"}))},showEditAddressModalFromRoute:function(t){var e=this.orderedAffiliations.find((function(e){return e.id==t.params.affiliationId}));e?this.showEditAddressModal(e):(console.log("Affiliation not found",t.params.affiliationId),this.$store.dispatch("notificationAlerts/addNotification",{title:"Error",message:"The affiliation was not found",type:"error"}))},getEqualAuthorCount:function(){var t=this;return this.authors.filter((function(e){return e.equalContrib&&e.id!=t.authors[0].id})).length},updateFirstAuthorEqualContrib:function(t){var e=this.authors[0].getCopy();e.equalContrib=t,e.update(),this.$store.commit("articleModel/authors/update",e)},authorModalSaved:function(t){t.equalContrib&&!this.authors[0].equalContrib?this.updateFirstAuthorEqualContrib(!0):!t.equalContrib&&this.authors[0].equalContrib&&this.getEqualAuthorCount()<1&&this.updateFirstAuthorEqualContrib(!1),this.refreshArticle()},authorModalDeleted:function(t){this.authors.length&&this.authors[0].equalContrib&&this.getEqualAuthorCount()<1&&this.updateFirstAuthorEqualContrib(!1),this.refreshArticle()},refreshArticle:function(){var t=this;return s()(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.authorOrderLoading=!0,e.prev=1,e.next=4,it.a.get({urlParams:{id:t.articleId}});case 4:n=e.sent,t.$store.commit("articleModel/set",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Could not refresh author changes",e.t0);case 11:return e.prev=11,t.authorOrderLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))()},showSingleAuthorConfirm:function(t){var e=this;this.showConfirmModal({question:"You are the only author. Is this correct?",confirmLabel:"Yes",cancelLabel:"Add authors",confirmColor:"primary",vuetify:!0,callback:function(n){n?e.$router.push({name:t}):e.showAddAuthorModal()}})}},mounted:function(){this.getAuthors(),this.getAffiliations()},created:function(){this.authorshipCriteriaUrl="/about/policies-and-procedures/#authorship-criteria",this.checklistItems=["We will only use the information provided here, not information from source documents, for publication.",'Make changes to any <span class="red--text">authors highlighted in red</span> before you submit. Resolve author name issues highlighted in <span class="orange--text">yellow</span>.',"Check authors are in the correct order (drag to re-order).",{icon:"mdi-information",text:'You may add an author to edit this submission. Co-authors will receive an author confirmation email when you submit. You may then <a href="'.concat(this.settingsUrl,'">add a confirmed author as a submission admin</a>.')},{icon:"mdi-information",text:"Enter group authors on the declarations page."}],this.authorKeyItems=[{icon:"email",label:"Corresponding"},{entity:"&dagger;",label:"Deceased"},{icon:"asterisk",label:"Equal first author"},{icon:"pencil",label:"Admin"}],this.helpId=un.FEATURE_AUTHORS_PAGE},watch:{loading:function(){this.loading||(this.$router.currentRoute.params.authorId?this.showEditAuthorModalFromRoute(this.$router.currentRoute):this.$router.currentRoute.params.affiliationId&&this.showEditAddressModalFromRoute(this.$router.currentRoute))}}},vn=(n("ZZ8N"),n("zCDB")),gn=Object(B.a)(mn,Lt,[],!1,null,"9b6db10c",null),bn=gn.exports;kt()(gn,{VBtn:Ht.a,VChip:vn.a,VIcon:$t.a,VSheet:ge.a});var yn={beforeRouteEnter:function(t,e,n){window.location.pathname!==t.path&&(window.location.href=t.path)},render:function(){}},_n=Object(B.a)(yn,void 0,void 0,!1,null,null,null).exports,Sn={path:"/manuscripts/:id/",component:Dt,children:[{path:"authors",name:"ManuscriptAuthors",component:bn,meta:{title:"Authors",newFeatureNotificationData:{id:"new-authors-page",content:"Welcome to the new authors page!",expiry:new Date(2020,11,24)},scrollCancel:!0},children:[{path:":authorId",name:"AuthorEdit",meta:{title:"Edit Author",scrollCancel:!0}},{path:"affiliation/:affiliationId",name:"AffiliationEdit",meta:{title:"Edit Affiliation",scrollCancel:!0}}]},{path:"subject-areas",name:"ManuscriptSubjects",component:_n,meta:{title:"Subjects"}}]},wn=n("C+Gu"),Cn=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"border-bottom":"1px solid #ccc"}},[e("div",{staticClass:"container"},[e("v-row",[t.hideLogo?t._e():e("v-col",{staticClass:"mb-1",attrs:{cols:"12",sm:"1"}},[t.isStaffSearch?e("div",{staticClass:"staffSearchLogo error"},[t._v("Staff")]):e("img",{staticClass:"mt-n1 search-bar-logo",attrs:{src:t.searchBarLogo,alt:"Search"}})]),t._v(" "),e("v-col",{staticClass:"pl-sm-4 pl-xl-0",attrs:{cols:"12",sm:"7"}},[e("div",{staticClass:"d-flex justify-content-center"},[e("v-text-field",{attrs:{filled:"",dense:"","aria-label":"search input",id:"searchTerm",placeholder:t.placeholder,"append-icon":"mdi-magnify"},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}})],1),t._v(" "),t.hideFilters?e("div",{staticClass:"mb-4"}):e("app-search-nav")],1)],1)],1)]),t._v(" "),e("div",{staticClass:"container"},[e("v-row",[e("v-col",{attrs:{cols:"12",md:"8"}},[e("v-row",[e("v-col",{staticClass:"pl-sm-0 offset-sm-2",attrs:{cols:"12",sm:"7"}},[e("transition",{attrs:{name:"transition-slide-fade"}},[t.showMoreFilters?e("div",[t.showDropdownRow?e("div",{staticClass:"d-flex justify-space-between"},[e("div",[e("app-button-dropdown",{attrs:{param:"journal",title:"Journal",items:t.journals,selected:t.localParams.journal}})],1),t._v(" "),t.localParams.journal&&t.showReviewDropdown?e("div",[e("app-button-dropdown",{attrs:{param:"type",title:"Review status",items:t.reviewTypes,selected:t.localParams.type}})],1):t._e(),t._v(" "),t.showDisciplineDropdown?e("div",[e("app-button-dropdown",{attrs:{param:"discipline",title:"Discipline",items:t.disciplines,selected:t.localParams.discipline}})],1):t._e()]):t._e()]):e("div",[t.totalResults?e("div",[e("span",{staticClass:"text-overline",style:{color:"dark"===t.theme?"#eee":"#121212"}},[t._v(t._s(t.totalResults.toLocaleString())+" result"),1!=t.totalResults?e("span",[t._v("s")]):t._e()])]):t._e()])])],1)],1),t._v(" "),t.loading?e("div",{staticClass:"my-5 loading-container"},[t.loadMasonry?e("div",{staticClass:"card-columns"},t._l(10,(function(n,i){return e("div",{key:i,staticClass:"card mb-3 p-1"},[e("div",{staticClass:"skeleton-image loading"}),t._v(" "),e("p",{staticClass:"skeleton-search-line loading"}),t._v(" "),e("p",{staticClass:"skeleton-search-line loading"})])})),0):e("div",t._l(10,(function(n,i){return e("div",{key:i,staticClass:"mb-4 row"},[e("div",{staticClass:"col-2"},[e("div",{staticClass:"skeleton-search-label loading",class:t.altUserSkeleton()})]),t._v(" "),e("div",{staticClass:"col-10"},[e("h3",{staticClass:"skeleton-search-title loading",staticStyle:{width:"85%"}}),t._v(" "),e("p",{staticClass:"skeleton-search-line loading",staticStyle:{width:"95%"}}),t._v(" "),e("p",{staticClass:"skeleton-search-line loading",staticStyle:{width:"40%"}}),t._v(" "),e("p",{staticClass:"skeleton-search-line loading",staticStyle:{width:"70%"}})])])})),0)]):t.results.length?e("div",[t.loadMasonry?e("div",{staticClass:"mt-4"},[e("v-row",t._l(t.results,(function(n,i){return e("v-col",{key:n.type+i,staticClass:"d-flex child-flex",attrs:{cols:"6",sm:"4"}},[e("app-search-result",{attrs:{result:n,subjects:t.subjectFilterList,tags:t.tagFilterList,loadMasonry:t.loadMasonry,isStaffSearch:t.isStaffSearch}})],1)})),1)],1):e("div",t._l(t.results,(function(n,i){return e("app-search-result",{key:n.type+i,staticClass:"mt-4",attrs:{result:n,subjects:t.subjectFilterList,tags:t.tagFilterList,loadMasonry:t.loadMasonry,isStaffSearch:t.isStaffSearch}})})),1),t._v(" "),t.pages>1?e("v-pagination",{staticClass:"my-12",attrs:{color:"primary",length:t.pages,"total-visible":8,"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},on:{input:t.paginationClicked},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1):e("div",[e("NoResultsMessage",{on:{clearReload:function(e){return t.clearSearchTermReload()}}})],1)],1),t._v(" "),e("v-col",{attrs:{cols:"12",md:"4"}},[e("div",{staticClass:"mt-n0 mb-4 text-right"},[t.hasFiltersAvailable?e("v-btn",{staticClass:"mr-1",attrs:{small:"",elevation:"0",color:t.hasMoreFiltersSet()?"secondary":""},on:{click:function(e){t.showMoreFilters=!t.showMoreFilters}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-filter")]),t._v(" More filters")],1):t._e(),t._v(" "),t.showSubjectModalButton?e("v-btn",{staticClass:"py-1 px-2",attrs:{small:"",elevation:"0"},on:{click:t.showSubjectsModal}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-tag-text-outline")]),t._v(" Subjects")],1):t._e()],1),t._v(" "),e("app-search-side-bar",{attrs:{loading:t.loading,showMoreFilters:t.showMoreFilters,"query-params":t.localParams,aggSections:t.aggSections,subjectFilters:t.subjectFilterList,highlightCollection:t.highlightCollection,tagFilters:t.tagFilterList}})],1)],1)],1)])};Cn._withStripped=!0;var On=n("sEfC"),En=n.n(On),An=n("O0D+"),Tn=function(){var t=this,e=t._self._c;return e("div",[e("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{outlined:"",small:"",block:"",color:t.selected?"primary":"secondary"}},"v-btn",r,!1),i),[t.selected?e("span",[t._v(t._s(t.options[t.options.findIndex((function(e){return e.slug==t.selected}))].title))]):e("span",[t._v(t._s(t.title))]),e("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}])},[t._v(" "),e("v-list",{attrs:{dense:""}},t._l(t.options,(function(n,i){return e("v-list-item",{key:i,on:{click:function(e){return e.preventDefault(),t.emitClick(n.slug)}}},[t.selected?e("v-list-item-icon",[t.selected===n.slug?e("v-icon",{attrs:{color:"primary"}},[t._v("mdi-check-circle")]):e("span",[t._v(" ")])],1):t._e(),t._v(" "),e("v-list-item-title",[t._v(t._s(n.name))])],1)})),1)],1)],1)};Tn._withStripped=!0;var Pn={props:{param:String,title:String,items:{},selected:String|Number},data:function(){return{show:!1}},beforeDestroy:function(){document.removeEventListener("click",this.closeDropdown)},methods:{closeDropdown:function(t){this.$el.contains(t.target)||(this.show=!1)},dropdownClicked:function(){this.show=!this.show,document.addEventListener("click",this.closeDropdown)},emitClick:function(t){this.show=!1,document.removeEventListener("click",this.closeDropdown),t!==this.selected&&$.a.$emit(An.a.SEARCH_QUERY_PARAM_CHANGE,{param:this.param,val:t})}},computed:{options:function(){return this.items}}},xn=(n("cKyj"),n("NMP6")),kn=Object(B.a)(Pn,Tn,[],!1,null,"1aed696c",null),jn=kn.exports;kt()(kn,{VBtn:Ht.a,VIcon:$t.a,VList:Ve.a,VListItem:Ue.a,VListItemIcon:xn.a,VListItemTitle:qe.c,VMenu:Fe.a});var In=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"nav pj-nav-search-row d-flex justify-space-between pl-0"},[t._l(t.searchNavRow,(function(n,i){return e("li",{key:i,staticClass:"nav-item mr-0 mr-sm-n1 main-search-nav",class:[{"pj-search-li-active":n.active},n.breakpoint]},[e("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var r=i.hover;return[e("div",{staticStyle:{position:"relative"}},[e("v-expand-transition",[n.count&&r?e("div",{staticClass:"transition-fast-in-fast-out badge-count-reveal",staticStyle:{height:"100%"}},[e("v-chip",{attrs:{color:"primary","x-small":""}},[t._v(t._s(n.count))])],1):t._e()]),t._v(" "),e("a",{staticClass:"pl-0 pr-md-1 text-decoration-none",class:n.class,style:{color:"dark"===t.theme?"#eee":"#121212"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.searchNavClicked(n)}}},[e("v-icon",{domProps:{textContent:t._s(n.mdi)}}),t._v(" "+t._s(n.title)+"\n            ")],1)],1)]}}],null,!0)})],1)})),t._v(" "),e("div",{staticClass:"d-flex"},[t.defaultType?t._e():e("div",[e("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{text:"",small:""}},"v-btn",r,!1),i),[e("v-icon",[t._v("mdi-dots-vertical")]),t._v(" More\n              ")],1)]}}],null,!1,3222866794)},[t._v(" "),e("v-list",t._l(t.moreNav,(function(n,i){return e("v-list-item",{key:i,class:n.class,on:{click:function(e){return e.preventDefault(),t.searchNavClicked(n)}}},[e("v-list-item-icon",[e("v-icon",{domProps:{textContent:t._s(n.mdi)}})],1),t._v(" "),e("v-list-item-title",[t._v(t._s(n.title)+" "),n.count?e("v-chip",{attrs:{"x-small":""}},[t._v(t._s(n.count))]):t._e()],1)],1)})),1)],1)],1),t._v(" "),e("div",[e("v-menu",{attrs:{"open-on-hover":"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",small:""}},"v-btn",r,!1),i),[e("v-icon",[t._v("mdi-help-box")])],1)]}}])},[t._v(" "),e("v-card",[e("v-card-title",[t._v("Search modifiers")]),t._v(" "),e("v-list",t._l(t.searchHelp,(function(n,i){return e("v-list-item",{key:i,attrs:{"three-line":""}},[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(n.title))]),t._v(" "),e("v-list-item-subtitle",{domProps:{innerHTML:t._s(n.subtitle)}})],1)],1)})),1)],1)],1)],1)])],2)};function Rn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}In._withStripped=!0;var Ln={name:"SearchNav.vue",data:function(){return{moreNav:[],searchHelp:[{title:"Must include word",subtitle:'Put <span class="blue--text text--darken-1">+</span> in front of word. For example, <span class="blue--text text--darken-1">+human</span>'},{title:"Exclude a word",subtitle:'Put <span class="blue--text ext--darken-1">-</span> in front of word. For example, <span class="blue--text text--darken-1">genetics -plant</span>'},{title:"Search for exact word phrase",subtitle:'Put quotes around word or phrase. For example, <span class="blue--text text--darken-1">"human genetics"</span>'}],showMoreDropdown:!1}},beforeDestroy:function(){document.removeEventListener("click",this.closeDropdown)},computed:Dn(Dn({},Object(d.e)("search",["aggs","searchParams","localParams","defaultType","path","tidyQuery"])),{},{moreNavItemTypes:function(){var t=[],e=this.searchParams.CONFIG_SEARCH_NAV_ROW;for(var n in e)e[n].isMoreDropdownItem&&t.push(e[n].queryType);return t},searchNavRow:function(){var t=this.aggs,e=this.localParams.type;this.moreNav=[];var n=Object.assign({},this.searchParams.CONFIG_SEARCH_NAV_ROW);if(this.defaultType?n=u()({All:n.All},this.defaultType,n[this.defaultType]):n.All.active=!e||!this.searchParams.ES_QUERY_TYPES.includes(e),!this.defaultType){var i=[];t.type&&(i=t.type),t.editor&&t.editor.buckets&&(i=i.concat(t.editor.buckets)),n=this.fillNavSearchItems(n,i,e)}return this.defaultType&&(n[this.defaultType].active=!0,n.All.active=!1),n}}),methods:{closeDropdown:function(t){this.$el.contains(t.target)||(this.showMoreDropdown=!1)},dropdownClicked:function(){this.showMoreDropdown=!this.showMoreDropdown,document.addEventListener("click",this.closeDropdown)},fillNavSearchItems:function(t,e,n){var i=this.moreNavItemTypes;for(var r in t)if("All"!==r){var a=t[r],s=0;for(var o in e){var l=e[o];l.key===r&&l.doc_count>0&&(s=parseInt(l.doc_count)),a.addbucketSource&&l.key===a.addbucketSource&&(s+=parseInt(l.doc_count))}if(a){if(a.breakpoint="",a.count=s.toLocaleString(),a.class=0===s?this.searchParams.SEARCH_NAV_ZERO_RESULT_CLASS:"",a.active=n&&a.queryType===n,!a.active&&a.displaySize){if(!~i.indexOf(n)||!a.isMoreDropdownSwappable){var c=Dn({},a);c.class+=" d-"+a.displaySize+"-none",this.moreNav.unshift(c)}a.breakpoint=" d-none d-"+a.displaySize+"-block"}~i.indexOf(n)&&a.isMoreDropdownSwappable&&(this.moreNav.push(a),delete t[r]),~i.indexOf(a.queryType)&&a.queryType!==n&&(this.moreNav.push(a),delete t[r])}}return t},searchNavClicked:function(t){this.showMoreDropdown=!1,document.removeEventListener("click",this.closeDropdown),this.$store.dispatch("search/updatePath",t),this.$store.dispatch("search/updateParam",{param:"type",val:t.queryType}),this.$router.push({path:this.path,query:this.tidyQuery})}}},Mn=(n("aoHw"),n("B4nN")),Nn=n("zoeD"),Vn=Object(B.a)(Ln,In,[],!1,null,"1dab6332",null),Un=Vn.exports;kt()(Vn,{VBtn:Ht.a,VCard:De.a,VCardTitle:Le.d,VChip:vn.a,VExpandTransition:Mn.a,VHover:Nn.a,VIcon:$t.a,VList:Ve.a,VListItem:Ue.a,VListItemContent:qe.a,VListItemIcon:xn.a,VListItemSubtitle:qe.b,VListItemTitle:qe.c,VMenu:Fe.a});var qn=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"pl-4 pb-4"},[e("search-selected-filters",{attrs:{queryParams:t.localParams,subjectFilters:t.subjectFilters,tagFilters:t.tagFilters}})],1),t._v(" "),e("transition",{attrs:{name:"transition-slide-fade"}},[t.showMoreFilters?e("div",[t.showRevisionFilters?e("div",[e("div",{staticClass:"text-h6 pl-4 mb-3"},[t._v("Revision number")]),t._v(" "),e("v-row",{staticClass:"mb-4 pl-4"},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Min"},model:{value:t.revisionNumberGte,callback:function(e){t.revisionNumberGte=t._n(e)},expression:"revisionNumberGte"}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Max"},model:{value:t.revisionNumberLte,callback:function(e){t.revisionNumberLte=t._n(e)},expression:"revisionNumberLte"}})],1)],1)],1):t._e(),t._v(" "),t.showVersionFilters?e("div",[e("div",{staticClass:"text-h6 pl-4 mb-3"},[t._v("Version number")]),t._v(" "),e("v-row",{staticClass:"mb-4 pl-4"},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Min"},model:{value:t.versionNumberGte,callback:function(e){t.versionNumberGte=t._n(e)},expression:"versionNumberGte"}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Max"},model:{value:t.versionNumberLte,callback:function(e){t.versionNumberLte=t._n(e)},expression:"versionNumberLte"}})],1)],1)],1):t._e(),t._v(" "),t.showCitationFilter?e("div",[e("div",{staticClass:"text-h6 pl-4 mb-3"},[t._v("Citations")]),t._v(" "),e("v-row",{staticClass:"mb-4 pl-4"},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Min"},model:{value:t.citationsGte,callback:function(e){t.citationsGte=t._n(e)},expression:"citationsGte"}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Max"},model:{value:t.citationsLte,callback:function(e){t.citationsLte=t._n(e)},expression:"citationsLte"}})],1)],1)],1):t._e(),t._v(" "),t.showDownloadsFilter?e("div",[e("div",{staticClass:"text-h6 pl-4 mb-3"},[t._v("Downloads")]),t._v(" "),e("v-row",{staticClass:"mb-4 pl-4"},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Min"},model:{value:t.downloadsGte,callback:function(e){t.downloadsGte=e},expression:"downloadsGte"}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Max"},model:{value:t.downloadsLte,callback:function(e){t.downloadsLte=e},expression:"downloadsLte"}})],1)],1)],1):t._e(),t._v(" "),t.showVotesFilter?e("div",[e("div",{staticClass:"text-h6 pl-4 mb-3"},[t._v("Votes")]),t._v(" "),e("v-row",{staticClass:"mb-4 pl-4"},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Min"},model:{value:t.votesGte,callback:function(e){t.votesGte=t._n(e)},expression:"votesGte"}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Max"},model:{value:t.votesLte,callback:function(e){t.votesLte=t._n(e)},expression:"votesLte"}})],1)],1)],1):t._e(),t._v(" "),t.showAnswersFilter?e("div",[e("div",{staticClass:"text-h6 pl-4 mb-3"},[t._v("Answers")]),t._v(" "),e("v-row",{staticClass:"mb-4 pl-4"},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Min"},model:{value:t.answersGte,callback:function(e){t.answersGte=t._n(e)},expression:"answersGte"}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{staticClass:"col-12",attrs:{filled:"",dense:"",type:"number",placeholder:"Max"},model:{value:t.answersLte,callback:function(e){t.answersLte=t._n(e)},expression:"answersLte"}})],1)],1)],1):t._e(),t._v(" "),t.showPublicationFilters?e("div",{staticClass:"mb-12"},[e("div",{staticClass:"text-h6 pl-4 mb-3"},[t._v("Published Years")]),t._v(" "),e("v-row",{staticClass:"mb-4 pl-4"},[e("v-col",{attrs:{cols:"6"}},[e("app-button-dropdown",{attrs:{param:"published-gte",title:"From",items:t.publicationYears,selected:t.localParams["published-gte"]},on:{click:t.updateParams}})],1),t._v(" "),e("v-col",{attrs:{cols:"6"}},[e("app-button-dropdown",{attrs:{param:"published-lte",title:"Until",items:t.publicationYears,selected:t.localParams["published-lte"]},on:{click:t.updateParams}})],1)],1)],1):t._e(),t._v(" "),e("v-divider",{staticClass:"mb-8"})],1):t._e()]),t._v(" "),e("div",{staticClass:"my-8"},t._l(t.percentileAggs,(function(t,n){return e("search-agg-percentile",{key:n,staticClass:"mb-2",attrs:{aggPercentile:t}})})),1),t._v(" "),t.loading?t._e():e("div",[Object.keys(t.highlightCollection).length>0?e("div",{staticClass:"mb-4 pl-lg-4"},[e("v-card",{staticClass:"mx-auto",attrs:{flat:""}},[e("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:t.highlightCollection.image,alt:t.highlightCollection.title}},[e("v-card-title",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.4)"}},[t._v("Related PeerJ Collection")])],1),t._v(" "),e("v-card-text",[e("p",{directives:[{name:"markdown",rawName:"v-markdown",value:t.highlightCollection.summaryText,expression:"highlightCollection.summaryText"}]})]),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{href:t.highlightCollection.fullPath,text:"",block:"",color:"primary"}},[t._v("See the collection")])],1)],1)],1):t._e(),t._v(" "),e("div",t._l(t.aggSections,(function(n,i,r){return e("app-aggs",{key:i,attrs:{aggs:n.aggs,title:n.title,date:n.date,alwaysCreateModal:n.alwaysCreateModal,param:i,limit:n.limit,showMoreTitle:n.showMoreTitle,subjectFilters:t.subjectFilters,tagFilters:t.tagFilters,index:r}})})),1)])],1)};qn._withStripped=!0;var Fn=n("Vckv"),Bn=function(){var t=this,e=t._self._c;return e("div",[t._l(t.singleQueryChips,(function(n,i){return e("v-chip",{key:i+n.value,staticClass:"mr-1 mb-1",attrs:{small:"",color:n.color},on:{click:function(e){return t.emitClick({param:n.name})}}},[t._v(t._s(n.value)),e("v-icon",{attrs:{right:"",small:"","aria-label":"remove ".concat(n.label," filter")}},[t._v("mdi-close-circle")])],1)})),t._v(" "),t._l(t.numberFiltersActive,(function(n,i){return e("v-chip",{key:"num",staticClass:"mr-1 mb-1",attrs:{small:"",color:"primary"},on:{click:function(e){return t.emitClick({param:n})}}},[t._v(t._s(t.numberParams[n].label)+" "+t._s(t.queryParams[n])+" "),e("v-icon",{attrs:{right:"",small:"","aria-label":t.numberParams[n].aria}},[t._v("mdi-close-circle")])],1)})),t._v(" "),e("div",t._l(t.subjectFilters,(function(n,i){return e("v-chip",{key:i+"sub",staticClass:"mr-1 mb-1",attrs:{small:"",color:"success darken-1"},on:{click:function(e){return e.preventDefault(),t.emitClick({param:"subject",val:n})}}},[t._v(t._s(t._f("formatString")(n))+" "),e("v-icon",{attrs:{right:"",small:"","aria-label":"remove subject filter"}},[t._v("mdi-close-circle")])],1)})),1),t._v(" "),e("div",t._l(t.tagFilters,(function(n,i){return e("v-chip",{key:i+"tag",staticClass:"mr-1 mb-1",attrs:{small:"",color:"deep-orange white--text"},on:{click:function(e){return e.preventDefault(),t.emitClick({param:"tag",val:n})}}},[t._v(t._s(t._f("formatString")(n))+" "),e("v-icon",{attrs:{right:"",small:"","aria-label":"remove tag filter"}},[t._v("mdi-close-circle")])],1)})),1)],2)};function Hn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Bn._withStripped=!0;var Gn={"version-number-gte":{paramName:"version-number-gte",label:"Version # >=",aria:"remove version # gte filter"},"version-number-lte":{paramName:"version-number-lte",label:"Version # <=",aria:"remove version # lte filter"},"revision-number-gte":{paramName:"revision-number-gte",label:"Revision # >=",aria:"remove revision # gte filter"},"revision-number-lte":{paramName:"revision-number-lte",label:"Revision # <=",aria:"remove revision # lte filter"},"downloads-gte":{paramName:"downloads-gte",label:"Downloads >=",aria:"remove downloads gte filter"},"downloads-lte":{paramName:"downloads-lte",label:"Downloads <=",aria:"remove downloads lte filter"},"citations-gte":{paramName:"citations-gte",label:"Citations >=",aria:"remove citations gte filter"},"citations-lte":{paramName:"citations-lte",label:"Citations <=",aria:"remove citations lte filter"},"published-gte":{paramName:"published-gte",label:"Year >=",aria:"remove year published gte filter"},"published-lte":{paramName:"published-lte",label:"Year <=",aria:"remove year published lte filter"},"votes-gte":{paramName:"votes-gte",label:"Votes >=",aria:"remove votes gte filter"},"votes-lte":{paramName:"votes-lte",label:"Votes <=",aria:"remove votes lte filter"},"answers-gte":{paramName:"answers-gte",label:"Answers >=",aria:"remove answers gte filter"},"answers-lte":{paramName:"answers-lte",label:"Answers <=",aria:"remove answers lte filter"}},Wn={props:{queryParams:Object,subjectFilters:Array,tagFilters:Array},data:function(){return{numberParams:Gn}},methods:{emitClick:function(t){$.a.$emit(An.a.SEARCH_QUERY_PARAM_CHANGE,t)},canDisplay:function(t){if(!this.queryParams[t])return!1;var e=this.searchParams.ALLOWED_TYPES_BY_PARAM,n=this.queryParams.type;return!n||!(!e[t]||!e[t].includes(n))},formatString:function(t){if(t)return"expertrxiv"===(t=t.replace(/-/g," "))&&(t="ExpertR𝛘iv"),t},formatTime:function(t){return this.searchParams.DATE_KEYS[t]}},computed:$n($n($n({},Object(d.c)("search",["hasNumberFilterActive","numberFiltersActive","journalDisplayName"])),Object(d.e)("search",["searchParams"])),{},{singleQueryChips:function(){var t=this;return[{name:"journal",label:"journal",color:"primary",value:this.journalDisplayName},{name:"section",label:"section",color:"primary",value:this.queryParams.section},{name:"discipline",label:"section",color:"primary",value:this.queryParams.discipline},{name:"hub",label:"hub",color:"primary",value:this.queryParams.hub},{name:"reviewer-status",label:"status",color:"primary",value:this.queryParams["reviewer-status"]},{name:"status",label:"status",color:"primary",value:this.queryParams.status},{name:"manuscriptType",label:"manuscript type",color:"primary",value:this.formatString(this.queryParams.manuscriptType)},{name:"faqType",label:"FAQ type",color:"dark",value:"FAQ – "+this.queryParams.faqType},{name:"assigned",label:"assigned",color:"red darken-1",value:this.queryParams.assigned},{name:"team",label:"team",color:"dark",value:this.queryParams.team+" Team"},{name:"help",label:"help",color:"success",value:this.formatString(this.queryParams.help)+" help"},{name:"assigned",label:"assigned",color:"red darken-1",value:this.queryParams.assigned},{name:"research",label:"research",color:"success",value:this.formatString(this.queryParams.research)},{name:"country",label:"country",color:"primary",value:this.queryParams.country},{name:"t",label:"date type",color:"primary",value:this.formatTime(this.queryParams.t)}].filter((function(e){return t.canDisplay(e.name)}))}}),filters:{formatString:function(t){return"expertrxiv"===(t=t.replace(/-/g," "))&&(t="ExpertR𝛘iv"),t}}},Jn=(n("2S71"),Object(B.a)(Wn,Bn,[],!1,null,"d854f232",null)),Yn=Jn.exports;kt()(Jn,{VChip:vn.a,VIcon:$t.a});var Qn=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"font-size":"12px"}},[e("v-simple-table",{attrs:{dense:""}},[e("caption",[t._v(t._s(t.title))]),t._v(" "),e("thead",[e("tr",[e("th",{staticClass:"success"},[t._v("5th")]),t._v(" "),e("th",[t._v("25th")]),t._v(" "),e("th",{staticClass:"grey"},[t._v("Median")]),t._v(" "),e("th",[t._v("75th")]),t._v(" "),e("th",{staticClass:"error"},[t._v("95th")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v(t._s(t._f("formatFloat")(t.percentiles["5.0"])))]),t._v(" "),e("td",[t._v(t._s(t._f("formatFloat")(t.percentiles["25.0"])))]),t._v(" "),e("td",[t._v(t._s(t._f("formatFloat")(t.percentiles["50.0"])))]),t._v(" "),e("td",[t._v(t._s(t._f("formatFloat")(t.percentiles["75.0"])))]),t._v(" "),e("td",[t._v(t._s(t._f("formatFloat")(t.percentiles["95.0"])))])])])])],1)};Qn._withStripped=!0;var Kn={props:{aggPercentile:Object},data:function(){return{}},computed:{percentileKey:function(){for(var t in this.aggPercentile)if(t.includes("-rank"))return t},title:function(){var t=this.percentileKey.replace(/-/g," ");return t.replace(/rank/g,"percentiles").replace(/days/g,"Days")},percentiles:function(){return this.aggPercentile[this.percentileKey].values}},filters:{formatFloat:function(t){return t.toFixed(1)}}},zn=n("H09D"),Zn=Object(B.a)(Kn,Qn,[],!1,null,"945a4662",null),Xn=Zn.exports;function ti(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ti(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}kt()(Zn,{VSimpleTable:zn.a});var ni,ii={name:"SearchSidebar.vue",components:{appButtonDropdown:jn,searchSelectedFilters:Yn,searchAggPercentile:Xn,appAggs:Fn.default},props:{loading:Boolean,showMoreFilters:Boolean,queryParams:Object,aggSections:Object,subjectFilters:Array,tagFilters:Array,highlightCollection:Object},mounted:function(){$.a.$on("paramsUpdated",this.updateParams)},beforeDestroy:function(){$.a.$off("paramsUpdated",this.updateParams)},computed:ei(ei({},Object(d.e)("search",["searchParams","aggs"])),{},{localParams:{get:function(){return this.queryParams}},versionNumberGte:{get:function(){return this.localParams["version-number-gte"]},set:function(t){var e=this,n={param:"version-number-gte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},versionNumberLte:{get:function(){return this.localParams["version-number-lte"]},set:function(t){var e=this,n={param:"version-number-lte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},revisionNumberGte:{get:function(){return this.localParams["revision-number-gte"]},set:function(t){var e=this,n={param:"revision-number-gte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},revisionNumberLte:{get:function(){return this.localParams["revision-number-lte"]},set:function(t){var e=this,n={param:"revision-number-lte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},citationsGte:{get:function(){return this.localParams["citations-gte"]},set:function(t){var e=this,n={param:"citations-gte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},citationsLte:{get:function(){return this.localParams["citations-lte"]},set:function(t){var e=this,n={param:"citations-lte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},downloadsGte:{get:function(){return this.localParams["downloads-gte"]},set:function(t){var e=this,n={param:"downloads-gte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},downloadsLte:{get:function(){return this.localParams["downloads-lte"]},set:function(t){var e=this,n={param:"downloads-lte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},votesGte:{get:function(){return this.localParams["votes-gte"]},set:function(t){var e=this,n={param:"votes-gte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},votesLte:{get:function(){return this.localParams["votes-lte"]},set:function(t){var e=this,n={param:"votes-lte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},answersGte:{get:function(){return this.localParams["answers-gte"]},set:function(t){var e=this,n={param:"answers-gte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},answersLte:{get:function(){return this.localParams["answers-lte"]},set:function(t){var e=this,n={param:"answers-lte",val:t};clearTimeout(ni),ni=setTimeout((function(){e.updateParams(n)}),700)}},showRevisionFilters:function(){return!!this.searchParams.REVISION_FILTER_TYPES&&this.searchParams.REVISION_FILTER_TYPES.includes(this.localParams.type)},showVersionFilters:function(){return!!this.searchParams.VERSION_FILTER_TYPES&&this.searchParams.VERSION_FILTER_TYPES.includes(this.localParams.type)},showPublicationFilters:function(){return this.searchParams.PUBLICATION_FILTER_TYPES.includes(this.localParams.type)},showCitationFilter:function(){return this.searchParams.CITATION_FILTER_TYPES.includes(this.localParams.type)},showDownloadsFilter:function(){return this.searchParams.DOWNLOAD_FILTER_TYPES.includes(this.localParams.type)},showAnswersFilter:function(){return this.searchParams.ANSWER_FILTER_TYPES.includes(this.localParams.type)},showVotesFilter:function(){return this.searchParams.VOTE_FILTER_TYPES.includes(this.localParams.type)},publicationYears:function(){var t=(new Date).getFullYear(),e=Array.from({length:t+1-2013},(function(t,e){return e+2013})).map((function(t){return{name:t,title:t,slug:t}}));return[].concat([{name:"Any year",title:"Any year",slug:"Any year"}],l()(e))},percentileAggs:function(){var t=[];for(var e in this.aggs)if(e.includes("-rank"))if(this.aggs[e][e])t.push(this.aggs[e]);else{var n={};n[e]=this.aggs[e],t.push(n)}return t}}),methods:{updateParams:function(t){$.a.$emit(An.a.SEARCH_QUERY_PARAM_CHANGE,t)}}},ri=n("rdoz"),ai=Object(B.a)(ii,qn,[],!1,null,"ded744a8",null),si=ai.exports;kt()(ai,{VBtn:Ht.a,VCard:De.a,VCardActions:Le.a,VCardText:Le.c,VCardTitle:Le.d,VCol:jt.a,VDivider:Ne.a,VImg:ri.a,VRow:It.a,VTextField:Be.a});var oi=n("9mcV"),li=function(){var t=this._self._c;return t("v-row",[t("v-col",{attrs:{cols:"10","offset-sm":"2"}},[t("v-card",{attrs:{elevation:"0"}},[t("v-card-title",[t("v-icon",{attrs:{left:""}},[this._v("mdi-emoticon-sad-outline")]),this._v(" Hmmm. We couldn't find anything.")],1),this._v(" "),t("v-card-subtitle",[this._v("Try a different search or modify any set filters.")])],1)],1)],1)};li._withStripped=!0;var ci={articles:"research articles",editor:"editors",user:"researchers",preprints:"preprints",figure:"figures"},ui={computed:{params:function(){return this.$store.state.search.localParams},typeDisplayName:function(){return ci[this.params.type]?ci[this.params.type]:null}},methods:{clearSearchTerm:function(){this.$emit("clearReload")}}},di=(n("IJjz"),Object(B.a)(ui,li,[],!1,null,"20f94ec3",null)),hi=di.exports;function pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pi(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}kt()(di,{VCard:De.a,VCardSubtitle:Le.b,VCardTitle:Le.d,VCol:jt.a,VIcon:$t.a,VRow:It.a});var mi=En()((function(t,e,n){t(e,n)}),300),vi={name:"SearchApp",components:{appButtonDropdown:jn,appSearchNav:Un,appSearchResult:oi.default,appSearchSideBar:si,NoResultsMessage:hi},props:{properties:Object,defaultType:{type:void 0|String,required:!1}},data:function(){return{searchTerm:"",searchError:"",placeholder:"Search",showMoreFilters:!1,reviewTypeSelected:0,staticUri:""}},created:function(){this.initSetup(),this.runQuery(this.currentQuery).then(this.scrollToTop(200))},beforeMount:function(){$.a.$off(An.a.SEARCH_QUERY_PARAM_CHANGE)},mounted:function(){this.initSetup(),$.a.$on(An.a.SEARCH_QUERY_PARAM_CHANGE,this.updateSearchParam)},beforeDestroy:function(){$.a.$off(An.a.SEARCH_QUERY_PARAM_CHANGE,this.updateSearchParam)},watch:{$route:function(){this.updatePathSettings(),this.hasQueryOrPathChange()&&this.updateLocalData(this.$route.query),this.runQuery(this.$route.query).then(this.scrollToTop(200))},"localParams.type":function(){var t=this;this.reviewTypes.some((function(e){return e.id===t.localParams.type}))&&(this.reviewTypeSelected=this.reviewTypes.map((function(t){return t.id})).indexOf(this.localParams.type))},searchTerm:function(t,e){t&&1===t.length||this.loading||(this.localParams.q=t,mi(this.doDebouncedSearch,t,this))}},computed:fi(fi(fi({},Object(d.c)("search",["aggSections","subjectFilterList","tagFilterList","disciplines","hasExtraFilterSet"])),Object(d.e)("search",["path","loading","page","searchParams","localParams","results","highlightCollection","pages","totalResults","journals","reviewTypes","hasTidyQuerySet","tidyQuery","loadMasonry","hideFilters","hideLogo"])),{},{currentQuery:function(){var t=this.tidyQueryParams();return this.page&&this.page>1&&(t.page=this.page),this.searchTerm=t.q,t},hasFiltersAvailable:function(){return this.searchParams.TYPES_SUPPORTING_NUM_FILTERS.includes(this.localParams.type)},searchBarLogo:function(){return this.staticUri+"spread-the-word/resources/logos/bio/peerj-bio-logo.svg"},showDropdownRow:function(){return["articles","preprints","figure","",null].includes(this.localParams.type)},showReviewDropdown:function(){return["articles","preprints","",null].includes(this.localParams.type)},showDisciplineDropdown:function(){return this.localParams.journal&&void 0!==this.disciplines&&this.disciplines.length>1},showSubjectModalButton:function(){return this.aggSections&&this.aggSections.subject},isStaffSearch:function(){return this.searchParams.IS_STAFF_SEARCH},searchBtnText:function(){return this.isStaffSearch?"Staff Search":"Search"}}),methods:fi(fi(fi({},Object(d.d)("search",["setPageNumber"])),Object(d.b)("search",["runQuery","updateLocalData"])),{},{doDebouncedSearch:function(t){this.updateSearchParam({param:"q",val:t})},initSetup:function(){var t=document.getElementById("wrap");t&&t.dataset.journals&&this.$store.commit("search/setJournals",JSON.parse(t.dataset.journals)),t&&t.dataset.staticuri&&(this.staticUri=t.dataset.staticuri),t&&t.dataset.endpoint&&this.$store.commit("search/setEndpoint",t.dataset.endpoint),this.updateLocalData(this.properties),this.updatePathSettings()},updatePathSettings:function(){this.$store.commit("search/setRoutePath",this.$route.path),this.$store.commit("search/setStateDefaultType",this.defaultType)},tidyQueryParams:function(){return this.hasTidyQuerySet||this.$store.dispatch("search/updateTidyQuery"),this.tidyQuery},hasQueryOrPathChange:function(){return this.path!==this.$route.path||JSON.stringify(this.$route.query)!==JSON.stringify(this.currentQuery)},hasMoreFiltersSet:function(){return!!this.showMoreFilters||!(!this.hasFiltersAvailable||!this.hasExtraFilterSet)},paginationClicked:function(t){if(t!==this.page){this.setPageNumber(t);var e=this.tidyQueryParams();t&&t>1&&(e.page=t);try{this.$router.push({path:"",query:e})}catch(t){console.log("Problem handling route update after page click : ".concat(t,"."))}}},updateRouteHistory:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasQueryOrPathChange()){e.next=9;break}return e.prev=1,e.next=4,t.$router.push({path:t.path,query:t.currentQuery});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("Problem handling route update: ".concat(e.t0,"."));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))()},updateSearchParam:function(t){this.$store.dispatch("search/updateParam",t),this.updateRouteHistory()},altUserSkeleton:function(){return["editor","user"].includes(this.localParams.type)?"pj-user-skeleton":null},showSubjectsModal:function(){$.a.$emit(An.a.SHOW_MODAL,"subject")},clearSearchTermReload:function(){this.updateSearchParam({param:"q",val:""})}})},gi=(n("tNIs"),n("iR7P")),bi=Object(B.a)(vi,Cn,[],!1,null,"2e539fb5",null),yi=bi.exports;kt()(bi,{VBtn:Ht.a,VCol:jt.a,VIcon:$t.a,VPagination:gi.a,VRow:It.a,VTextField:Be.a});var _i={path:"",component:function(){return n.e(160).then(n.bind(null,"XnlK"))},children:[{name:"search",path:wn.a.CONFIG_SEARCH_NAV_ROW.All.path,component:yi,props:function(t){return{properties:t.query}}},{name:"staffSearch",path:"/search/staff",component:yi,props:function(t){return{properties:t.query}}},{path:"/articles",alias:"/research",component:yi,props:function(t){return{properties:t.query,defaultType:"Publication"}}},{path:"/preprints",component:yi,props:function(t){return{properties:t.query,defaultType:"Preprint"}}},{path:"/editors",alias:"/academic-editors",component:yi,props:function(t){return{properties:t.query,defaultType:"editor"}}},{path:"/users",alias:"/researchers",component:yi,props:function(t){return{properties:t.query,defaultType:"User"}}},{path:"/figures",component:yi,props:function(t){return{properties:t.query,defaultType:"Figure"}}},{path:"/questions/staff",alias:"/staff/questions",component:yi,props:function(t){return{properties:t.query,defaultType:"StaffQuestionAnnotation"}}},{path:"/questions",component:yi,props:function(t){return{properties:t.query,defaultType:"PublicQuestionAnnotation"}}},{path:"/answers",component:yi,props:function(t){return{properties:t.query,defaultType:"AnswerAnnotation"}}},{path:"/institutions",component:yi,props:function(t){return{properties:t.query,defaultType:"InstitutionPage"}}}]},Si=n("dwWe"),wi={id:null,content:null,notificationAlertElementId:"feature-notification-alert",dismissButtonId:"feature-notification-dismiss",get storageId(){return"feature-dismiss-"+this.id},get dismissed(){return Si.a.getItem(this.storageId)},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.content,i=t.expiry;this.clear();var r=(new Date).getTime();if(i&&r>i.getTime())return!1;this.id=e,this.content=n,this.dismissed||this.show()},clear:function(){var t=document.getElementById(this.notificationAlertElementId);t&&t.parentNode.removeChild(t)},show:function(){var t=document.createElement("div");t.id=this.notificationAlertElementId,t.className="alert",t.style="display: flex;background:#5dac53;border:0; border-radius: 0; color: white;text-shadow: none; font-size:20px; margin-top:-20px;",t.innerHTML='\n            <div class="container">\n                <div class="d-flex" style="align-items:center; justify-content:center;">\n                    <b>'.concat(this.content,'</b> \x3c!--<span class="ml-1" style="opacity:0.7">Email support@peerj.com for help if required.</span>--\x3e\n                    <button id="').concat(this.helpButtonId,'" type="button" class="btn btn-success btn-sm ml-5" style="').concat("\n            background: rgba(255,255,255,0.2);\n            border-color: rgba(0,0,0,0.3);\n            color: white;\n            padding: 4px 16px;\n            color: white;\n            text-transform: uppercase;\n            letter-spacing:1px;\n            outline: none !important;",'">Help</button>\n                </div>\n            </div>\n            <button id="').concat(this.dismissButtonId,'" type="button" class="btn" data-dismiss="alert" style="').concat("color: white; box-shadow: none; font-size:16px;background:transparent;border:0",'">\n                <i class="icon icon-remove"></i>\n            </button>\n        ');var e=document.getElementById("nav-pad");e.parentNode.insertBefore(t,e.nextSibling),document.getElementById(this.dismissButtonId).addEventListener("click",this.dismiss.bind(this)),document.getElementById(this.helpButtonId).addEventListener("click",this.helpClick.bind(this))},dismiss:function(){Si.a.setItem(this.storageId,1)},helpClick:function(){$.a.$emit(Ae.a.NEW_FEATURE_SHOW_HELP_MODAL,this.id)}};p.default.use(L.a);var Ci=new L.a({mode:"history",base:"/",scrollBehavior:function(t,e,n){var i={x:0,y:0};if(!t.hash){var r=document.getElementById(M.a.PEERJ_CORE_VUE_ROUTER_OUTLET_ID);return r&&(i={x:0,y:r.offsetTop-64}),!t.meta.scrollCancel&&!e.meta.scrollCancelBack&&(n||i)}var a=document.getElementById(t.hash.substring(1));a&&a.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},routes:[ht,yt,wt,At,Sn,_t,Ct,Et,_i,st,{path:"/submissions/:articleId/messages",component:at,meta:{title:"Messages"},children:[{path:"/",name:"ArticleMessages",component:X,meta:{title:"System Messages"}},{path:"external",name:"ArticleMessagesExternal",component:nt,meta:{title:"External Messages"}}]}]});Ci.beforeEach((function(t,e,n){t.meta.title&&(document.title="PeerJ - "+t.meta.title),t.meta.metaTags&&t.meta.metaTags.map((function(t){var e=document.createElement("meta");return Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])})),e})).forEach((function(t){return document.head.appendChild(t)})),t.meta.newFeatureNotificationData?wi.init(t.meta.newFeatureNotificationData):wi.clear(),n()})),Ci.afterEach((function(t,e){t.hash&&t.path!=e.path&&p.default.nextTick().then((function(){setTimeout((function(){var e=document.getElementById(t.hash.substring(1));e&&e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),400)}))})),p.default.mixin({beforeRouteLeave:function(t,e,n){window.itemObject&&delete window.itemObject,n()}});var Oi=Ci,Ei=n("qSUR"),Ai={Submit:"Submit",Reset:"Reset",Delete:"Delete","Yes, delete":"Yes, delete",Edit:"Edit","Are you sure you want to delete this item?":"Are you sure you want to delete this item?","No results":"No results",Close:"Close",Cancel:"Cancel","No, cancel":"No, cancel",Updated:"Updated",Field:"Field",Value:"Value",Filters:"Filters",Filter:"Filter","Data unavailable":"Data unavailable","Loading...":"Loading...",Deleted:"Deleted","Please, insert a value bigger than zero!":"Please, insert a value bigger than zero!","Please type something":"Please type something","Field is required":"Field is required","Records per page:":"Records per page:",filterTitle:"Collection title"};Object.assign(Ai,{"Add a comment. Markdown allowed.":"Add a comment. Markdown allowed.","Are you sure you want to delete this item?":"Are you sure you want to delete this item?",Cancel:"Cancel",Close:"Close","Data unavailable":"Data unavailable",Delete:"Delete",Deleted:"Deleted",Edit:"Edit",Field:"Field","Field is required":"Field is required",Filters:"Filters",Filter:"Filter",filterTitle:"Collection title","Loading...":"Loading...","No results":"No results","Please, insert a value bigger than zero!":"Please, insert a value bigger than zero!","Please type something":"Please type something","Records per page:":"Records per page:",Reset:"Reset",Submit:"Submit",Updated:"Updated",Value:"Value",Importance:"Importance",Quality:"Quality",Relevance:"Relevance",Status:"Status","Your recommendation":"Your recommendation"}),p.default.use(Ei.a);var Ti=new Ei.a({locale:Object({NODE_ENV:"production",API_BASE_URL:"/api/",BASE_URL:"/"}).VUE_APP_I18N_LOCALE||"en",fallbackLocale:Object({NODE_ENV:"production",API_BASE_URL:"/api/",BASE_URL:"/"}).VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:{en:Ai}}),Pi=n("WMpq"),xi=n("6HWo"),ki=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"z-index":"20000"},attrs:{id:t.elements.PEERJ_CORE_VUE_ROUTER_OUTLET_ID}},[t.isBetaTesting?e("Layout"):e("v-app",[e("v-main",{staticClass:"content mx-0 mx-md-2"},[e("snackbar",{staticClass:"mt-3",staticStyle:{"z-index":"30000"}}),t._v(" "),e("v-container",{staticClass:"mt-6 px-2",attrs:{fluid:t.$vuetify.breakpoint.lgAndDown}},[e("router-view")],1),t._v(" "),e("div",{staticClass:"flex-grow-1"}),t._v(" "),e("app-footer")],1)],1),t._v(" "),e("PJConfirmModalVuetify"),t._v(" "),e("PJConfirmModal"),t._v(" "),this.account.id?t._e():e("LoginModal")],1)};ki._withStripped=!0;var ji=function(){var t=this,e=t._self._c;return e("div",[e("v-breadcrumbs",{class:t.layoutClass,attrs:{items:t.items},scopedSlots:t._u([{key:"divider",fn:function(){return[e("v-icon",{attrs:{size:"22"}},[t._v("mdi-chevron-right")])]},proxy:!0}])})],1)};ji._withStripped=!0;var Ii={name:"Breadcrumb",props:["layoutClass"],data:function(){return{}},computed:{items:function(){for(var t=this.$route,e=t.path,n=t.matched,i=[{text:"Home",href:"/"}],r=n[n.length-1],a=0,s=n.length;a<s;a+=1){var o=n[a];if(o.path&&o.name){var l=o.name;try{r.path===o.path&&this.$route.meta&&this.$route.meta(this.$route).breadcrumbTitle&&(l=this.$route.meta(this.$route).breadcrumbTitle)}catch(t){console.log("Error loading route meta"),console.log(t)}i.push({text:l,disabled:o.path===e||r.path===o.path,href:o.path})}}return i}}},Ri=(n("y/dr"),n("K8WS")),Di=Object(B.a)(Ii,ji,[],!1,null,null,null),Li=Di.exports;function Mi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ni(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mi(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}kt()(Di,{VBreadcrumbs:Ri.a,VIcon:$t.a});var Vi={components:{Layout:function(){return n.e(166).then(n.bind(null,"+DNJ"))},AppFooter:function(){return n.e(47).then(n.bind(null,"HFME"))},LoginModal:function(){return n.e(113).then(n.bind(null,"1hPV"))},Breadcrumb:Li,Snackbar:n("2nGf").a},created:function(){},mounted:function(){this.imageSetter=this.getUserImageSrc,this.userRoleData&&this.preLoadMe(this.userRoleData)},data:function(){return{elements:M.a,drawer:null,layoutName:""}},computed:Ni({},Object(d.c)(["getThemeMode"])),methods:Ni({},Object(d.b)(["changeThemeLayout"]))},Ui=(n("Jctx"),n("dJbz")),qi=n("pSOK"),Fi=n("9sRW"),Bi=Object(B.a)(Vi,ki,[],!1,null,null,null),Hi=Bi.exports;kt()(Bi,{VApp:Ui.a,VContainer:qi.a,VMain:Fi.a});var $i=function(){var t=this,e=t._self._c;return e("PJVuetify",[e("div",{staticClass:"my-4"},[t.isLoading?e("v-progress-circular",{attrs:{indeterminate:"",size:"32"}}):t._e(),t._v(" "),t.visibleEditors&&t.visibleEditors.length>0?e("div",t._l(t.visibleEditors,(function(n,i){return e("UserImpactCard",{key:i,staticClass:"mb-2 editor-impact",attrs:{user:n,isEditorOfWork:n.id==t.editor,isAcademicEditor:n.editorOrAdvisor,title:n.id==t.editor?"Academic Editor":t.editorCardTitle,contributorAltTitle:"",showCardHeadings:0===i||1===i&&t.hasVisiblePaperEditor,subject:t.randomSubject,"show-subject":n.id!=t.editor&&t.showSubject,"subheading-subject":!t.randomSubject},on:{impactProfileClicked:t.onProfileClick}})})),1):t._e(),t._v(" "),t.visibleUsers&&t.visibleUsers.length>0?e("div",t._l(t.visibleUsers,(function(n,i){return e("UserImpactCard",{key:i,staticClass:"mb-2 author-impact",attrs:{user:n,title:t.userCardTitle,contributorAltTitle:"",showCardHeadings:0===i,subject:t.randomSubject,"show-subject":t.showSubject,"subheading-subject":!t.randomSubject},on:{impactProfileClicked:t.onProfileClick}})})),1):t._e()],1)])};$i._withStripped=!0;var Gi=n("9d2D"),Wi=n("wd/R"),Ji=n.n(Wi),Yi=function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"mx-auto",staticStyle:{"box-shadow":"none !important"},attrs:{elevation:"0"}},[e("v-list-item",{staticClass:"px-0",attrs:{"three-line":""}},[e("v-avatar",{staticClass:"mr-4",attrs:{size:"64"}},[e("img",{attrs:{src:t.userPhoto,alt:t.name}})]),t._v(" "),e("v-list-item-content",[t.showCardHeadings?e("div",{staticClass:"overline mb-2"},[t._v(t._s(t.computedTitle)),!t.subheadingSubject&&t.showSubject&&t.userSubject?e("span",[e("br"),t._v(t._s(t.userSubject))]):t._e()]):t._e(),t._v(" "),e("v-list-item-title",{staticClass:"headline"},[t._v(t._s(t.name))]),t._v(" "),t.institution?e("v-list-item-subtitle",[t._v(t._s(t.institution))]):t._e(),t._v(" "),t.subheadingSubject&&t.showSubject&&t.userSubject?e("v-list-item-subtitle",[t._v(t._s(t.userSubject))]):t._e(),t._v(" "),e("v-card-actions",{staticClass:"pl-0"},[e("v-btn",{staticClass:"mt-2 user-card-action-button",attrs:{color:"indigo",elevation:"0",outlined:"",plain:"",small:""},on:{click:t.sendToProfile}},[t._v("View profile")])],1)],1)],1)],1)};Yi._withStripped=!0;var Qi={name:"UserImpactCard",props:{user:Object,showCardHeadings:Boolean,isEditorOfWork:Boolean,isAcademicEditor:{type:String,required:!1},showSubject:Boolean,subheadingSubject:Boolean,contributorAltTitle:Boolean,subject:{type:String,required:!1},title:{type:String,required:!1,default:function(){return"Highly cited author"}}},data:function(){return{isDisabled:!1}},computed:{avatarWrapper:function(){return"avatar-wrapper"},userAvatar:function(){return"user-avatar"},computedTitle:function(){return this.isEditorOfWork?"Academic Editor":this.contributorAltTitle&&this.user.isContributor?this.isAcademicEditor?"Author & PeerJ Academic "+this.isAcademicEditor:"Author":this.title},userSubject:function(){return this.user.primarySubjectName?this.user.primarySubjectName:this.subject?this.subject:this.user.userSubjectNames&&this.user.userSubjectNames.length?this.user.userSubjectNames[this.randomNumber(0,this.user.userSubjectNames.length-1)]:null},name:function(){return this.user.givenName+" "+this.user.familyName},userPhoto:function(){return this.user.mediumPhotoUrl},institution:function(){return this.user.institution?this.user.institution:null},cardProperties:function(){return{"card-title":this.computedTitle,isEditorOfWork:this.isEditorOfWork,editorOrAdvisor:this.isAcademicEditor,isContributor:this.user.isContributor,"card-name":this.name,"card-profile":this.user.id,"card-institution":this.institution}}},methods:{sendToProfile:function(){this.isDisabled||(this.isDisabled=!0,this.$emit("impactProfileClicked",this.cardProperties))},randomNumber:function(t,e){return Math.floor(Math.random()*(e-t)+t)}}},Ki=(n("8lBm"),n("ghKu")),zi=Object(B.a)(Qi,Yi,[],!1,null,"17bd49a6",null),Zi=zi.exports;function Xi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xi(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}kt()(zi,{VAvatar:Ki.a,VBtn:Ht.a,VCard:De.a,VCardActions:Le.a,VListItem:Ue.a,VListItemContent:qe.a,VListItemSubtitle:qe.b,VListItemTitle:qe.c});var er=document.getElementById("peerj-vue-user-impact-widget"),nr={name:"UserWidget",mixins:[Gi.a],components:{UserImpactCard:Zi},data:function(){return{callNumber:0,title:"HIGHLY CITED",hideTitle:!1,stickyEditor:!1,editor:null,users:[],seenIds:[],showCardHeadings:!1,hasVisiblePaperEditor:!1,randomSubject:null,journal:null,section:null,publication:null}},mounted:function(){if(this.impactWidgetContainer&&this.$vuetify.breakpoint.lgAndUp){var t=this.impactWidgetContainer.getAttribute("data-section"),e=JSON.parse(this.impactWidgetContainer.getAttribute("data-subject")),n=JSON.parse(this.impactWidgetContainer.getAttribute("data-query")),i=this.impactWidgetContainer.getAttribute("data-min-cite"),r=this.impactWidgetContainer.getAttribute("data-title");r&&""!==r&&(this.title=r);var a=this.impactWidgetContainer.getAttribute("data-hide-title");a&&1==a&&(this.hideTitle=!0);var s=this.impactWidgetContainer.getAttribute("data-sticky-editor");s&&1==s&&(this.stickyEditor=!0);var o=this.impactWidgetContainer.getAttribute("data-editor");if(o&&""!==o&&(this.editor=o),this.stickyEditor&&this.editor&&(n.sticky=this.editor),"published-gte"in n||(n["published-gte"]=Ji()().year()-6),"citations-gte"in n||(n["citations-gte"]=i||3),"section"in n||""===t||null===t?"section"in n&&(this.section=n.section):n.section=this.section=t,!("subject"in n)&&e&&e.length>0){var l=this.randomNumberInRange(0,e.length-1);n["subject[]"]=this.randomSubject=e[l]}else"subject"in n&&(this.randomSubject=n.subject);"journal"in n&&(this.journal=n.journal),"key"in n&&(this.publication=n.key),Object.assign(this.filters,n),this.onUpdateOptions(),this.isLoading=!1}},computed:tr(tr(tr({},Object(d.c)("userImpact",{items:"list",find:"find"})),Object(h.c)("userImpact",{deletedItem:"deleted",error:"error",isLoading:"isLoading",resetList:"resetList",totalItems:"totalItems",view:"view"})),{},{impactWidgetContainer:function(){if(er)return er},showTitle:function(){return!this.showCardHeadings&&!this.hideTitle},showSubject:function(){return!0},allUsers:function(){return this.users.length||this.getUsers(),this.users},visibleEditors:function(){var t=this;if(this.allUsers)return this.allUsers.filter((function(e){return e.editorOrAdvisor||e.id==t.editor}))},visibleUsers:function(){var t=this;if(this.allUsers)return this.allUsers.filter((function(e){return null===e.editorOrAdvisor&&e.id!=t.editor}))},editorCardTitle:function(){var t,e=this.visibleEditors.length,n="";return this.randomSubject?(t="Similar Academic Editor",n="Similar Academic Editors"):(t="Highly cited Academic Editor",n="Highly cited Academic Editors"),this.editor||1===e?t:n},userCardTitle:function(){var t,e=this.visibleUsers.length,n="";return this.randomSubject?(t="Similar author & highly cited",n="Similar authors & highly cited"):(t="Highly cited author",n="Highly cited authors"),1===e?t:n}}),methods:tr(tr({},Object(d.b)("userImpact",{getPage:"fetchAll",deleteItem:"del",retrieve:"load"})),{},{onProfileClick:function(t){Object.assign(t,{"journal-slug":this.journal,"Article-section":this.section,publicationId:this.publication,"Publication Id":this.publication}),t.Subjects=this.randomSubject?[this.randomSubject]:[];var e={category:"user-impact-widget",action:"profile-view",label:t["card-title"]};this.gaTrack(e),window.location.href="/user/"+t["card-profile"]},getUsers:function(){var t=this;this.items&&this.items.length>0&&(this.stickyEditor&&this.editor?(this.items.forEach((function(e){e.id==t.editor&&(t.users.push(e),t.showCardHeadings=!0,t.hasVisiblePaperEditor=!0)})),this.randomUsers(2,this.editor)):this.randomUsers())},randomUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.items.length;if(1===n)return this.seenIds.push(0),void(this.items[0].id!=e&&this.users.push(this.items[0]));for((!t||t>n)&&(t=n);this.users.length<t&&this.seenIds.length<n&&this.callNumber<12;){var i=this.getRandomItem(n,e);i&&this.users.push(i)}},getRandomItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.callNumber>12)return null;this.callNumber+=1;var n=this.randomNumberInRange(0,t);return this.seenIds.includes(n)?this.getRandomItem(t,e):(this.seenIds.push(n),e&&this.items[n].id==e?this.getRandomItem(t):!this.items[n].smallPhotoUrl||this.items[n].smallPhotoUrl.includes("peerJ_icon_await_fade")?this.getRandomItem(t,e):this.items[n])},randomNumberInRange:function(t,e){return Math.floor(Math.random()*(e-t)+t)}})},ir=(n("THXi"),n("SQoD")),rr=Object(B.a)(nr,$i,[],!1,null,null,null),ar=rr.exports;kt()(rr,{VProgressCircular:ir.a});var sr=n("/CkT"),or=n("ZDqI"),lr=function(){var t=this,e=t._self._c;return e("PJModal",{ref:"modal",attrs:{title:"Add Staff Note",loading:t.saving,loadingText:"Saving..."},scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"row",staticStyle:{display:"flex"}},[e("div",{staticClass:"col-4"},[e("div",{staticClass:"header mb-1"},[t._v("Type")]),t._v(" "),e("div",{staticClass:"type-selection-container"},t._l(t.userAvailableNoteTypes,(function(n){return e("PJRadioButton",{key:n.name,staticClass:"mb-1",attrs:{label:n.displayName,value:n.name,selected:n.name==t.selectedNoteType},on:{click:function(e){return t.selectNoteType(n.name)}}})})),1)]),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"header mb-1"},[t._v("Note")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.noteContent,expression:"noteContent"}],ref:"noteInput",staticClass:"form-control note-textarea",class:{"is-invalid":t.errors.content},attrs:{disabled:t.saving},domProps:{value:t.noteContent},on:{focus:t.clearErrors,input:function(e){e.target.composing||(t.noteContent=e.target.value)}}}),t._v(" "),t.errors.content?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.content))]):t._e()])])]},proxy:!0},{key:"buttons",fn:function(){return[e("PJButton",{attrs:{type:"primary",loading:t.saving},nativeOn:{click:function(e){return t.saveNote()}}},[t._v("Save")])]},proxy:!0}])})};lr._withStripped=!0;n("vDqi");var cr=n("IJJa"),ur={props:{noteOrderType:{type:String,required:!1,default:"default"}},data:function(){return{saving:!1,noteTypes:cr.b,selectedNoteType:Object.keys(cr.b)[0],noteContent:"",article:{},errors:{}}},computed:{noteOrder:function(){return cr.d[this.noteOrderType]?cr.d[this.noteOrderType]:cr.d.default},userAvailableNoteTypes:function(){var t={};this.currentUser.hasRole("ROLE_STAFF")||(t[cr.c.CHECK]=cr.b[cr.c.CHECK],this.currentUser.hasRole("ROLE_REVIEWER_SUPPORT")&&(t[cr.c.REVIEW]=cr.b[cr.c.REVIEW])),this.currentUser.hasRole("ROLE_CHECKER")&&(t[cr.c.CHECK]=cr.b[cr.c.CHECK],t[cr.c.CRITICAL]=cr.b[cr.c.CRITICAL],t[cr.c.GENERAL]=cr.b[cr.c.GENERAL],t[cr.c.PRODUCTION]=cr.b[cr.c.PRODUCTION]);var e=Object.keys(t).length?t:cr.b,n=[];return this.noteOrder.forEach((function(t){e[t]&&n.push({name:t,displayName:e[t]})})),n}},methods:{reset:function(){this.article={},this.saving=!1,this.noteContent="",this.selectedNoteType=Object.keys(this.userAvailableNoteTypes)[0],this.clearErrors()},clearErrors:function(){this.errors={}},showModal:function(t){var e=this;this.reset(),this.article=t.article,this.selectedNoteType=this.userAvailableNoteTypes[0].name,t.type&&this.userAvailableNoteTypes.forEach((function(n){n.name==t.type&&(e.selectedNoteType=n.name)})),this.$refs.modal.showModal(),this.$nextTick((function(){e.$refs.noteInput&&e.$refs.noteInput.focus(),setTimeout((function(){e.noteContent=""}),10)}))},hideModal:function(){this.$refs.modal.hideModal()},saveNote:function(){var t=this,e=new cr.a({type:this.selectedNoteType,text:this.noteContent}),n=e.validate();if(!n.status)return this.errors=n.errors,!1;this.saving=!0,e.save({urlParams:{id:this.article.id}}).then((function(e){$.a.$emit(Ae.a.ARTICLE_NOTES_ADD,e),t.$store.dispatch("notificationAlerts/addNotification",{title:"Note added",message:"Your note was added to the article",type:"success"})})).catch((function(e){t.$store.dispatch("notificationAlerts/addNotification",{title:"Unable to save note",message:"Did you choose the right note type?",type:"error"}),console.log("Error saving note",e)})).finally((function(){t.saving=!1,t.hideModal()}))},selectNoteType:function(t){var e=this;this.selectedNoteType=t,this.$nextTick((function(){e.$refs.noteInput.focus()}))}},mounted:function(){$.a.$on(Ae.a.ARTICLE_NOTES_SHOW_MODAL,this.showModal)},beforeDestroy:function(){$.a.$off(Ae.a.ARTICLE_NOTES_SHOW_MODAL,this.showModal)}},dr=(n("wWNX"),Object(B.a)(ur,lr,[],!1,null,"6c6745c4",null).exports),hr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-notes-container js-article-notes",attrs:{"data-article-uri":t.articleUri}},[e("div",{staticClass:"header d-flex"},[e("div",{staticClass:"d-flex toggle-expand",staticStyle:{"align-items":"center"},on:{click:t.toggleExpanded}},[e("strong",{staticClass:"ml-2 title"},[t._v("Notes")]),t._v(" "),t.fontAwesomeVersion?e("i",{staticClass:"ml-1 mr-1 chevron-container fa",class:{"fa-chevron-down":!t.expanded,"fa-chevron-up":t.expanded}}):e("i",{staticClass:"ml-1 mr-1 chevron-container",class:{"icon-chevron-down":!t.expanded,"icon-chevron-up":t.expanded}})]),t._v(" "),e("div",{staticClass:"d-flex w-100",staticStyle:{"justify-content":"end"}},[e("transition",{attrs:{name:"transition-fade"}},[t.showFilters&&t.expanded&&!t.loading?e("div",{staticClass:"filter-tabs-container mr-2"},[e("ul",{staticClass:"nav nav-tabs",staticStyle:{"margin-bottom":"0","margin-left":"0",border:"none"}},[e("li",{staticClass:"nav-item",on:{click:function(e){return t.selectFilterCategory("ALL")}}},[e("span",{staticClass:"nav-link",class:{active:t.isSelectedCategory("ALL")}},[t._v("All")])]),t._v(" "),t._l(t.orderedSelectionTypes,(function(n){return e("li",{key:n.name,staticClass:"nav-item",on:{click:function(e){return t.selectFilterCategory(n.name)}}},[e("span",{staticClass:"nav-link",class:t.getCssClass(n.name)},[t._v(t._s(n.displayName))])])}))],2)]):t._e()]),t._v(" "),t.loading?t._e():e("PJButton",{staticClass:"add-button",staticStyle:{"justify-content":"end"},attrs:{type:"outline-primary",small:!0},nativeOn:{click:function(e){return t.showAddModal.apply(null,arguments)}}},[t._v("Add")])],1)]),t._v(" "),e("transition",{attrs:{name:"transition-slide-fade"}},[t.expanded?e("div",{staticClass:"body",class:{"body-height-limit":t.limitHeight}},[t.loading?e("div",{staticClass:"no-notes-message"},[e("LoadingSpinner")],1):Object.keys(t.filteredNotes).length?t._l(t.filteredNotes,(function(n){return e("NoteTypeContainer",{key:n.type,attrs:{noteType:n.type,notes:n.notes,articleUri:t.articleUri}})})):e("div",{staticClass:"no-notes-message"},[t._v("0 notes")])],2):t._e()])],1)};hr._withStripped=!0;var pr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"v-text-container",class:t.cssClass},[e("div",{staticClass:"title mb-1"},[e("span",[t._v(t._s(t.typeDisplayName))])]),t._v(" "),t._l(t.notes,(function(n,i){return e("div",{key:i},[e("div",{class:{"note-container-border-bottom mb-1 pb-1":i+1<t.notes.length}},[e("NoteContainer",{attrs:{note:n}})],1)])}))],2)};pr._withStripped=!0;var fr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"note-container"},[e("div",{class:{"deleting-fade":t.deleting}},[t.editing?e("div",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note.text,expression:"note.text"}],ref:"textarea",staticClass:"edit-input",attrs:{disabled:t.saving},domProps:{value:t.note.text},on:{input:function(e){e.target.composing||t.$set(t.note,"text",e.target.value)}}}),t._v(" "),e("div",{staticClass:"mt-1 mb-1"},[e("PJButton",{attrs:{type:"light",small:""},on:{click:t.toggleEditMode}},[t._v("Cancel")]),t._v(" "),e("PJButton",{attrs:{type:"primary",small:"",loading:t.saving},on:{click:function(e){return t.saveUpdates()}}},[t._v("Save")])],1)]):e("div",[e("div",{directives:[{name:"markdown",rawName:"v-markdown",value:t.note.text,expression:"note.text"}],staticClass:"note-text-container"}),t._v(" "),e("div",{staticClass:"pt-1 d-flex"},[t.note.created?e("span",{staticClass:"text-muted"},[t._v(t._s(t._f("dateFormat")(t.note.created,"MM/dd/yy")))]):t._e(),t._v(" "),t.isUpdated?e("span",{staticClass:"text-muted mx-1"},[t._v("("),e("i",[t._v("updated")]),t._v(" - "+t._s(t._f("dateFormat")(t.updatedAt,"MM/dd/yy"))+")")]):t._e(),t._v(" "),t.note.creator?e("span",{staticClass:"text-muted"},[t._v("· "+t._s(t.creatorName))]):t._e(),t._v(" "),e("span",{staticClass:"ml-1 text-muted ml-auto"},[e("span",{staticClass:"note-link",on:{click:function(e){return t.toggleEditMode()}}},[t._v("Edit")]),t._v(" "),t.isOwner?e("span",[t._v("·")]):t._e(),t._v(" "),t.isOwner?e("span",{staticClass:"note-link",on:{click:function(e){return t.deleteConfirm()}}},[t._v("Delete")]):t._e()])])])]),t._v(" "),t.deleting?e("div",{staticClass:"deleting-overlay"},[e("LoadingSpinner"),t._v(" "),e("span",{staticClass:"ml-1"},[t._v("Deleting note...")])],1):t._e()])};fr._withStripped=!0;var mr={props:{note:{required:!0,type:cr.e}},data:function(){return{editing:!1,deleting:!1,saving:!1,backupText:"",updatedAt:this.note.updated}},computed:{initials:function(){return(this.note.creator.firstName[0]+this.note.creator.lastName[0]).toUpperCase()},creatorName:function(){return this.note.creator.firstName+" "+this.note.creator.lastName},isOwner:function(){return!!this.note.creator&&(!!this.currentUser.id&&this.note.creator.id==this.currentUser.id)},isUpdated:function(){return this.updatedAt>this.note.created}},methods:{deleteConfirm:function(){var t=this;this.showConfirmModal("Are you sure you want to delete this note?",(function(e){e&&(t.deleting=!0,t.note.delete().then((function(e){$.a.$emit(Ae.a.ARTICLE_NOTES_DELETE,t.note),t.$store.dispatch("notificationAlerts/addNotification",{title:"Note deleted",message:"The note was deleted",type:"success"})})).catch((function(e){t.$store.dispatch("notificationAlerts/addNotification",{title:"Error",message:"The note could not be deleted",type:"error"})})).finally((function(){t.deleting=!1})))}))},toggleEditMode:function(){this.editing=!this.editing,this.editing?this.backupText=this.note.text:this.note.text=this.backupText},saveUpdates:function(){var t=this;this.saving=!0,this.note.update({url:this.note.apiId}).then((function(e){$.a.$emit(Ae.a.ARTICLE_NOTES_UPDATE,t.note),t.updatedAt=e.updated,t.editing=!1,t.$store.dispatch("notificationAlerts/addNotification",{title:"Note updated",message:"Your changes have been saved",type:"success"})})).catch((function(e){t.$store.dispatch("notificationAlerts/addNotification",{title:"Error",message:"Your changes could not be saved",type:"error"})})).finally((function(){t.saving=!1}))}}},vr=(n("oVAy"),Object(B.a)(mr,fr,[],!1,null,"fac37b16",null).exports),gr={props:{notes:{required:!0,type:Array},noteType:{required:!0,type:String}},components:{NoteContainer:vr},computed:{typeDisplayName:function(){return cr.b[this.noteType].toUpperCase()},cssClass:function(){return"text-container-".concat(this.noteType)}}},br=(n("EWeI"),{components:{NoteTypeContainer:Object(B.a)(gr,pr,[],!1,null,"ae6b1f7a",null).exports},props:{articleUri:{required:!0,type:String},allowedTypesString:{type:String},hiddenTypesString:{type:String},showFilters:{type:String,required:!1},startMinified:{required:!1},fontAwesomeVersion:{required:!1},limitHeight:{required:!1},noteOrderType:{type:String,required:!1,default:"default"},useVuex:{type:String,required:!1},selectedFilterInit:{type:String,required:!1}},data:function(){return{article:{},notes:[],selectedFilterCategory:"ALL",expanded:!0,allowedTypes:[],hiddenTypes:[],dataLoading:!1,articleError:null}},computed:{articlesLoading:function(){return this.$store.state.articlesLoading},loading:function(){return this.useVuex?this.articlesLoading:this.dataLoading},noteOrder:function(){return cr.d[this.noteOrderType]?cr.d[this.noteOrderType]:cr.d.default},orderedSelectionTypes:function(){var t=this,e=[];return this.noteOrder.forEach((function(n){t.filteredTypes[n]&&e.push({name:n,displayName:t.filteredTypes[n]})})),e},filteredTypes:function(){var t=this,e={};return this.notes.forEach((function(n){t.allowedTypes.length&&!t.allowedTypes.includes(n.type)||t.hiddenTypes.includes(n.type)||cr.b[n.type]&&(e[n.type]=cr.b[n.type])})),e},filteredNotes:function(){var t=this,e={},n=[];return this.notes.forEach((function(n){(n.type==t.selectedFilterCategory||"ALL"==t.selectedFilterCategory&&Object.keys(t.filteredTypes).includes(n.type))&&(e[n.type]?e[n.type].push(n):e[n.type]=[n])})),this.noteOrder.forEach((function(t){e[t]&&n.push({type:t,notes:e[t]})})),n}},methods:{turnOffEventUpdates:function(){$.a.$off(Ae.a.ARTICLE_NOTES_ADD,this.addNote),$.a.$off(Ae.a.ARTICLE_NOTES_DELETE,this.deleteNote),$.a.$off(Ae.a.ARTICLE_NOTES_UPDATE,this.updateNote),$.a.$off(Ae.a.ARTICLE_NOTES_KEYBOARD_SHORTCUT_ADD,this.keyboardShortcutAdd),$.a.$off(Ae.a.ARTICLE_NOTES_KEYBOARD_SHORTCUT_EXPAND_TOGGLE,this.toggleExpanded)},getArticle:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dataLoading=!0,e.prev=1,e.next=4,it.a.get({url:t.articleUri});case 4:t.article=e.sent,t.notes=t.article.articleNotes.items,t.initFilter(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("error getting article",e.t0),t.articleError=e.t0;case 13:return e.prev=13,t.dataLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})))()},getFilteredNotes:function(t){var e=[];return this.notes.forEach((function(n){n.type==t&&e.push(n)})),e},showAddModal:function(){$.a.$emit(Ae.a.ARTICLE_NOTES_SHOW_MODAL,{article:this.article,type:this.selectedFilterCategory})},addNote:function(t){t.links.article==this.articleUri&&(this.notes.unshift(t),[t.type,"ALL"].includes(this.selectedFilterCategory)||(this.selectedFilterCategory=t.type))},deleteNote:function(t){if(t.links.article==this.articleUri)for(var e=0;e<this.notes.length;e++)if(this.notes[e].id==t.id){this.notes.splice(e,1);break}},updateNote:function(t){if(t.links.article==this.articleUri)for(var e=0;e<this.notes.length;e++)if(this.notes[e].id==t.id){this.notes[e]=t;break}},toggleExpanded:function(){this.expanded=!this.expanded},isSelectedCategory:function(t){return t==this.selectedFilterCategory},selectFilterCategory:function(t){this.selectedFilterCategory=t},keyboardShortcutAdd:function(t){$.a.$emit(Ae.a.ARTICLE_NOTES_SHOW_MODAL,{article:this.article,type:t})},getCssClass:function(t){var e="";return this.isSelectedCategory(t)&&(e+="active active-"+(t=t.replace("article-note-",""))),e},findArticleInStore:function(){for(var t=this.$store.state.articles,e=0;e<t.length;e++)if(t[e]._links.self==this.articleUri){this.article=t[e],this.notes=this.article.articleNotes.items;break}},initFilter:function(){this.selectedFilterInit&&(this.selectedFilterCategory=this.selectedFilterInit)}},watch:{articlesLoading:function(){this.useVuex&&!this.articlesLoading&&(this.findArticleInStore(),this.initFilter())}},created:function(){this.useVuex||this.getArticle(),this.allowedTypesString&&(this.allowedTypes=this.allowedTypesString.split(",")),this.hiddenTypesString&&(this.hiddenTypes=this.hiddenTypesString.split(",")),this.startMinified&&(this.expanded=!1)},beforeMount:function(){this.turnOffEventUpdates()},mounted:function(){this.useVuex&&!this.articlesLoading&&this.findArticleInStore(),$.a.$on(Ae.a.ARTICLE_NOTES_ADD,this.addNote),$.a.$on(Ae.a.ARTICLE_NOTES_DELETE,this.deleteNote),$.a.$on(Ae.a.ARTICLE_NOTES_UPDATE,this.updateNote),$.a.$on(Ae.a.ARTICLE_NOTES_KEYBOARD_SHORTCUT_ADD,this.keyboardShortcutAdd),$.a.$on(Ae.a.ARTICLE_NOTES_KEYBOARD_SHORTCUT_EXPAND_TOGGLE,this.toggleExpanded)},beforeDestroy:function(){this.turnOffEventUpdates()}}),yr=(n("joba"),Object(B.a)(br,hr,[],!1,null,"7f7214ff",null).exports),_r={render:function(){return!1},created:function(){for(var t=[],e=document.getElementsByClassName("js-article-item"),n=0;n<e.length;n++)t.push(e[n].dataset.articleId);t.length?this.$store.dispatch("getArticles",t):console.log("No article ids found to load data")}},Sr=function(){var t=this._self._c;return t("div",{staticClass:"notification-alerts-container"},[t("transition-group",{attrs:{name:"list"}},this._l(this.notifications,(function(e){return t("NotificationAlert",{key:e.id,staticClass:"list-item",attrs:{notification:e}})})),1)],1)};Sr._withStripped=!0;var wr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"notification-alert",class:t.cssClass},[t.notification.title?e("div",{staticClass:"header"},[t.notification.title?e("div",[t._v(t._s(t.notification.title))]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"body"},[t._v("\n        "+t._s(t.notification.message)+"\n    ")]),t._v(" "),e("div",{staticClass:"notification-close",on:{click:t.dismiss}},[e("i",{staticClass:"icon icon-remove"})])])};wr._withStripped=!0;var Cr={props:{notification:Object},computed:{cssClass:function(){return"notification-alert-"+this.notification.type}},methods:{dismiss:function(){this.$store.commit("notificationAlerts/removeNotification",this.notification.id)}}};n("lUu7");function Or(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var Er={components:{NotificationAlert:Object(B.a)(Cr,wr,[],!1,null,"b0e50fd4",null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Or(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(d.e)("notificationAlerts",["notifications"]))},Ar=(n("R1d8"),Object(B.a)(Er,Sr,[],!1,null,"549a0d2f",null).exports),Tr=n("IAQg"),Pr=function(){var t=this._self._c;return t("PJVuetify",[t("DeadlineExtension")],1)};Pr._withStripped=!0;var xr=function(){var t=this,e=t._self._c;return e("PJModalVuetify",{attrs:{title:"Deadline Extension",icon:"mdi-calendar",maxWidth:"480px",saving:t.saving,closeButtonText:"Cancel"},scopedSlots:t._u([{key:"body",fn:function(){return[t.open?e("div",[e("p",{staticClass:"mt-5"},[t._v("\n                Your original resubmission deadline was\n                "),e("b",[t._v(t._s(t._f("dateFormat")(t.originalDeadline,"d MMM Y")))]),t._v(" "),e("br"),t._v("\n                Request an extension to this date:\n            ")]),t._v(" "),e("v-btn-toggle",{attrs:{mandatory:"",dense:"",color:"primary"},model:{value:t.monthSelection,callback:function(e){t.monthSelection=e},expression:"monthSelection"}},t._l(3,(function(n){return e("v-btn",{key:n,staticClass:"text-none",attrs:{value:n}},[t._v("+"+t._s(n)+" Month"+t._s(n>1?"s":""))])})),1),t._v(" "),e("p",{staticClass:"mt-5"},[t._v("\n                Your new deadline will be "),e("b",[t._v(t._s(t._f("dateFormat")(t.newDeadline,"d MMM Y")))]),t._v(" "),e("br"),t._v("You will receive an email confirming the change\n            ")])],1):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[e("v-btn",{attrs:{type:"primary",color:"primary",loading:t.saving},on:{click:function(e){return t.save()}}},[t._v("Save")])]},proxy:!0}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}})};xr._withStripped=!0;var kr=n("sNUu"),jr={data:function(){return{open:!1,saving:!1,monthSelection:null,originalDeadline:"",submissionId:null}},computed:{newDeadline:function(){return kr.a.addMonths(this.originalDeadline,this.monthSelection)}},methods:{reset:function(){this.saving=!1,this.monthSelection=2,this.originalDeadline="",this.submissionId=null},show:function(t){this.reset(),t.articleId&&t.revisionId&&t.originalDeadline?(this.originalDeadline=t.originalDeadline,this.articleId=t.articleId,this.revisionId=t.revisionId,this.open=!0):console.error("Required values not passed to DeadlineExtension modal:",t)},hide:function(){this.open=!1},save:function(){var t=this;this.saving=!0;var e="articles/".concat(this.articleId,"/extend-deadline/");We.a.call({method:"PUT",url:e,data:{months:this.monthSelection}}).then((function(e){$.a.$emit(Ae.a.DEADLINE_EXTENSION_RESPONSE,e.data),t.$store.dispatch("notificationAlerts/addNotification",{type:"success",title:"Updated",message:"The deadline has been updated"}),t.hide()})).catch((function(t){console.error(t)})).finally((function(){t.saving=!1}))}},mounted:function(){$.a.$on(Ae.a.SHOW_DEADLINE_EXTENSION_SELECTOR,this.show)},beforeDestroy:function(){$.a.$off(Ae.a.SHOW_DEADLINE_EXTENSION_SELECTOR)}},Ir=n("pgmH"),Rr=Object(B.a)(jr,xr,[],!1,null,null,null),Dr=Rr.exports;kt()(Rr,{VBtn:Ht.a,VBtnToggle:Ir.a});var Lr={components:{DeadlineExtension:Dr}},Mr=Object(B.a)(Lr,Pr,[],!1,null,null,null).exports,Nr=[{name:"vue-notifications",id:"vue-notifications",component:Ar},{name:"article-notes-modal",id:"vue-article-note-modal",component:dr,props:["noteOrderType"]},{name:"vue-confirm-modal",id:"vue-confirm-modal",component:Tr.a},{name:"articles-data-loader",id:"vue-articles-data-loader",component:_r},{delay:100,name:"article-notes",cssClass:"js-vue-article-notes",component:yr,props:["articleUri","allowedTypesString","hiddenTypesString","showFilters","selectedFilterInit","startMinified","fontAwesomeVersion","limitHeight","noteOrderType","useVuex"]},{name:"deadline-extension",id:"vue-deadline-extend",component:Mr}],Vr=n("7WsP"),Ur=n("jK73"),qr=n("f3Hx");function Fr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Br(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fr(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n("OP9Q");var Hr=new p.default;p.default.use(m.a,{eventEmitter:Hr,store:D.a,startAtIdle:!1,idleTime:3e5}),p.default.use(Pi.a);var $r=document.body,Gr=$r.getAttribute("data-mp"),Wr=$r.getAttribute("data-mp-debug");"undefined"!=typeof mixpanel&&mixpanel.init(Gr,{debug:Wr,secure_cookie:!0},"vue_mp");var Jr=document.getElementById(M.a.PEERJ_CORE_VUE_ROUTER_OUTLET_ID),Yr=JSON.parse(Jr.getAttribute("data-userRoleData")),Qr=document.getElementById("peerj-vue-user-impact-widget");function Kr(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];p.default.directive("markup",Vr.a),p.default.directive("markdown",Ur.a),xi.a.register(),p.default.component("vue-navigation-bar",b.a),p.default.component("VuePerfectScrollbar",g.a),p.default.mixin({data:function(){return{userRoleData:Yr,isDarkTheme:Jr.getAttribute("data-isDarkTheme"),isBetaTesting:Jr.getAttribute("data-betaTesting"),apiEntrypoint:Jr.getAttribute("data-api"),groupFilesRoot:Jr.getAttribute("data-groupFilesRoot"),groupFilesPrefix:Jr.getAttribute("data-groupFilesPrefix"),imagePrefix:Jr.getAttribute("data-imagePrefix"),staticFilePrefix:Jr.getAttribute("data-imagePrefix"),userImagePrefix:Jr.getAttribute("data-userImagePrefix")+"/",articleBasePrefix:Jr.getAttribute("data-articleBasePrefix"),recaptchaKey:Jr.getAttribute("data-recaptchaKey")}},computed:Br(Br({},Object(h.c)("me",["imageSetter","account","_roles","isEditor","isSectionEditor","isStaff","isInstitutionAdmin","isAdmin","isChecker","appGroups"])),{},{isVueRouterPage:function(){return!!this.$router.history.current.name},controllerVars:function(){return $r.getAttribute("data-controllerVars")?JSON.parse($r.getAttribute("data-controllerVars")):null},theme:function(){return 1==this.isDarkTheme||"true"===this.isDarkTheme||this.$vuetify.theme.dark?"dark":"light"},hubImagePath:function(){return 1==this.isDarkTheme||"true"===this.isDarkTheme?"images/hubs/hub-logo-white.svg":"images/hubs/hub-logo.svg"},storageId:function(){return this.account?this.account.isViewingAs?"-proxy":this.account.id:null},currentUser:function(){return D.a.state.user.user},cachedGroupFilesPrefix:function(){return this.groupFilesRoot?this.groupFilesPrefix+this.groupFilesRoot+"/":this.groupFilesPrefix}}),methods:Br(Br(Br({},Object(d.b)("subscriptions",{subscribeToTopic:"subscribe",closeMercureSubscriber:"close",resumeMercureSubscriber:"resume"})),{},{mpTrack:function(t,e,n){"undefined"!=typeof mixpanel?mixpanel.track(t,e,n):n&&n()},gaTrack:function(t){var e=t.category,n=void 0===e?"Event":e,i=t.action,r=t.label,a=void 0===r?null:r,s=t.value,o=void 0===s?null:s,l=t.callback,c=void 0===l?null:l;if("undefined"!=typeof ga){if(o){var u=parseInt(o,10);o=isNaN(u)?0:u}ga("send",{hitType:"event",eventCategory:n,eventAction:i,eventLabel:a,eventValue:o,hitCallback:c})}},patchItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length>0){var n,i={};for(n in t)t.hasOwnProperty(n)&&e.includes(n)&&(i[n]=t[n]);return i["@id"]=t["@id"],i}return t},setupMercureSubscription:function(e,n){t&&this.subscribeToTopic({topic:null,type:n,expires:0,renewJwtPath:e,staff:this.isStaff})},hashCode:function(t){var e=0,n=t.length,i=0;if(n>0)for(;i<n;)e=(e<<5)-e+t.charCodeAt(i++)|0;return e},getContrastYIQ:function(t){return t=t.replace("#",""),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"black":"white"},copyText:function(t){navigator.clipboard.writeText(t)},scrollContainerTop:function(){window.scrollTo(0,Jr.offsetTop-64)},scrollToTop:function(t){var e=-window.scrollY/(t/15),n=setInterval((function(){0!==window.scrollY?window.scrollBy(0,e):clearInterval(n)}),15)},naturalSort:function(t){var e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return t.sort(e.compare)},getUserImageSrc:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null==t?e?null:this.imagePrefix+"images/peerJ_icon_await_fade.jpeg":"e_"===t.substring(0,2)?this.imagePrefix+"images/ae/"+t+".jpg":this.userImagePrefix+t},isResourceOwner:function(t){return t===this.account["@id"]}},Object(d.b)("me",{preLoadMe:"preLoad"})),{},{showConfirmModal:function(t,e){t.vuetify?$.a.$emit(Ae.a.CONFIRM_VUETIFY,t):$.a.$emit(Ae.a.CONFIRM,{data:t,callback:e})},truncate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(t)return t.length>e?t.slice(0,e-1)+"...":t},updatePage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$router.currentRoute.name!==t.name&&(this.isVueRouterPage?this.$router.push({name:t.name,params:e}):window.location.href=t.href)}}),filters:sr.a});var e=[{name:M.a.PEERJ_CORE_VUE_ROUTER_OUTLET_ID,id:M.a.PEERJ_CORE_VUE_ROUTER_OUTLET_ID,component:Hi}].concat(l()(Nr));Qr&&e.push({name:"user-impact-widget",id:"peerj-vue-user-impact-widget",component:ar});var n=!0;Object(qr.a)(e,p.default,D.a,Oi,R,Ti,n)}function zr(){return Yr._roles.length>0?Si.a.getItem("jwt")?Si.a.getItem("jwt"):D.a.dispatch("user/checkSignedIn"):null}function Zr(){return(Zr=s()(r.a.mark((function t(){var e,n,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,xi.a.register(),t.next=4,zr();case 4:if(!(e=t.sent)){t.next=11;break}return n=Object(or.a)(e),D.a.commit("user/setToken",e),D.a.commit("user/setDecodedToken",n),t.next=11,he.a.getOwnProfileData();case 11:Kr(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("Main init error",t.t0);case 17:i={eventBus:$.a,constants:{events:Ae.a},initApps:function(){console.log("Re-mount Vue apps"),$.a.$emit("REMOUNT_ARTICLE_NOTES"),Object(qr.a)(Nr,p.default,D.a,Oi,R,Ti,!0)},store:D.a},window.PeerJ?window.PeerJ.Vue=i:window.PeerJ={Vue:i};case 19:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}!function(){Zr.apply(this,arguments)}()},jK73:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("wMS7"),r=n.n(i),a=n("AuB/");function s(t,e){var n=e.value,i=e.arg;if(null!=n){var s=a.a.markdownToHtml(n),o={};"inline"===i&&(o={FORBID_TAGS:["p"]}),t.innerHTML=r.a.sanitize(s,o)}}},jhst:function(t,e,n){},joba:function(t,e,n){"use strict";n("/04F")},jsnD:function(t,e,n){"use strict";var i,r,a=n("Kw5r"),s=n("L2JU"),o=n("lSNA"),l=n.n(o),c=n("WTW0"),u={SET_GROUPS:"SET_GROUPS",SET_USER_ME:"SET_USER_ME",SET_USER_ROLES:"SET_USER_ROLES",UPDATE_PHOTO:"UPDATE_PHOTO"},d={namespaced:!0,ACTIONS:u,state:function(){return{imageSetter:Function,account:[],_roles:[],appGroups:[],isViewingAs:!1,isAdmin:!1,isStaff:!1,isChecker:!1,isSectionEditor:!1,isEditor:!1,isUser:!1,isInstitutionAdmin:!1}},actions:{preLoad:function(t,e){var n=t.commit;e.appGroups&&n(u.SET_GROUPS,e.appGroups),e._roles&&n(u.SET_USER_ROLES,e._roles),e._me&&n(u.SET_USER_ME,e._me)},updatePhoto:function(t,e){(0,t.commit)(u.UPDATE_PHOTO,e)}},getters:{getField:c.b},mutations:(i={updateField:c.d},l()(i,u.SET_USER_ME,(function(t,e){if(e.photo=t.imageSetter(e.photo),t.account["@id"]===e["@id"]){var n=t.account.connectedAccount;e.connectedAccount||(e.connectedAccount=n)}t.account=e})),l()(i,u.SET_GROUPS,(function(t,e){t.appGroups=e})),l()(i,u.SET_USER_ROLES,(function(t,e){e.forEach((function(e){t._roles.includes(e)||(t._roles.push(e),"ROLE_ADMIN"==e&&(t.isAdmin=!0),"ROLE_STAFF"==e&&(t.isStaff=!0),"ROLE_EDITOR"==e&&(t.isEditor=!0),"ROLE_USER"==e&&(t.isUser=!0),"ROLE_CHECKER"==e&&(t.isChecker=!0),"ROLE_INSTITUTION_ACCOUNT_ADMIN"===e&&(t.isInstitutionAdmin=!0),"ROLE_SECTION_EDITOR"==e&&(t.isSectionEditor=!0))}))})),l()(i,u.UPDATE_PHOTO,(function(t,e){t.account.photo=e})),i)},h=n("bbSu"),p=n("vDqi"),f=n.n(p),m=n("YB1K"),v=n("dwWe"),g=null,b=null,y=null,_=1,S=1,w=0,C=0,O=null,E=null,A=null,T=function t(e,n){document.removeEventListener("DOMContentLoaded",t,!1),window.removeEventListener("load",t,!1),P(e,n)},P=function(t,e){R(),D(),A=e,S=0,C&&1===C&&x("Waking up");var n=V(),i=v.a.getItem("pj-m-hb");!i||n-i>12?j(n):L()},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(A&&A.staff||e)&&console.log((new Date).toLocaleTimeString()+" - "+t)},k=function(t){var e=v.a.getItem("pj-event-last-id");void 0!==e&&(t.searchParams.delete("Last-Event-ID"),t.searchParams.append("Last-Event-ID",e)),t.searchParams.delete("topic");var n=JSON.parse(v.a.getItem("pj-subscribed-topics"));if(n){n.forEach((function(e){t.searchParams.append("topic",e)})),A.expires&&A.renewJwtPath&&U(A.expires,A.renewJwtPath);try{y=new EventSource(t,{withCredentials:!0}),window.removeEventListener("storage",I),window.addEventListener("storage",I,!1)}catch(t){x(t),y.close()}y.onopen=function(){2e3},y.onmessage=function(t){var e=v.a.getItem("pj-event-last-id");if(t.lastEventId!==e){var n=JSON.parse(t.data);v.a.setItem("pj-event-last-id",t.lastEventId),v.a.setItem("pj-event-message",t.data),N(n)}else x("Duplicate eventSource received. Multiple masters exist? Closing connection."),R(),L()},y.onerror=function(){x("eventSource error. Closing connection."),y.close(),R(),L()}}},j=function(t){x("promoting m subscriber"),clearInterval(E),w=1,v.a.setItem("pj-m-hb",t),E=setInterval((function(){v.a.setItem("pj-m-hb",V())}),1e4),1!==C&&A.topic?k(new URL(m.b)):(C=0,U(0,A.renewJwtPath),setTimeout((function(){k(new URL(m.b))}),1200)),window.onbeforeunload=function(t){R()}},I=function(t){"pj-subscribed-topics"===t.key&&(y.close(),k(new URL(m.b)))},R=function(){x("km"),window.removeEventListener("storage",I),clearInterval(E),clearTimeout(b),y&&(y.close(),y=null)},D=function(){x("kc"),clearInterval(O),O=0},L=function(){x("Creating listener subscriber node"),clearInterval(O),O=0,window.removeEventListener("storage",M),window.addEventListener("storage",M,!1),O=setInterval((function(){S&&1===S?D():_&&0!==_?_=0:(D(),j(V()))}),12e3)},M=function(t){"pj-m-hb"===t.key&&v.a.getItem("pj-m-hb")>0&&(_=1,w&&1===w&&(w=0,R(),L()));var e=v.a.getItem("pj-event-last-id");if("pj-event-message"===t.key&&e===g)x("Possible duplicate m"),R(),L();else if("pj-event-message"===t.key&&e!==g){var n=JSON.parse(v.a.getItem("pj-event-message"));N(n),g=e}},N=function(t){if(t.skipNotification=!0,t["@type"])h.a.$emit("peerj_evs_"+t["@type"],t);else if(t["@id"]){["notification","userSubmissionVisit","collectionSubmissionComment","userKanban","userKanbanCard"].forEach((function(e){h.a.$emit("peerj_evs_"+e,t)}))}},V=function(){return Math.round((new Date).getTime()/1e3)},U=function t(e,n){"undefined"!==b&&""!==b&&clearTimeout(b),0!==e&&x("Renewing subscription timer"),b=setTimeout((function(){f.a.defaults.url=n,f.a.request({}).then((function(e){if(e.data.topic&&e.data.expires){var i=JSON.stringify(e.data.topic);v.a.getItem("pj-subscribed-topics")!==i&&v.a.setItem("pj-subscribed-topics",JSON.stringify(e.data.topic)),t(e.data.expires,n)}})).catch((function(t){x(t)}))}),1e3*e-1500)},q="CLOSE",F="RESUME",B="SUBSCRIBE",H={namespaced:!0,state:function(){return{topics:[]}},actions:{close:function(t){var e=t.commit;x("Idle - closing subscriptions"),e(q)},resume:function(t){var e=t.commit;x("Resuming subscriptions"),e(F)},subscribe:function(t,e){var n=t.commit;x("Active - subscribing to updates",e.staff),n(B,e)}},getters:{getField:c.b},mutations:(r={updateField:c.d},l()(r,q,(function(){S=1,D(),R()})),l()(r,F,(function(t){m.b&&A&&(C=1,P(t,A))})),l()(r,B,(function(t,e){m.b&&("complete"===document.readyState?P(t,e):(document.addEventListener("DOMContentLoaded",T(t,e),!1),window.addEventListener("load",T(t,e),!1)))})),r)},$={namespaced:!0,state:function(){return{show:!1,color:"error",text:"An error occurred",subText:"",timeout:6e3,isError:!1,showIcon:!1,errorIcon:"mdi-alert-outline",successIcon:"mdi-check-circle-outline"}},getters:{getField:c.b},mutations:{updateField:c.d}},G={state:{sidebarToggleProperties:{isSideNavOpen:!0,isSecondarySideNavOpen:!1,isActiveSecondarySideNav:!1}},getters:{getSideBarToggleProperties:function(t){return t.sidebarToggleProperties}},actions:{changeSidebarProperties:function(t){(0,t.commit)("toggleSidebarProperties")},changeSecondarySidebarProperties:function(t){(0,t.commit)("toggleSecondarySidebarProperties")},changeSecondarySidebarPropertiesViaMenuItem:function(t,e){(0,t.commit)("toggleSecondarySidebarPropertiesViaMenuItem",e)},changeSecondarySidebarPropertiesViaOverlay:function(t){(0,t.commit)("toggleSecondarySidebarPropertiesViaOverlay")}},mutations:{toggleSidebarProperties:function(t){return t.sidebarToggleProperties.isSideNavOpen=!t.sidebarToggleProperties.isSideNavOpen},toggleSecondarySidebarProperties:function(t){return t.sidebarToggleProperties.isSecondarySideNavOpen=!t.sidebarToggleProperties.isSecondarySideNavOpen},toggleSecondarySidebarPropertiesViaMenuItem:function(t,e){t.sidebarToggleProperties.isSecondarySideNavOpen=e,t.sidebarToggleProperties.isActiveSecondarySideNav=e},toggleSecondarySidebarPropertiesViaOverlay:function(t){t.sidebarToggleProperties.isSecondarySideNavOpen=!t.sidebarToggleProperties.isSecondarySideNavOpen}}},W={state:{compactSidebarToggleProperties:{isSideNavOpen:!0,isActiveSecondarySideNav:!1},compactLeftSideBarBgColor:"sidebar-dark-purple"},getters:{getCompactSideBarToggleProperties:function(t){return t.compactSidebarToggleProperties},getcompactLeftSideBarBgColor:function(t){return t.compactLeftSideBarBgColor}},actions:{changeCompactSidebarProperties:function(t){(0,t.commit)("toggleCompactSidebarProperties")},changecompactLeftSideBarBgColor:function(t,e){(0,t.commit)("togglecompactLeftSideBarBgColor",e)}},mutations:{toggleCompactSidebarProperties:function(t){return t.compactSidebarToggleProperties.isSideNavOpen=!t.compactSidebarToggleProperties.isSideNavOpen},togglecompactLeftSideBarBgColor:function(t,e){t.compactLeftSideBarBgColor=e}}},J=n("FeVv"),Y={largeSidebar:G,compactSidebar:W,themeConfig:{state:{themeMode:J.a,vuetifyPreset:J.b},getters:{getThemeMode:function(t){return t.themeMode},getVuetifyPreset:function(t){return t.vuetifyPreset}},actions:{changeThemeMode:function(t){(0,t.commit)("toggleThemeMode")},changeThemeDarkMode:function(t,e){(0,t.commit)("toggleThemeDarkMode",e)},changeThemeRtl:function(t){(0,t.commit)("toggleThemeRtl")},changeVerticalSidebarDrawer:function(t){(0,t.commit)("toggleVerticalSidebarDrawer")},changeVerticalSidebarDrawerColor:function(t,e){(0,t.commit)("toggleVerticalSidebarDrawerColor",e)},changeAppBarColor:function(t,e){(0,t.commit)("toggleAppBarColor",e)},changeCompactVerticalSidebarDrawer:function(t){(0,t.commit)("toggleCompactVerticalSidebarDrawer")},changeVerticalSidebarMini:function(t){(0,t.commit)("toggleVerticalSidebarMini")},changeThemeLoadingState:function(t,e){(0,t.commit)("toggleThemeLoadingState",e)}},mutations:{toggleThemeDarkMode:function(t,e){t.themeMode.isDark=e,this.$vuetify.theme.dark=e},toggleThemeRtl:function(t){t.themeMode.rtl=!t.themeMode.rtl},toggleThemeLoadingState:function(t,e){t.themeMode.isLoading=e},toggleVerticalSidebarDrawer:function(t){t.themeMode.verticalSidebarDrawer=!t.themeMode.verticalSidebarDrawer},toggleVerticalSidebarDrawerColor:function(t,e){t.themeMode.verticalSidebarDrawerColor=e},toggleAppBarColor:function(t,e){t.themeMode.appBarColor=e},toggleCompactVerticalSidebarDrawer:function(t){t.themeMode.verticalCompactSidebarDrawer=!t.themeMode.verticalCompactSidebarDrawer},toggleVerticalSidebarMini:function(t){t.themeMode.verticalSidebarMini=!t.themeMode.verticalSidebarMini}}},verticalSidebar:{state:{verticalSidebar:{isVerticalSidebar:!0,isVerticalCompact:!1,isMobileCompact:!0},verticalCompact:{isSidebarCompact:!1,isItemName:!1}},getters:{getVerticalSidebar:function(t){return t.verticalSidebar},getVerticalCompact:function(t){return t.verticalCompact}},actions:{switchSidebar:function(t,e){(0,t.commit)("SWITCH_SIDEBAR",e)},sidebarCompact:function(t,e){(0,t.commit)("SIDEBAR_COMPACT",e)},removeSidebarCompact:function(t,e){(0,t.commit)("REMOVE_SIDEBAR_COMPACT",e)},mobileSidebar:function(t,e){(0,t.commit)("MOBILE_SIDEBAR",e)}},mutations:{SWITCH_SIDEBAR:function(t,e){t.verticalSidebar.isVerticalSidebar=!t.verticalSidebar.isVerticalSidebar,t.verticalSidebar.isVerticalCompact=!t.verticalSidebar.isVerticalCompact,console.log("test")},SIDEBAR_COMPACT:function(t,e){0==t.verticalSidebar.isVerticalSidebar&&(t.verticalCompact.isSidebarCompact=!t.verticalCompact.isSidebarCompact,t.verticalCompact.isItemName=!t.verticalCompact.isItemName),console.log("test")},REMOVE_SIDEBAR_COMPACT:function(t,e){1==t.verticalCompact.isSidebarCompact&&(t.verticalCompact.isSidebarCompact=!t.verticalCompact.isSidebarCompact,t.verticalCompact.isItemName=!t.verticalCompact.isItemName)},MOBILE_SIDEBAR:function(t,e){t.verticalSidebar.isMobileCompact=!t.verticalSidebar.isMobileCompact}}}},Q=n("o0o1"),K=n.n(Q),z=n("yXPU"),Z=n.n(z),X=n("/hMX"),tt=(n("6OTJ"),{namespaced:!0,state:{user:null,token:null,decodedToken:{}},mutations:{setToken:function(t,e){t.token=e},setDecodedToken:function(t,e){t.decodedToken=e},setUser:function(t,e){t.user=e},setUserRolesFromDecodedToken:function(t){t.decodedToken.roles?t.user.roles=t.decodedToken.roles:t.user.roles=[]}},actions:{checkSignedIn:function(t){var e=t.commit;return new Promise((function(t,n){X.a.call({endpoint:"token"}).then((function(i){i.data.token?(e("setToken",i.data.token),v.a.setItem("jwt",i.data.token),t(i.data.token)):n(i)})).catch((function(t){n(t)}))}))}}});var et={namespaced:!0,state:{messages:{system:[],external:[]},messagesLoading:{system:!0,external:!0},messagesError:{system:!1,external:!1},expandAllLoading:!1},mutations:{reset:function(t){Object.assign(t,{messages:{system:[],external:[]},messagesLoading:{system:!0,external:!0},messagesError:{system:!1,external:!1},expandAllLoading:!1})},setMessages:function(t,e){var n=e.messages.sortBy("id","desc");t.messages[e.type]=n},setMessagesLoading:function(t,e){t.messagesLoading[e.type]=e.status},setMessagesError:function(t,e){t.messagesError[e.type]=e.status},setExpandAllLoading:function(t,e){t.expandAllLoading=e}}};var nt={namespaced:!0,state:{all:[]},mutations:{reset:function(t){Object.assign(t,{all:[]})},set:function(t,e){t.all=e},add:function(t,e){t.all.length&&t.all[t.all.length-1].equalContrib?t.all.splice(t.all.length-1,0,e):t.all.push(e)},addFirst:function(t,e){t.all.unshift(e)},remove:function(t,e){for(var n=0;n<t.all.length;n++)if(t.all[n].id==e.id){t.all.splice(n,1);break}},update:function(t,e){for(var n=0;n<t.all.length;n++)if(t.all[n].id==e.id){Object.assign(t.all[n],e);break}},removeAffiliationFromAll:function(t,e){t.all.map((function(t){for(var n=0;n<t.addresses.length;n++)if(e.id&&t.addresses[n].id==e.id){t.addresses.splice(n,1);break}}))}}};var it={namespaced:!0,state:{all:[]},mutations:{reset:function(t){Object.assign(t,{all:[]})},update:function(t,e){for(var n=0;n<t.all.length;n++)if(t.all[n].id==e.id){Object.assign(t.all[n],e);break}},set:function(t,e){t.all=e},add:function(t,e){t.all.unshift(e)},remove:function(t,e){for(var n=0;n<t.all.length;n++)if(e.id&&t.all[n].id==e.id){t.all.splice(n,1);break}}}},rt=n("reo2");var at={namespaced:!0,state:{article:{}},modules:{authors:nt,affiliations:it},mutations:{set:function(t,e){t.article=e}}},st={modules:{user:tt,articleMessages:et,notificationAlerts:n("mkUh").a,articleModel:at},state:{articlesLoading:!0,articles:[]},mutations:{setArticlesLoading:function(t,e){t.articlesLoading=e},setArticles:function(t,e){t.articles=e}},actions:{getArticles:function(t){var e=arguments;return Z()(K.a.mark((function n(){var i,r,a,s;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.commit,r=e.length>1&&void 0!==e[1]?e[1]:[],i("setArticlesLoading",!0),n.prev=3,a={},r.length&&(a.queryParams={articleIds:r.join(",")}),n.next=8,rt.a.list(a);case 8:s=n.sent,i("setArticles",s.items),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),console.log("Error loading article list",n.t0);case 15:return n.prev=15,i("setArticlesLoading",!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[3,12,15,18]])})))()}}},ot=n("Kena");function lt(t){return{find:function(e){var n={};"string"!=typeof e&&(n={params:e.params},e=e.id);var i=e.startsWith("/api")?e:t+"/"+e;return Object(ot.a)(i,n)},findAll:function(e){return Object(ot.a)(t,e)},create:function(e){return Object(ot.a)(t,{method:"POST",body:JSON.stringify(e)})},del:function(t){return Object(ot.a)(t["@id"],{method:"DELETE"})},patch:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(ot.a)(t["@id"],{method:"PATCH",body:JSON.stringify(t),hasEmbeddedUpdates:e,headers:{"Content-Type":"application/merge-patch+json"}})},update:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(ot.a)(t["@id"],{method:"PUT",body:JSON.stringify(t),hasEmbeddedUpdates:e})}}}n("wEy/");var ct=n("5rbR"),ut=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),dt=0,ht=function(){return{aggregations:{},allIds:[],byIri:{},byId:{},createdResource:null,deleted:null,updated:null,earliestReadId:null,error:"",isLoading:!1,lastRead:0,lastReadId:null,lastRetrieved:0,readIds:[],resetList:!1,selectItems:null,totalItems:0,unreadIds:[],view:null,violations:null}},pt=function(t,e){return t(ft.TOGGLE_LOADING),e instanceof ct.a?(t(ft.SET_VIOLATIONS,e.errors),t(ft.SET_ERROR,e.errors._error),Promise.reject(e)):(t(ft.SET_ERROR,e.message),Promise.reject(e))},ft={ADD:"ADD",MARK_ALL_READ:"MARK_ALL_READ",RESET_CREATE:"RESET_CREATE",RESET_DELETE:"RESET_DELETE",RESET_LIST:"RESET_LIST",RESET_SHOW:"RESET_SHOW",RESET_UPDATE:"RESET_UPDATE",SET_AGGREGATIONS:"SET_AGGREGATIONS",SET_CREATED:"SET_CREATED",SET_DELETED:"SET_DELETED",SET_ERROR:"SET_ERROR",SET_SELECT_ITEMS:"SET_SELECT_ITEMS",SET_TOTAL_ITEMS:"SET_TOTAL_ITEMS",SET_UPDATED:"SET_UPDATED",SET_VIEW:"SET_VIEW",SET_VIOLATIONS:"SET_VIOLATIONS",SORT_LISTS:"SORT_LISTS",TOGGLE_LOADING:"TOGGLE_LOADING",UPDATE_LAST_READ:"UPDATE_LAST_READ"};function mt(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.normalizeRelations,i=void 0===n?function(t){return t}:n,r=e.resolveRelations,s=void 0===r?function(t){return t}:r,o=e.service;return{actions:{create:function(t,e){var n=t.commit;t.state;return n(ft.SET_ERROR,""),n(ft.SET_VIOLATIONS,null),n(ft.TOGGLE_LOADING),o.create(e).then((function(t){return t.json()})).then((function(t){dt=Date.now(),n(ft.TOGGLE_LOADING),n(ft.ADD,t),n(ft.SET_CREATED,t)})).catch((function(t){return pt(n,t)}))},del:function(t,e){var n=t.commit;return n(ft.TOGGLE_LOADING),o.del(e).then((function(){n(ft.TOGGLE_LOADING),n(ft.SET_DELETED,e)})).catch((function(t){return pt(n,t)}))},fetchAll:function(t,e){var n=t.commit,r=t.state,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!o)throw new Error("No service specified!");return a&&n(ft.TOGGLE_LOADING),o.findAll({params:e}).then((function(t){return t.json()})).then((function(t){r.lastRetrieved=dt=Date.now(),a&&n(ft.TOGGLE_LOADING),n(ft.SET_TOTAL_ITEMS,t["hydra:totalItems"]),n(ft.SET_VIEW,t["hydra:view"]),t["hydra:aggregations"]&&n(ft.SET_AGGREGATIONS,t["hydra:aggregations"]),!0===r.resetList&&n(ft.RESET_LIST),t._roles&&n("me/SET_USER_ROLES",t._roles,{root:!0}),t._me&&n("me/SET_USER_ME",t._me,{root:!0}),t.lastRead&&n(ft.UPDATE_LAST_READ,t.lastRead),t["hydra:member"].forEach((function(t){n(ft.ADD,i(t))})),n(ft.SORT_LISTS)})).catch((function(t){return pt(n,t)}))},fetchCSV:function(t,e){var n=t.commit;t.state;if(!o)throw new Error("No service specified!");n(ft.TOGGLE_LOADING);var i={params:e,headers:{Accept:"text/csv"}};return o.findAll(i).then((function(t){return t.blob()})).then((function(t){n(ft.TOGGLE_LOADING);var e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="download.csv",document.body.appendChild(i),i.click(),i.remove()})).catch((function(t){return pt(n,t)}))},fetchSelectItems:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.params,r=void 0===i?{properties:["@id","name"]}:i;if(e(ft.TOGGLE_LOADING),!o)throw new Error("No service specified!");return o.findAll({params:r}).then((function(t){return t.json()})).then((function(t){e(ft.TOGGLE_LOADING),e(ft.SET_SELECT_ITEMS,t["hydra:member"])})).catch((function(t){return pt(e,t)}))},preLoad:function(t,e){var n=t.commit;t.state;dt=Date.now(),n(ft.ADD,i(e)),e._roles&&n("me/SET_USER_ROLES",e._roles,{root:!0}),e._me&&n("me/SET_USER_ME",e._me,{root:!0})},addLocalItem:function(t,e){(0,t.commit)(ft.ADD,i(e))},delLocalItem:function(t,e){(0,t.commit)(ft.SET_DELETED,i(e))},updateItem:function(t,e){(0,t.commit)(ft.SET_UPDATED,e)},markAllRead:function(t){(0,t.commit)(ft.MARK_ALL_READ)},load:function(t,e){var n=t.commit;t.state;if(!o)throw new Error("No service specified!");return n(ft.TOGGLE_LOADING),o.find(e).then((function(t){return t.json()})).then((function(t){dt=Date.now(),n(ft.TOGGLE_LOADING),n(ft.ADD,i(t)),t._roles&&n("me/SET_USER_ROLES",t._roles,{root:!0}),t._me&&n("me/SET_USER_ME",t._me,{root:!0})})).catch((function(t){return pt(n,t)}))},resetCreate:function(t){(0,t.commit)(ft.RESET_CREATE)},resetDelete:function(t){(0,t.commit)(ft.RESET_DELETE)},resetShow:function(t){(0,t.commit)(ft.RESET_SHOW)},resetUpdate:function(t){(0,t.commit)(ft.RESET_UPDATE)},patch:function(t,e){var n=t.commit;t.state;dt=Date.now(),n(ft.SET_ERROR,""),n(ft.SET_VIOLATIONS,null),n(ft.TOGGLE_LOADING);var i=!1;return e.hasEmbeddedUpdates&&(i=!0,delete e.hasEmbeddedUpdates),o.patch(e,i).then((function(t){return t.json()})).then((function(t){n(ft.TOGGLE_LOADING),n(ft.SET_UPDATED,t),t._roles&&n("me/SET_USER_ROLES",t._roles,{root:!0}),t._me&&n("me/SET_USER_ME",t._me,{root:!0})})).catch((function(t){return pt(n,t)}))},update:function(t,e){var n=t.commit;t.state;dt=Date.now(),n(ft.SET_ERROR,""),n(ft.SET_VIOLATIONS,null),n(ft.TOGGLE_LOADING);var i=!1;return e.hasEmbeddedUpdates&&(i=!0,delete e.hasEmbeddedUpdates),o.update(e,i).then((function(t){return t.json()})).then((function(t){n(ft.TOGGLE_LOADING),n(ft.SET_UPDATED,t),t._roles&&n("me/SET_USER_ROLES",t._roles,{root:!0}),t._me&&n("me/SET_USER_ME",t._me,{root:!0})})).catch((function(t){return pt(n,t)}))}},getters:{find:function(t){return function(e){return"string"==typeof e&&e.startsWith("/")?s(t.byIri[e]):s(t.byId[e])}},getField:c.b,list:function(t,e){return t.allIds.map((function(t){return e.find(t)}))},listUnread:function(t,e){return t.unreadIds.map((function(t){return e.find(t)}))},listRead:function(t,e){return t.readIds.map((function(t){return e.find(t)}))},lastReadId:function(t){return t.lastReadId},unreadCount:function(t){return t.unreadIds.length}},mutations:(t={updateField:c.d},l()(t,ft.UPDATE_LAST_READ,(function(t,e){a.default.set(t,"lastRead",e)})),l()(t,ft.SORT_LISTS,(function(t){t.unreadIds.sort(ut.compare),t.readIds.sort(ut.compare)})),l()(t,ft.ADD,(function(t,e){if(e["@lastRetrieved"]=dt,a.default.set(t.byIri,e["@id"],e),!e.id&&e.uuid&&(e.id=e.uuid),e.id&&(a.default.set(t.byId,e.id,e),(!t.earliestReadId||t.earliestReadId>e.id)&&(t.earliestReadId=e.id),(!t.lastReadId||t.lastReadId<e.id)&&(t.lastReadId=e.id)),!t.allIds.includes(e["@id"])&&(t.allIds.push(e["@id"]),t.lastRead&&(e.created||e.createdAt))){var n=e.created?e.created:e.createdAt;if((n=Math.round(new Date(n).getTime()/1e3))<t.lastRead){if(t.readIds.includes(e["@id"]))return;t.readIds.push(e["@id"])}else{if(t.unreadIds.includes(e["@id"]))return;t.unreadIds.push(e["@id"])}}})),l()(t,ft.MARK_ALL_READ,(function(t){t.unreadIds=[],t.readIds=t.allIds})),l()(t,ft.RESET_CREATE,(function(t){Object.assign(t,{isLoading:!1,error:"",createdResource:null,violations:null})})),l()(t,ft.RESET_DELETE,(function(t){Object.assign(t,{isLoading:!1,error:"",deleted:null})})),l()(t,ft.RESET_LIST,(function(t){Object.assign(t,{allIds:[],byIri:{},byId:{},error:"",isLoading:!1,resetList:!1})})),l()(t,ft.RESET_SHOW,(function(t){Object.assign(t,{error:"",isLoading:!1})})),l()(t,ft.RESET_UPDATE,(function(t){Object.assign(t,{error:"",isLoading:!1,updated:null,violations:null})})),l()(t,ft.SET_CREATED,(function(t,e){Object.assign(t,{createdResource:e})})),l()(t,ft.SET_DELETED,(function(t,e){if(t.allIds.includes(e["@id"])){var n=t.byIri[e["@id"]];n.id&&delete t.byId[n.id],delete t.byIri[e["@id"]],t.allIds=t.allIds.filter((function(t){return t!==e["@id"]})),t.readIds.includes(e["@id"])&&(t.readIds=t.readIds.filter((function(t){return t!==e["@id"]}))),t.unreadIds.includes(e["@id"])&&(t.unreadIds=t.unreadIds.filter((function(t){return t!==e["@id"]}))),e.skipNotification||Object.assign(t,{deleted:e})}})),l()(t,ft.SET_ERROR,(function(t,e){Object.assign(t,{error:e,isLoading:!1})})),l()(t,ft.SET_SELECT_ITEMS,(function(t,e){Object.assign(t,{error:"",isLoading:!1,selectItems:e})})),l()(t,ft.SET_TOTAL_ITEMS,(function(t,e){Object.assign(t,{totalItems:e})})),l()(t,ft.SET_UPDATED,(function(t,e){e["@lastRetrieved"]=dt,e.id&&a.default.set(t.byId,e.id,e),a.default.set(t.byIri,e["@id"],e),Object.assign(t,{updated:e})})),l()(t,ft.SET_VIEW,(function(t,e){Object.assign(t,{view:e})})),l()(t,ft.SET_AGGREGATIONS,(function(t,e){Object.assign(t,{aggregations:e})})),l()(t,ft.SET_VIOLATIONS,(function(t,e){Object.assign(t,{violations:e})})),l()(t,ft.TOGGLE_LOADING,(function(t){Object.assign(t,{error:"",isLoading:!t.isLoading})})),t),namespaced:!0,state:ht}}var vt={annotationActions:mt({service:lt("annotation_actions")}),annotationAnswers:mt({service:lt("annotation_answers")}),annotationReplies:mt({service:lt("annotation_replies")}),annotationVoteDowns:mt({service:lt("annotation_vote_downs")}),annotationVoteUps:mt({service:lt("annotation_vote_ups")}),faqQuestions:mt({service:lt("faq_questions")}),researchQuestions:mt({service:lt("research_questions")}),staffQuestions:mt({service:lt("staff_questions")})},gt={collection:mt({service:lt("collections")}),collectionEditor:mt({service:lt("collection_editors")}),collectionNotification:mt({service:lt("collection_notifications")}),collectionStatus:mt({service:lt("collection_statuses")}),collectionStatusAvailable:mt({service:lt("collection_status_availables")}),collectionSubmission:mt({service:lt("collection_submissions")}),collectionSubmissionComment:mt({service:lt("collection_submission_comments")}),collectionSubmissionRating:mt({service:lt("collection_submission_ratings")}),collectionType:mt({service:lt("collection_types")})},bt={article:mt({service:lt("articles")}),articleNote:mt({service:lt("article_notes")}),journal:mt({service:lt("journals")}),subject:mt({service:lt("subjects")}),userImpact:mt({service:lt("user-impacts")})},yt={reviewerMatch:mt({service:lt("reviewer-matches")}),reviewVolunteer:mt({service:lt("review_volunteers")})},_t={preprint:mt({service:lt("preprints")}),publication:mt({service:lt("publications")})},St={groups:mt({service:lt("groups")}),groupSubmissions:mt({service:lt("group_submissions")}),groupUsers:mt({service:lt("group_users")}),kanbanComponents:mt({service:lt("kanban_components")}),tokenEventMessages:mt({service:lt("token_event_messages")}),tokenEvents:mt({service:lt("token_events")}),tokens:mt({service:lt("tokens")}),users:mt({service:lt("users")}),userClientConfig:mt({service:lt("user_client_configs")}),userConnectedAccount:mt({service:lt("connected-accounts")}),userFiles:mt({service:lt("user_files")}),userInstitutions:mt({service:lt("user_institutions")}),userKanban:mt({service:lt("user_kanbans")}),userKanbanCard:mt({service:lt("user_kanban_cards")}),userKanbanCollaborator:mt({service:lt("user_kanban_collaborators")}),userSubmissionVisit:mt({service:lt("user_submission_visits")}),userUrls:mt({service:lt("user_urls")})},wt=n("cDf5"),Ct=n.n(wt);function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Et(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Tt={namespaced:!0,modules:{searchAggregations:{state:{},getters:{aggSections:function(t,e,n){var i=n.search.aggs;if(i.nested)for(var r in i.nested.nested)i[r]=i.nested.nested[r];var a=n.search.localParams.type,s=n.search.defaultType;!a&&s&&(a=n.search.searchParams.CONFIG_SEARCH_NAV_ROW[s].queryType);var o=[];n.search.localParams.journal&&o.push("journal"),n.search.localParams.manuscriptType&&o.push("manuscriptType"),n.search.localParams.manuscriptType&&o.push("country"),n.search.localParams.t&&o.push("t"),n.search.localParams.tag&&o.push("tag"),n.search.localParams.help&&o.push("help"),n.search.localParams.faqType&&o.push("faqType"),n.search.localParams.research&&o.push("research"),n.search.localParams.team&&o.push("team");var l=Object.assign({},n.search.searchParams.POSSIBLE_AGG_SECTIONS);for(var c in l)l[c].excludeIfSelfFiltered&&~o.indexOf(c)?delete l[c]:~l[c].showOnType.indexOf(a)?(l[c].aggs=[],c in i&&(i[c][c]&&i[c][c].buckets?l[c].aggs=i[c][c].buckets:i[c].value?l[c].aggs=i[c].value:l[c].aggs=i[c].buckets,0===l[c].aggs.length&&delete l[c])):delete l[c];return l}}}},state:{searchParams:{},endpoint:"/search-get/v2/",loading:!1,localParams:{},path:"",defaultType:"",tidyQuery:{},hasTidyQuerySet:!1,loadMasonry:!1,results:{},highlightCollection:{},pages:1,page:1,aggs:{},subjects:[],tags:[],totalResults:0,journals:[],journalIndex:0,reviewTypes:{},hideFilters:!1,hideLogo:!1,scoreTierEnabled:!1},getters:{getResetParams:function(t){return Object.assign({},t.searchParams.DEFAULT_PARAMS)},hasExtraFilterSet:function(t){var e,n,i=Et(t.searchParams.EXTRA_PARAM_FILTERS);try{for(i.s();!(n=i.n()).done;)if(e=n.value,t.localParams[e]&&""!==t.localParams[e])return!0}catch(t){i.e(t)}finally{i.f()}return!1},numberFiltersActive:function(t){var e,n,i=t.searchParams.NUMBER_PARAM_FILTERS,r=t.searchParams.ALLOWED_TYPES_BY_PARAM,a=[],s=Et(i);try{for(s.s();!(n=s.n()).done;)e=n.value,t.localParams[e]&&""!==t.localParams[e]&&r[e]&&~r[e].indexOf(t.localParams.type)&&a.push(e)}catch(t){s.e(t)}finally{s.f()}return a},hasNumberFilterActive:function(t,e){return e.numberFiltersActive.length>0},subjectFilterList:function(t){return t.localParams.subject&&""!==t.localParams.subject?t.localParams.subject.split("_"):[]},tagFilterList:function(t){return t.localParams.tag&&""!==t.localParams.tag?t.localParams.tag.split("_"):[]},journalDisplayName:function(t){if(t.journalIndex>-1)return t.journals[t.journalIndex].name},findJournalNameBySlug:function(t){return function(e){var n=t.journals.find((function(t){return t.slug===e}));if(n)return n.name}},disciplines:function(t){return t.journalIndex>-1?t.journals[t.journalIndex].disciplines:[]}},mutations:{setEndpoint:function(t,e){t.endpoint=e,f.a.defaults.url=e},setQueryResults:function(t,e){t.hasTidyQuerySet=!1,t.tidyQuery=t.highlightCollection={},e.aggs.length&&(t.aggs=JSON.parse(e.aggs)),e.total>0?(t.totalResults=e.total,t.pages=parseInt(e.pages),t.results=e.results,e.highlightCollection&&(t.highlightCollection=e.highlightCollection)):(t.totalResults=0,t.pages=0,t.results=[])},setJournals:function(t,e){e.unshift({id:-1,slug:"",name:"Any journal",title:"Any Journal"});var n={id:-1,slug:"",name:"Any discipline",title:"Any Discipline"};e=e.map((function(t){return t.disciplines&&t.disciplines.length>1&&t.disciplines.unshift(n),t})),t.journals=e},setLocalParams:function(t,e){t.localParams=e},setJournalIndex:function(t,e){if(e){var n=t.journals.map((function(t){return t.slug})).indexOf(e);if(n>-1)return t.journalIndex=n}t.journalIndex=0},setQueryParam:function(t,e){t.localParams[e.param]=e.val},setRoutePath:function(t,e){t.path=e},setStateDefaultType:function(t,e){e?(t.defaultType=e,t.localParams.type=t.searchParams.CONFIG_SEARCH_NAV_ROW[e].queryType):t.defaultType=""},setSearchParams:function(t,e){t.searchParams=e,t.reviewTypes=e.REVIEW_TYPES},setLocalParamsDefault:function(t,e){t.localParams=e},clearDefaultType:function(t){t.defaultType=""},setTidyQuery:function(t){t.hasTidyQuerySet=!0;var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.localParams),n=t.searchParams.ALLOWED_TYPES_BY_PARAM;for(var i in e)""!==e[i]&&void 0!==e[i]&&null!==e[i]||delete e[i],e.type&&n[i]&&!~n[i].indexOf(e.type)&&delete e[i];t.tidyQuery=e},setPageNumber:function(t,e){isNaN(e)&&(e=parseInt(e)),t.page=!e||""===e||void 0===e||e<1?1:e},setHideFilters:function(t,e){t.hideFilters=e},setHideLogo:function(t,e){t.hideLogo=e},setScoreTierEnabled:function(t,e){t.scoreTierEnabled=e}},actions:{runQuery:function(t,e){var n=t.commit,i=t.state;i.loadMasonry=i.searchParams.MASONRY_RESULT_TYPES.includes(i.localParams.type),i.loading=!0,i.defaultType&&(e.type=i.searchParams.CONFIG_SEARCH_NAV_ROW[i.defaultType].queryType),f.a.defaults.url=i.endpoint,f.a.request({params:e}).then((function(t){n("setQueryResults",t.data)})).catch((function(t){console.log(t)})).finally((function(){i.loading=!1}))},updateLocalData:function(t,e){var n=t.commit,i=(t.state,t.getters.getResetParams);if(Object.keys(e).length>0)for(var r in e){var a=Ct()(e[r]);["string","number","boolean"].includes(a)&&("page"===r?n("setPageNumber",parseInt(e[r])):i[r]=e[r])}n("setLocalParams",i),n("setJournalIndex",i.journal)},updateTidyQuery:function(t){(0,t.commit)("setTidyQuery")},updatePath:function(t,e){var n=t.commit;e.path&&n("setRoutePath",e.path)},updateParam:function(t,e){var n=t.commit,i=t.state,r=t.dispatch,a=t.getters;n("setPageNumber",null);var s=e.val?e.val:null,o=e.param,l={param:o,val:s};switch(o){case"journal":return n("setQueryParam",l),n("setJournalIndex",s),void r("updateParam",{param:"discipline",val:null});case"published-gte":case"published-lte":n("setQueryParam",{param:o,val:s=s===i.searchParams.ANY_YEAR?"":s});break;case"tag":var c=a.tagFilterList;-1===c.indexOf(s)?c.push(s):c.splice(c.indexOf(s),1),n("setQueryParam",{param:o,val:c.join("_")});break;case"subject":var u=a.subjectFilterList;-1===u.indexOf(s)?u.push(s):u.splice(u.indexOf(s),1),n("setQueryParam",{param:o,val:u.join("_")});break;case"type":s?s=isNaN(s)?s.replace("annotation",""):i.searchParams.REVIEW_TYPES[s].slug:n("clearDefaultType"),n("setQueryParam",{param:o,val:s});break;case"q":case"discipline":case"manuscriptType":case"t":case"country":case"section":case"status":case"citations-gte":case"citations-lte":case"downloads-gte":case"downloads-lte":case"answers-gte":case"answers-lte":case"votes-gte":case"votes-lte":default:n("setQueryParam",l)}r("updateTidyQuery")}}};a.default.use(s.a);var Pt=Object.assign({me:d,notifications:$,subscriptions:H,search:Tt},st.modules,Y,vt,bt,gt,yt,_t,St);e.a=new s.a.Store({modules:Pt,state:st.state,mutations:st.mutations,actions:st.actions})},k15Y:function(t,e,n){"use strict";n("P4bK")},koCO:function(t,e,n){"use strict";var i=n("lwsE"),r=n.n(i),a=n("W8MJ"),s=n.n(a),o=n("ZRYv"),l=function(){function t(e,n){var i=this;r()(this,t),this.items=[],e.pagerInfo?this.pagination=new o.a(e.pagerInfo):this.pagination=null,e.pagerItems?e.pagerItems.map((function(t){i.items.push(new n(t))})):Array.isArray(e)&&e.map((function(t){i.items.push(new n(t))}))}return s()(t,[{key:"sortBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc";function n(t,e){return function(n,i){if(!n.hasOwnProperty(t)||!i.hasOwnProperty(t))return 0;var r="string"==typeof n[t]?n[t].toUpperCase():n[t],a="string"==typeof i[t]?i[t].toUpperCase():i[t],s=0;return r>a?s=1:r<a&&(s=-1),"desc"==e?-1*s:s}}return this.items.sort(n(t,e)),this}}]),t}();e.a=l},kvwn:function(t,e,n){"use strict";e.a=Object.freeze({VUE_ROUTER_OUTLET_ID:"vue-router-outlet",PEERJ_CORE_VUE_ENTRY_DATA_ID:"vue-peerj-core-entry-data",PEERJ_APP_NAV_LAYOUT:"vue-peerj-app-nav-layout",PEERJ_CORE_VUE_ROUTER_OUTLET_ID:"vue-peerj-core-app"})},lFuB:function(t,e,n){"use strict";n("5xko")},lUu7:function(t,e,n){"use strict";n("CmJ3")},lrI9:function(t,e,n){var i={"./SearchResult":["9mcV"],"./SearchResult.vue":["9mcV"],"./SearchResultAggs":["Vckv"],"./SearchResultAggs.vue":["Vckv"],"./SearchResultAnswerAnnotation":["tjhl",42],"./SearchResultAnswerAnnotation.vue":["tjhl",42],"./SearchResultCategory":["i6qo",43],"./SearchResultCategory.vue":["i6qo",43],"./SearchResultFigure":["Bh2X",40],"./SearchResultFigure.vue":["Bh2X",40],"./SearchResultInstitutionMetrics":["kEBw",55],"./SearchResultInstitutionMetrics.vue":["kEBw",55],"./SearchResultInstitutionPage":["jeQT",37],"./SearchResultInstitutionPage.vue":["jeQT",37],"./SearchResultPublication":["TBKw",27],"./SearchResultPublication.vue":["TBKw",27],"./SearchResultPublicationMetrics":["CtWq",56],"./SearchResultPublicationMetrics.vue":["CtWq",56],"./SearchResultQuestionAnnotation":["i3ox",44],"./SearchResultQuestionAnnotation.vue":["i3ox",44],"./SearchResultUser":["G7+D",32],"./SearchResultUser.vue":["G7+D",32],"./staff/StaffSearchResultArticle":["KFDl",36],"./staff/StaffSearchResultArticle.vue":["KFDl",36],"./staff/StaffSearchResultAuthor":["D1p/",34],"./staff/StaffSearchResultAuthor.vue":["D1p/",34],"./staff/StaffSearchResultQuestionAnnotation":["HB9t",45],"./staff/StaffSearchResultQuestionAnnotation.vue":["HB9t",45],"./staff/StaffSearchResultReviewer":["Q8vS",46],"./staff/StaffSearchResultReviewer.vue":["Q8vS",46],"./staff/StaffSearchResultUser":["rHgz",30],"./staff/StaffSearchResultUser.vue":["rHgz",30]};function r(t){if(!n.o(i,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],r=e[0];return Promise.all(e.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(i)},r.id="lrI9",t.exports=r},"m/TM":function(t,e,n){"use strict";n("1YBq")},mkUh:function(t,e,n){"use strict";e.a={namespaced:!0,state:{notifications:[]},mutations:{_addNotification:function(t,e){t.notifications.push(e)},removeNotification:function(t,e){for(var n=0;n<t.notifications.length;n++)if(t.notifications[n].id==e){t.notifications.splice(n,1);break}}},actions:{addNotification:function(t,e){var n=t.commit,i=t.state;e.id=Date.now()+"_"+i.notifications.length,n("_addNotification",e),setTimeout((function(){n("removeNotification",e.id)}),6e3)}}}},"mlf+":function(t,e,n){},moDH:function(t,e,n){},neK7:function(t,e,n){"use strict";n("ojXH")},oVAy:function(t,e,n){"use strict";n("yZIT")},ojXH:function(t,e,n){},pz7x:function(t,e,n){},qkxR:function(t,e,n){"use strict";n("6359")},reo2:function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var i=n("lwsE"),r=n.n(i),a=n("W8MJ"),s=n.n(a),o=n("7W2i"),l=n.n(o),c=n("a1gu"),u=n.n(c),d=n("Nsbk"),h=n.n(d),p=n("2waU"),f=n("IJJa"),m=n("1IrZ"),v=n("6OTJ"),g=n("koCO");function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(t){l()(n,t);var e=b(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).minimumReviewers=t.minimum_reviewers,i.minimumReviews=t.minimum_reviews,i.title=t.title,i}return n}(m.a),_=n("/hMX");n("vDqi");function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var w=function(t){l()(n,t);var e=S(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).email=t.email,i.name=t.name,i.links={user:t._links.user},i}return n}(m.a);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var O=function(t){l()(n,t);var e=C(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).id=t.id,i.subject=t.subject,i.sent=t.sent,i.recipients=new g.a(t.recipients,w),i.senderName=t.senderName,i.textContent=t.textContent?t.textContent:"",i.htmlContent=t.htmlContent?t.htmlContent:"",i.links={html:t._links.html,text:t._links.text,self:t._links.self},i}return s()(n,[{key:"getEmailContent",value:function(t){var e=this;return new Promise((function(n,i){_.a.call({url:e.links[t]}).then((function(t){n(t.data)})).catch((function(t){i(t)}))}))}},{key:"resendEmail",value:function(){var t=this;return new Promise((function(e,n){_.a.call({url:t.apiId,queryParams:{action:"resend"},method:"POST"}).then((function(t){e(t)})).catch((function(t){n(t)}))}))}},{key:"sendEmailToMe",value:function(){var t=this;return new Promise((function(e,n){_.a.call({url:t.apiId,queryParams:{action:"send-to-me"},method:"POST"}).then((function(t){e(t)})).catch((function(t){n(t)}))}))}}]),n}(m.a);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var A=function(t){l()(n,t);var e=E(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).id=t.id,i.subject=t.subject,i.sender=t.sender,i.recipients=t.recipients,i.status=t.status,i.messageDate=t.messageDate,i.source=t.source,i.links={body:t._links.body},i}return s()(n,[{key:"getEmailContent",value:function(){var t=this;return new Promise((function(e,n){_.a.call({url:t.links.body}).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}}]),n}(m.a);function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var P=function(t){l()(n,t);var e=T(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).endpoints=n.endpoints,i.title=t.title,i.allowReviewerVolunteers=t.allowedReviewerVolunteers,i.status=t.status,i.checker=t.checker?new v.a(t.checker):null,i.hasPreviousSubmission=t.hasPreviousSubmission,i.hasPreviousDecision=t.hasPreviousDecision,i.authorChanges=t.authorChanges?t.authorChanges:[],i.currentRevisionSubmitted=t.currentRevisionSubmitted,i.links={authorAddresses:t._links.authorAddresses,currentRevision:t._links.currentRevision,revisions:t._links.revisions,externalMessages:t._links.externalMessages,messages:t._links.messages},t.hasOwnProperty("articleNotes")&&(i.articleNotes=new g.a(t.articleNotes,f.a)),i}return s()(n,[{key:"getMessages",value:function(t,e,n,i){return"system"==t?this.getSystemMessages(e,n,i):this.getExternalMessages(e,n)}},{key:"getSystemMessages",value:function(t,e,n){var i=this;return new Promise((function(r,a){O.get({url:i.links.messages,queryParams:{"include-content":n?1:0},paginationPage:t,paginationLimit:e}).then((function(t){r(t)})).catch((function(t){a(t)}))}))}},{key:"getExternalMessages",value:function(t,e){var n=this;return new Promise((function(i,r){A.get({url:n.links.externalMessages,paginationPage:t,paginationLimit:e}).then((function(t){i(t)})).catch((function(t){r(t)}))}))}},{key:"getCurrentRevision",value:function(){var t=this;return new Promise((function(e,n){y.get({url:t.links.currentRevision}).then((function(t){e(t)})).catch((function(t){n(t)}))}))}},{key:"getAuthorAddresses",value:function(t,e,n){var i=this;return new Promise((function(n,r){p.a.get({url:i.links.authorAddresses,paginationPage:t,paginationLimit:e}).then((function(t){n(t)})).catch((function(t){r(t)}))}))}}],[{key:"endpoints",get:function(){return{get:"articles/{id}/",list:"articles/"}}}]),n}(m.a)},sNUu:function(t,e,n){"use strict";var i=n("PQko"),r=n("sWYD"),a=n("dLU1"),s=n("4+6U"),o=n("0UaF"),l=function(t){return t&&t.length<12&&(t+="T00:00:00+00:00"),Object(i.a)(t)};e.a={format:function(t,e){return Object(r.a)(l(t),e)},addMonths:function(t,e){return Object(a.a)(Object(s.a)(t),e)},formatToNowVeryShort:function(t,e){var n=Object(o.a)(l(t),new Date,{unit:"minute"}).split(" ")[0];return 0==n?"< 1 min":1==n?"1m":n<60?n+"m":n<120?"1h":n<=1440?Math.floor(n/60)+"h":n<=10080?Math.floor(n/24/60)+"d":this.format(t,e)},formatDateToNowShort:function(t,e){var n=Object(o.a)(l(t),new Date,{unit:"minute"}).split(" ")[0];return 0==n?"< 1 min":1==n?"1 min":n<60?n+" min":n<120?"1 hr":n<=1440?Math.floor(n/60)+" hrs":n<=10080?Math.floor(n/24/60)+" days":this.format(t,e)},formatDateToNow:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(o.a)(l(t),new Date,{unit:"minute"}),r=i.split(" "),a=r[0];return 0==a?"Less than a minute ago":1==a?"1 minute ago":a<60?a+" minutes ago":a<120?"1 hour ago":a<=1440?Math.floor(a/60)+" hours ago":n&&a<=10080?(e=e.split(", Y").shift(),this.format(t,e)):this.format(t,e)}}},tNIs:function(t,e,n){"use strict";n("8mAG")},tc4C:function(t,e,n){"use strict";n("Pl9e")},u8Zi:function(t,e,n){"use strict";e.a=Object.freeze({CONFIRM:"UI.confirm",CONFIRM_VUETIFY:"UI.confirm_vuetify",SHOW_DEADLINE_EXTENSION_SELECTOR:"UI.deadline_selector",DEADLINE_EXTENSION_RESPONSE:"UI.deadline_extension_response",NEW_FEATURE_SHOW_HELP_MODAL:"NEW.showHelpModal",SHOW_LOGIN_MODAL:"UI.showLoginModal",ARTICLE_NOTES_ADD:"ARTICLE.addNote",ARTICLE_NOTES_DELETE:"ARTICLE.deleteNote",ARTICLE_NOTES_UPDATE:"ARTICLE.updateNote",ARTICLE_NOTES_SHOW_MODAL:"ARTICLE.showNotesModal",ARTICLE_NOTES_KEYBOARD_SHORTCUT_ADD:"ARTICLE.keyboardShortcutAddNote",ARTICLE_NOTES_KEYBOARD_SHORTCUT_EXPAND_TOGGLE:"ARTICLE.keyboardShortcutExpandToggle",MANUSCRIPT_SHOW_ADD_AUTHOR_MODAL:"MANUSCRIPT.showAddAuthorModal",MANUSCRIPT_SHOW_ADD_ADDRESS_MODAL:"MANUSCRIPT.showAddAddressModal",MANUSCRIPT_SHOW_EDIT_AUTHOR_MODAL:"MANUSCRIPT.showEditAuthorModal",MANUSCRIPT_SHOW_EDIT_ADDRESS_MODAL:"MANUSCRIPT.showEditAddressModal",MANUSCRIPT_SHOW_INSTITUTIONAL_EMAIL_MODAL:"MANUSCRIPT.showInstitutionalEmailModal",MANUSCRIPT_ADDRESS_ADDED_FROM_AUTHOR_MODAL:"MANUSCRIPT.addressAddedFromAuthorModal"})},up92:function(t,e,n){},vYI4:function(t,e,n){"use strict";n("40zP")},"w+dn":function(t,e,n){},wBlg:function(t,e,n){"use strict";n("1FbP")},wWNX:function(t,e,n){"use strict";n("yafW")},"y/dr":function(t,e,n){"use strict";n("XUDj")},yZIT:function(t,e,n){},yafW:function(t,e,n){}},[["iarp","runtime",12,64]]]);